/**
 * almond 0.2.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

var requirejs,require,define;(function(e){function c(e,t){return f.call(e,t)}function h(e,t){var n,r,i,s,o,a,f,l,c,h,p=t&&t.split("/"),d=u.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!a&&v&&v[r]&&(a=v[r],f=l)}!s&&a&&(s=a,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function p(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function d(e){return function(t){return h(t,e)}}function v(e){return function(t){s[e]=t}}function m(n){if(c(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!c(s,n)&&!c(a,n))throw new Error("No "+n);return s[n]}function g(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice;r=function(e,t){var n,r=g(e),i=r[0];return e=r[1],i&&(i=h(i,t),n=m(i)),i?n&&n.normalize?e=n.normalize(e,d(t)):e=h(e,t):(e=h(e,t),r=g(e),i=r[0],e=r[1],i&&(n=m(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return p(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:y(e)}}},t=function(t,n,u,f){var l,h,d,g,y,b=[],w;f=f||t;if(typeof u=="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){g=r(n[y],f),h=g.f;if(h==="require")b[y]=i.require(t);else if(h==="exports")b[y]=i.exports(t),w=!0;else if(h==="module")l=b[y]=i.module(t);else if(c(s,h)||c(o,h)||c(a,h))b[y]=m(h);else{if(!g.p)throw new Error(t+" missing "+h);g.p.load(g.n,p(f,!0),v(h),{}),b[y]=s[h]}}d=u.apply(s[t],b);if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(d!==e||!w)s[t]=d}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){return typeof s=="string"?i[s]?i[s](o):m(r(s,o).f):(s.splice||(u=s,o.splice?(s=o,o=a,a=null):s=e),o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n)},n.config=function(e){return u=e,u.deps&&n(u.deps,u.callback),n},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!c(s,e)&&!c(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("../../vendor/almond-0.2.6",function(){}),function(){angular.module("waffle",["ngResource","ngSanitize","ui.bootstrap","as.sortable","ui.router","mentio","monospaced.elastic","LocalStorageModule","q-decorators","scope-decorators","pasvaz.bindonce","angular-chartist"]).config(["localStorageServiceProvider","$httpProvider",function(e,t){return e.setPrefix(""),t.interceptors.push("WaffleApiHttpInterceptor")}]).run(["SessionService","$http",function(e,t){return t.defaults.cache=!e.isLoggedIn()}])}.call(this),define("waffle",function(){}),function(){var e=[].slice;angular.module("q-decorators",[]).config(["$provide",function(t){return t.decorator("$q",["$delegate",function(t){var n;return n=t,n.resolve=n.resolve||function(){var t,r;return r=1<=arguments.length?e.call(arguments,0):[],t=n.defer(),t.resolve.apply(t,r),t.promise},n.allSettled=n.allSettled||function(e){var t,r,i,s,o;r=n.defer();if(!angular.isArray(e))throw"allSettled can only handle an array of promises (for now)";return o=[],s=[],i=!1,angular.forEach(e,function(e,t){o[t]=!1}),t=function(e,t,n,r){var i;i=!0,angular.forEach(e,function(e,t){e||(i=!1)}),i&&(r?n.reject(t):n.resolve(t))},angular.forEach(e,function(e,u){n.when(e).then(function(e){o[u]=!0,s[u]=e,t(o,s,r,i)},function(e){o[u]=!0,s[u]=e,i=!0,t(o,s,r,i)})}),r.promise},n}])}])}.call(this),define("angular-decorators/q-decorators",function(){}),function(){var e=[].slice;angular.module("scope-decorators",[]).config(["$provide",function(t){return t.decorator("$rootScope",["$delegate","$injector",function(t,n){var r;return r=t,r.debouncedWatch==null&&(r.debouncedWatch=_.wrap(r.$watch,function(t,r,i,s,o){var u,a;return u=n.get("$timeout"),!o&&_.isNumber(s)&&(o=s,s=void 0),a=null,t.call(this,r,function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],u.cancel(a),a=u(function(){return i.apply(null,t)},o)},s)})),r}])}])}.call(this),define("angular-decorators/scope-decorators",function(){}),function(){var e;angular.module("waffle").controller("AccountPageController",["$q","$rootScope","$scope","$window","Application","AccountService","SessionService","TrackService",e=function(){function e(e,t,n,r,i,s,o,u){var a;this.$q=e,this.$rootScope=t,this.$scope=n,this.$window=r,this.$scope.provider=i.github.provider,this.$scope.avatarUrl=o.getSessionData().user.github.avatar_url,this.$scope.githubUsername=o.getSessionData().user.github.login,a=_.find(o.getSessionData().user.credentials,{provider:this.$scope.provider._id}),this.$scope.publicPermissions=_.includes(a.scope,"public_repo"),s.get({_id:o.getUser().account}).$promise.then(function(e){return function(t){return e.$scope.account=t,e.$scope.created=moment(t.createdAt).format("MMM D, YYYY")}}(this))["catch"](function(e){return function(){return e.$rootScope.$emit("waffle.alert.danger","Unable to get account info for "+e.$scope.githubUsername+".",{keepAround:!0})}}(this)),this.$scope.upgrade=function(e){return o.login({permission:"private"}),u.track("click add private access",{origin:e})},this.$scope.sortByName=function(e){var t;return(t=e.sources[0].displayName)!=null?t:e.name}}return e.prototype.deleteAccount=function(){var e,t,n;return e=this.$scope.account.owner+"'s account",t=_.map(this.$scope.account.projects,"name"),n=t.length?"This will delete these projects: "+t.join(", "):"",this.$window.confirm("Are you sure you want to delete "+e+"? "+n)?(this.$rootScope.$emit("waffle.alert.processing","Deleting "+e),this.$scope.account.$delete().then(function(t){return function(){return delete t.$rootScope.account,t.$rootScope.$emit("waffle.alert.success","Successfully deleted "+e),t.$window.location.href="/"}}(this))["catch"](function(t){return function(){return t.$rootScope.$emit("waffle.alert.danger","Unable to delete "+e)}}(this))):this.$q.resolve()},e}()])}.call(this),define("controllers/account/page",function(){}),function(){var e;angular.module("waffle").controller("BadgePullRequestBannerController",["$scope","$http","Application","$q","SessionService",e=function(){function e(e,t,n,r,i){this.$scope=e,this.$http=t,this.Application=n,this.$q=r,this.SessionService=i}return e.prototype.checkReadmeForBadge=function(){return this.$http({method:"GET",url:this.Application.github.provider.baseApiUrl+"/search/code?q=in:file+badge.waffle.io+repo:"+this.$scope.username+"/"+this.$scope.repo,headers:{Accept:"application/vnd.github.preview.text-match+json"},params:{access_token:this.SessionService.getAccessToken()}}).then(function(e){return e.data.total_count!==0})},e.prototype.checkForPendingPullRequestFromWaffle=function(){return this.$http({method:"GET",url:this.Application.github.provider.baseApiUrl+"/repos/"+this.$scope.username+"/"+this.$scope.repo+"/pulls",headers:{Accept:"application/vnd.github.v3+json"},params:{access_token:this.SessionService.getAccessToken()}}).then(function(e){var t,n,r;return t=_.find(e.data,function(e){return e.user.login==="waffle-iron"}),t!=null&&(n=!0,r=t.html_url),{sent:n!=null,url:r}})},e.prototype.sendBadgePullRequest=function(){return this.$http({method:"GET",url:"/"+this.$scope.username+"/"+this.$scope.repo+"/pull",headers:{Accept:"application/vnd.github.v3+json"}}).then(function(e){return function(t){return t.data.success?!0:e.$q.reject("unable to create pull request")}}(this))},e}()])}.call(this),define("controllers/banners/badge-pull-request-banner",function(){}),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};angular.module("waffle").controller("BoardController",["$rootScope","$scope","$window","BoardDataService","Application","KeyboardShortcuts","ProjectDataService",e=function(){function e(e,n,r,i,s,o,u){var a,f,l;this.$rootScope=e,this.$scope=n,this.BoardDataService=i,this._loadBoardData=t(this._loadBoardData,this),this._loadBoardData(),l=this.$rootScope.$on("card-updated",this._loadBoardData),f=this.$rootScope.$on("card-bulk-update",this._loadBoardData),a=this.$rootScope.$on("boardPreferenceUpdated",this._loadBoardData),r.key(o.reload.keystroke,function(e){return function(){return u.clearCache(),e._loadBoardData()}}(this)),this.$scope.multipleAssigneesOff=s.env==="takeout",this.$scope.$on("$destroy",function(e){return function(){var t;return a(),l(),f(),r.key.unbind(o.reload.keystroke),(t=e.$scope.board)!=null?t.destroy():void 0}}(this))}return e.prototype._loadBoardData=function(){return delete this.$scope.board,this.BoardDataService.createBoard().then(function(e){return function(t){return e.$scope.board=t}}(this))},e}()])}.call(this),define("controllers/board/board",function(){}),function(){var e;angular.module("waffle").controller("CardController",["$scope",e=function(){function e(e){this.$scope=e,this.$scope.$watch("card.size",function(e){return function(t,n){if(t===n)return;return e.$scope.$emit("card-resize")}}(this))}return e}()])}.call(this),define("controllers/board/card",function(){}),function(){var e,t=[].slice;angular.module("waffle").controller("ColumnController",["$rootScope","$scope","BoardPreferencesService","FilterService","ProjectDataService",e=function(){function e(e,n,r,i,s){var o;this.$scope=n,this.BoardPreferencesService=r,this.ProjectDataService=s,this.$scope.$watchCollection(function(e){return function(){return e.$scope.column.cards}}(this),function(e){return function(){return e.$scope.cards=_.filter(e.$scope.column.cards,function(t){return i.cardMatchesFilter(t,e.$scope.column)})}}(this)),this.$scope.$watchCollection("cards",function(e){return function(){return e.refreshSizeTotals()}}(this)),this.$scope.$on("card-resize",function(e){return function(){return e.refreshSizeTotals()}}(this)),this.$scope.isFiltered=i.isFiltered(),o=e.$on("filterUpdated",function(e){return function(){e.$scope.isFiltered=i.isFiltered();if(!e.$scope.column.cards)return;return e.$scope.isFiltered?e.$scope.cards=_.filter(e.$scope.column.cards,function(t){return i.cardMatchesFilter(t,e.$scope.column)}):e.$scope.cards=t.call(e.$scope.column.cards)}}(this)),this.$scope.$on("$destroy",o)}return e.prototype.refreshSizeTotals=function(){return this.$scope.columnSizeTotal=_.reduce(this.$scope.column.cards,function(e,t){var n;return e+((n=t.size)!=null?n:0)},0),this.$scope.filteredColumnSizeTotal=_.reduce(this.$scope.cards,function(e,t){var n;return e+((n=t.size)!=null?n:0)},0)},e}()])}.call(this),define("controllers/board/column",function(){}),function(){var e;angular.module("waffle").controller("CommentFormController",["$scope","CommentService","$rootScope","TrackService",e=function(){function e(e,t,n,r){this.$scope=e,this.CommentService=t,this.$rootScope=n,this.TrackService=r,this.$scope.form={}}return e.prototype.comment=function(){if(!this.$scope.form.comment)return;return this.TrackService.track("post comment"),this.CommentService.comment({card:this.$scope.card,message:this.$scope.form.comment}).then(function(e){return function(t){var n;return(n=e.$scope.comments)!=null&&n.push(t.data),e.$scope.card.githubMetadata.comments++,delete e.$scope.form.comment}}(this))},e}()])}.call(this),define("controllers/board/comment-form",function(){}),function(){var e;angular.module("waffle").controller("DetailModalController",["$scope","$window","$http","IssueService","CommentService","card","Application","PusherService","SessionService","TrackService","PaginationService",e=function(){function e(e,t,n,r,i,s,o,u,a,f,l){this.$scope=e,this.$window=t,this.$http=n,this.IssueService=r,this.CommentService=i,this.SessionService=a,this.TrackService=f,this.PaginationService=l,this.$scope.card=s,this.$scope.comments=[],this.$scope.multipleAssigneesOff=o.env==="takeout",this.IssueService.get({card:s}).then(function(e){return function(t){return _.merge(e.$scope.card.githubMetadata,t)}}(this)),u.bind("card-commented",function(e){return function(t){if(t.card._id===e.$scope.card._id&&!_.some(e.$scope.comments,{url:t.comment.url}))return e.$scope.comments.push(t.comment),e.$scope.$apply()}}(this),!0)}return e.prototype.track=function(e){return this.TrackService.track(e)},e.prototype.loadNextPageOfComments=function(){var e,t;if(this.$scope.comments.length<this.$scope.card.githubMetadata.comments){if(this._commentsRequest)return;return e=this.SessionService.getAccessToken(this.$scope.card.githubMetadata.source),this._commentsRequest=this.$http({method:"GET",url:(t=this.commentsNextPageUrl)!=null?t:this.$scope.card.githubMetadata.url+"/comments?per_page=100&access_token="+(e||this.$window.Application.github.accessToken),headers:{Accept:"application/vnd.github.full+json"}}).then(function(e){return function(t){return e.$scope.comments=e.$scope.comments.concat(t.data),e.commentsNextPageUrl=e.PaginationService.getNextPageUrl(t)}}(this))["finally"](function(e){return function(){return delete e._commentsRequest}}(this))}return!0},e.prototype.updateBody=function(){return this.IssueService.update({card:this.$scope.card,data:{body:this.$scope.card.githubMetadata.body}}).then(function(e){return function(t){return _.merge(e.$scope.card.githubMetadata,t)}}(this))},e.prototype.updateComment=function(e){return this.CommentService.update({card:this.$scope.card,comment:e,data:{body:e.body}}).then(function(t){return function(t){return _.merge(e,t)}}(this))},e.prototype.deleteComment=function(e){return this.CommentService["delete"]({card:this.$scope.card,comment:e}).then(function(t){return function(){return _.remove(t.$scope.comments,{id:e.id})}}(this))},e}()])}.call(this),define("controllers/board/detail-modal",function(){}),function(){angular.module("waffle").controller("KeyboardShortcutDocsController",["$scope","$window","$modal","KeyboardShortcuts",function(e,t,n,r){var i,s;return e.keyboardShortcuts=_.values(r),i=null,s=function(){return i?i.close():(i=n.open({templateUrl:"board/keyboard-shortcut-docs.html",backdrop:!1,windowClass:"keyboard-shortcut-docs",scope:e}),i.result["finally"](function(){return i=null}))},t.key(r.help.keystroke,s)}])}.call(this),define("controllers/board/keyboard-shortcut-docs",function(){}),function(){var e;angular.module("waffle").controller("BoardPageController",["$rootScope","$stateParams","project","Application",e=function(){function e(e,t,n,r){_.extend(e,{username:t.username,repo:t.repo,isTeamMember:e.loggedIn&&_.includes(n!=null?n.team:void 0,r.session.user._id)})}return e}()])}.call(this),define("controllers/board/page",function(){}),function(){var e;angular.module("waffle").controller("CardRouteController",["$rootScope","$modal","$stateParams","$q","$state","card",e=function(){function e(e,t,n,r,i,s){if(s==null)return e.$emit("waffle.alert.danger","The card requested could not be found."),i.go("app.board.home");t.open({backdrop:"static",template:"<waffle-detail-modal></waffle-detail-modal>",windowClass:"detail-modal",controller:"DetailModalController as controller",resolve:{card:function(){return s}}}).result["finally"](function(){return i.go("app.board.home")})}return e}()])}.call(this),define("controllers/card-route",function(){}),function(){var e;angular.module("waffle").controller("HomePageController",["$location","$q","$scope","Application","ft","ProjectService","SessionService","TrackService","UserDataService",e=function(){function e(e,t,n,r,i,s,o,u,a){var f;this.$location=e,this.$scope=n,this.$scope.newProject=!1,this.$scope.avatarUrl=o.getSessionData().user.github.avatar_url,this.$scope.githubUsername=o.getSessionData().user.github.login,this.$scope.provider=r.github.provider,f=_.find(o.getSessionData().user.credentials,{provider:this.$scope.provider._id}),this.$scope.publicPermissions=_.includes(f.scope,"public_repo"),a.getUserData().then(function(e){return function(t){var n;return e.$scope.excludeSources=function(){var e,r,i,s;i=_.map(t.projects,"sources"),s=[];for(e=0,r=i.length;e<r;e++)n=i[e],s.push(n[0]);return s}()}}(this)),this.$scope.toggleNewProject=function(e){return function(){return e.$scope.newProject=!e.$scope.newProject}}(this),this.$scope.upgrade=function(e){return o.login({permission:"private"}),u.track("click add private access",{origin:e})}}return e.prototype.addProject=function(e){return this.$location.url("/"+e.full_name+"/new")},e}()])}.call(this),define("controllers/home/page",function(){}),function(){var e;angular.module("waffle").controller("MetricsBurndownController",["$rootScope","$scope","$state","Application",e=function(){function e(e,t,n,r){this.$rootScope=e,t.repoPath=this.$rootScope.project.sources[0].repoPath,t.githubBaseUrl=r.github.provider.baseUrl,t.dp={startDate:moment().startOf("week").subtract("weeks",2).toDate(),endDate:moment().toDate()},t.showSnippets=!this.$rootScope.project.sources[0]["private"]&&r.env!=="takeout",t.snippetBuilder={path:"projects/"+this.$rootScope.project._id,displayName:"Burndown Graph",urlName:"burndown"},t.$watch("selectedMilestone",function(e,n){var r;return t.selectedMilestone?(r=encodeURIComponent(t.selectedMilestone.title),t.snippetBuilder.params="?milestone="+r):t.snippetBuilder.params="?milestone='YourMilestoneHere'"}),t.open=function(e,n){return e.stopPropagation(),t.open[n]=!0},t.dateOptions={showWeeks:!1},t.useSize=!1,t.closedType="Both",t.isCollapsed=!0}return e}()])}.call(this),define("controllers/metrics/burndown",function(){}),function(){var e;angular.module("waffle").controller("MetricsIndexController",["Intercom",e=function(){function e(e){this.Intercom=e}return e.prototype.openIntercom=function(){this.Intercom.showNewMessage("My team would love to see this on the metrics page: ")},e}()])}.call(this),define("controllers/metrics/page",function(){}),function(){var e;angular.module("waffle").controller("MetricsThroughputController",["$rootScope","$scope","$state","MetricsService","Application",e=function(){function e(e,t,n,r,i){this.$rootScope=e,this.$scope=t,this.$state=n,this.MetricsService=r,this.$scope.showSnippets=!this.$rootScope.project.sources[0]["private"]&&i.env!=="takeout",this.$scope.snippetBuilder={path:this.$state.params.username+"/"+this.$state.params.repo,displayName:"Throughput Graph",urlName:"throughput"},this.$scope.startDate=moment().startOf("week").subtract("weeks",7).format("MMM Do"),this.$scope.endDate=moment().format("MMM Do"),this.fetchData()}return e.prototype.fetchData=function(){return this.MetricsService.throughput().then(function(e){return function(t){return e.throughputGraphData=t,e.$scope.throughputGraphDataFetched=!0,e.$scope.$broadcast("throughputGraphDataFetched")}}(this))["catch"](function(e){return function(t){return e.$rootScope.$emit("waffle.alert.danger","Sorry, could not retrieve data"),e.$scope.error=t}}(this))},e.prototype.getThroughputGraphData=function(){return angular.copy(this.throughputGraphData)},e}()])}.call(this),define("controllers/metrics/throughput",function(){}),function(){var e;angular.module("waffle").controller("OAuthAuthorizeController",["$scope","OAuthGrant",e=function(){function e(e,t){e.OAuthGrant=t}return e}()])}.call(this),define("controllers/oauth/authorize-controller",function(){}),function(){var e;angular.module("waffle").controller("ProjectController",["$scope",e=function(){function e(e){e.toggleMaximized=function(){return e.isMaximized=!e.isMaximized},e.$watch("project",function(t){return e.isMaximized=!1})}return e}()])}.call(this),define("controllers/project",function(){}),function(){var e=[].slice;angular.module("waffle").controller("SettingsColumnsPageController",["$scope","$rootScope","$timeout","ColumnService","LabelService","TrackService","ProjectDataService",function(t,n,r,i,s,o,u){var a,f;return t.loaded=!1,t.columns={},t.$on("$stateChangeStart",function(e){if(!t.buttonDisabled()&&!e.defaultPrevented&&!confirm("You have unsaved changes, are you sure you want to leave this page?")){e.preventDefault();return}return u.clearCache()}),t.state={startTypes:[{type:"inProgressStart",name:"Work Started",tooltip:"When a branch referencing an issue is created, it will move the issue here and assign the actor to that issue."},{type:"nonCollaboratorPrStart",name:"New Contributor PRs",tooltip:"New Pull Requests opened by non-collaborators start here."},{type:"collaboratorPrStart",name:"New Collaborator PRs",tooltip:"New Pull Requests opened by Collaborators start here."}],unclaimedStartTypes:[]},t.$watch("state.startTypes",function(e){return t.state.unclaimedStartTypes=_.filter(e,function(e){return!e.claimed})},!0),f=function(e){return t.columns.backlogColumns=_(e).filter("isBacklog").sortBy("rank").value(),t.columns.progressColumns=_(e).filter({isBacklog:!1,isDone:!1}).sortBy("rank").value(),t.columns.completeColumns=_(e).filter("isDone").sortBy("rank").value()},a=function(){var n,r,i,s;return s=t.columns,n=s.backlogColumns,i=s.progressColumns,r=s.completeColumns,e.call(n).concat(e.call(i),e.call(r))},t.$watch("project",function(e){return function(e){return u.getProjectData().then(function(e){return t.projectData=e,t.master=angular.copy(e.columns),t.loaded=!0})}}(this)),t.$watchCollection("projectData.columns",function(e){return f(e)}),t.sortableOptions={containment:".columns-settings-ct",containerPositioning:"relative",accept:function(e,n){var r,i,s,o;return e.itemScope.modelValue.type?!1:(i=e.column,o=n.columnSection,o==="backlog"?(r=_.find(t.projectData.columns,"isBacklog"),!r||i===r):o==="complete"?(s=_.find(t.projectData.columns,"isDone"),!s||i===s):!0)},orderChanged:function(e){var n,r,i,s;return s=e.dest.sortableScope.columnSection,i=e.source.itemScope.column,r=e.dest.index,s==="progress"?r+=t.columns.backlogColumns.length:s==="complete"&&(r+=t.columns.backlogColumns.length,r+=t.columns.progressColumns.length),n=a(),n=_(n).without(i).sortBy("rank").value(),n.splice(r,0,i),_.each(n,function(e,t){return e.rank=t})},itemMoved:function(e){var t,n;return t=e.source.itemScope.column,n=e.dest.sortableScope.columnSection,_.assign(t,{isBacklog:n==="backlog",isDone:n==="complete",label:n==="progress"?t.label:void 0},n==="complete"?{inProgressStart:!1,nonCollaboratorPrStart:!1,collaboratorPrStart:!1}:void 0)}},t.typeSortableOptions={containment:".columns-settings-ct",containerPositioning:"relative",accept:function(e,t){var n;if(e.modelValue.type==null)return!1;n=t.column;if(n!=null?!n.isDone:!void 0)return!0},dragStart:function(){return t.dropZone=!0},dragEnd:function(){return t.dropZone=!1},itemMoved:function(e){var t,n,r;t=e.source.itemScope.item.type,e.source.itemScope.$parent.column!=null&&(r=e.source.itemScope.$parent.column,r[t]=!1);if(e.dest.sortableScope.$parent.column!=null)return n=e.dest.sortableScope.$parent.column,n[t]=!0}},t.newColumn=function(){var e;return e=new i({isBacklog:!1,isDone:!1,rank:t.columns.progressColumns.length}),t.columns.progressColumns.push(e),t.projectData.columns.push(e)},t.buttonDisabled=function(){var e,n;return t.columns.backlogColumns?(e=a(),e=_.sortBy(e,"rank"),n=_.sortBy(t.master,"rank"),t.loading||angular.equals(e,n)):!0},t.cancel=function(){if(t.buttonDisabled())return;return t.projectData.columns=angular.copy(t.master),_.each(t.state.startTypes,function(e){return delete e.claimed})},t.saveColumns=function(){var e;if(t.buttonDisabled())return;return t.loading=!0,e=a(),_.each(e,function(e,t){return e.rank=t}),i.bulkUpdate({projectId:n.project._id},e).$promise.then(function(e){return t.master=angular.copy(e),t.projectData.columns=angular.copy(e)})["catch"](function(e){if(e.status===400&&e.data.errors)return _.each(e.data.errors,function(e){var r,i,s;return r=e.column,i=e.field,s=e.message,r=t.projectData.columns[r],r.errors==null&&(r.errors={}),r.errors[i]=s,n.$emit("waffle.alert.danger",""+s)})})["finally"](function(){return t.loading=!1})}}])}.call(this),define("controllers/settings/columns/page",function(){}),function(){var e;angular.module("waffle").controller("SettingsGeneralPageController",["$q","$rootScope","$scope","$state","$window",e=function(){function e(e,t,n,r,i){this.$q=e,this.$rootScope=t,this.$scope=n,this.$state=r,this.$window=i}return e.prototype.deleteProject=function(){var e;return e=this.$scope.project.name,this.$window.confirm("Are you sure you want to delete "+e+"?")?(this.$rootScope.$emit("waffle.alert.processing","Deleting "+e),this.$scope.project.$delete().then(function(t){return function(){return delete t.$rootScope.project,t.$rootScope.$emit("waffle.alert.success","Successfully deleted "+e),t.$state.go("app.home")}}(this))["catch"](function(t){return function(){return t.$rootScope.$emit("waffle.alert.danger","Unable to delete "+e)}}(this))):this.$q.resolve()},e}()])}.call(this),define("controllers/settings/general/page",function(){}),function(){var e;angular.module("waffle").controller("EditGitHubSourceFormController",["$rootScope","$scope","$state","ProjectService","TrackService",e=function(){function e(e,t,n,r,i){this.$rootScope=e,this.$scope=t,this.$state=n,this.ProjectService=r,this.TrackService=i}return e.prototype.cancel=function(){return this.$state.go("app.board.settings.sources")},e.prototype.submit=function(){return this.ProjectService.updateSource({_id:this.$rootScope.project._id,sourceId:this.$scope.source._id,displayName:this.$scope.source.displayName},function(e){return function(t){return e.$rootScope.project=t,e.$state.go("app.board.settings.sources"),e.$rootScope.$emit("waffle.alert.success",(e.$scope.source.displayName||e.$scope.source.repoPath)+" has been updated."),e.TrackService.track("source updated")}}(this),function(e){return function(){var t;return t=_.find(e.$rootScope.project.sources,{_id:e.$scope.source._id}),e.$state.go("app.board.settings.sources"),e.$rootScope.$emit("waffle.alert.danger",(t.displayName||t.repoPath)+" failed to update.")}}(this))},e}()])}.call(this),define("controllers/settings/sources/github/edit/edit-github-source-form-controller",function(){}),function(){var e;angular.module("waffle").controller("SettingsEditSourcePageController",["$rootScope","$scope","$stateParams",e=function(){function e(e,t,n){this.$rootScope=e,this.$scope=t,this.$stateParams=n,this.$scope.source=angular.copy(_.find(this.$rootScope.project.sources,{_id:this.$stateParams.source}))}return e}()])}.call(this),define("controllers/settings/sources/github/edit/page",function(){}),function(){var e;angular.module("waffle").controller("GitHubRepoChooserController",["$scope","$http","$window","$q",e=function(){function e(e,t,n,r){this.$scope=e,this.$http=t,this.$window=n,this.$q=r}return e.prototype.fetchRepos=function(){var e;return((e=this.$scope.provider)!=null?e.$promise:void 0)?this.$scope.provider.$promise.then(function(e){return function(){return e._fetchAllRepos()}}(this)):this._fetchAllRepos()},e.prototype._fetchAllRepos=function(e,t,n){var r;return t==null&&(t=[]),n==null&&(n={}),e==null&&(e=this.$q.defer()),n.page==null&&(n.page=1),r=this.$scope.provider.baseApiUrl+"/user/repos",this.$http({method:"GET",url:r,params:_.extend({access_token:_.find(this.$window.Application.session.user.credentials,{provider:this.$scope.provider._id}).accessToken,per_page:100},n),headers:{Accept:"application/vnd.github.moondragon+json"}}).then(function(r){return function(i){var s;return t=t.concat(i.data),((s=i.headers("link"))!=null?s.indexOf('rel="next"'):void 0)>-1?(++n.page,r._fetchAllRepos(e,t,n)):e.resolve(t)}}(this)),e.promise},e}()])}.call(this),define("controllers/settings/sources/github/new/github-repo-chooser",function(){}),function(){var e;angular.module("waffle").controller("AddGitHubSourcePageController",["$rootScope","$scope","ProviderService","Application","$state","$location","ProjectService","TrackService","ProjectDataService",e=function(){function e(e,t,n,r,i,s,o,u,a){this.$rootScope=e,this.$scope=t,this.$state=i,this.$location=s,this.ProjectService=o,this.TrackService=u,this.ProjectDataService=a,this.$scope.providerName=r.github.provider.baseUrl.split("//").pop(),this.$scope.providerName==="github.com"&&(this.$scope.providerName="GitHub"),n.query().$promise.then(function(e){return function(t){var n,i,s;return e.$scope.providers=_.remove(t,function(e){return e.type.indexOf("github")===0}),i=(s=e.$location.search().provider)!=null?s:r.github.provider._id,n=_.find(e.$scope.providers,{_id:i}),e.setActiveProvider(n),e.$scope.providers.length>1?e.$scope.newProviderTabName="+":e.$scope.newProviderTabName="GitHub:Enterprise"}}(this))}return e.prototype.setActiveProvider=function(e){var t,n;return e=(n=e!=null?e._id:void 0)!=null?n:e,t=null,_.map(this.$scope.providers,function(t){return t.active=t._id===e}),this.$location.search("provider",e)},e.prototype.addSourceForRepo=function(e,t){return this.ProjectService.addSource({_id:this.$rootScope.project._id},{"private":e["private"],repoPath:e.full_name,type:t.type,provider:t._id},function(n){return function(r){return n.$rootScope.project=r,n.ProjectDataService.clearCache(),n.$state.go("app.board.settings.sources"),n.$rootScope.$emit("waffle.alert.success",e.name+" is now connected."),n.TrackService.track("source added",{type:t.type})}}(this),function(t){return function(){return t.$state.go("app.board.settings.sources"),t.$rootScope.$emit("waffle.alert.danger",e.name+" failed to connect.")}}(this))},e}()])}.call(this),define("controllers/settings/sources/github/new/page",function(){}),function(){var e,t=[].slice;angular.module("waffle").controller("SettingsSourcesController",["$scope","Intercom",e=function(){function e(e,n){this.Intercom=n,e.sources=[_.first(e.project.sources)].concat(t.call(_(e.project.sources).tail().sortBy(function(e){var t;return(t=e.displayName)!=null?t:e.repoPath}).value()))}return e.prototype.openIntercom=function(){this.Intercom.showNewMessage("My team would love for you to integrate with: ")},e}()])}.call(this),define("controllers/settings/sources/page",function(){}),function(){var e;angular.module("waffle").controller("ProjectSourceController",["$rootScope","$window","$state","TrackService","ProjectDataService",e=function(){function e(e,t,n,r,i){this.$rootScope=e,this.$window=t,this.$state=n,this.TrackService=r,this.ProjectDataService=i}return e.prototype.editSource=function(e){var t;return t=e.type,t.indexOf("github")===0&&(t="github"),this.$state.go("app.board.settings.edit-"+t+"-source",{source:e._id})},e.prototype.removeSource=function(e){var t;if(!this.$window.confirm("Are you sure you want to delete this? This will remove all cards associated with "+e.repoPath+" from your board."))return;return t=e.repoPath.split("/")[1],this.$rootScope.$emit("waffle.alert.processing","Disconnecting "+t+"..."),this.$rootScope.project.$removeSource({sourceId:e._id}).then(function(e){return function(n){return e.$rootScope.$emit("waffle.alert.success","Successfully disconnected "+t+"."),e.ProjectDataService.clearCache(),e.TrackService.track("source removed")}}(this))["catch"](function(e){return function(){return e.$rootScope.$emit("waffle.alert.danger","Failed to disconnect "+t+".")}}(this))},e}()])}.call(this),define("controllers/settings/sources/project-source",function(){}),function(){angular.module("waffle").controller("SidebarController",["$location","$q","$rootScope","$scope","$state","$window","Application","ft","ProjectService","SessionService","TrackService","UserDataService",function(e,t,n,r,i,s,o,u,a,f,l,c){var h,p;return this.Application=o,h=function(){return r.showBoardActions=i.current.name.indexOf("app.board.home")>-1,r.showSettingsNav=i.current.name.indexOf("settings")>-1,r.showMetricsNav=i.current.name.indexOf("metrics")>-1},p=n.$on("$stateChangeSuccess",h),r.$on("$destroy",p),h(),r.githubBaseUrl=this.Application.github.provider.baseUrl,r.loggedIn?(r.avatarUrl=f.getSessionData().user.github.avatar_url,r.githubUsername=f.getSessionData().user.github.login,c.getUserData().then(function(e){return function(e){return r.userData=e,r.projects=e.projects,r.$watch("project",function(){var e,t;return t=_.findIndex(r.projects,{_id:(e=r.project)!=null?e._id:void 0}),r.projects[t]=r.project})}}(this))):r.login=function(){return l.track("click login from board",{origin:"login button"}),f.login()}}])}.call(this),define("controllers/sidebar",function(){}),function(){var e;angular.module("waffle").controller("SiteController",["$window","$scope","$rootScope","$location","$timeout","SessionService","Intercom",e=function(){function e(e,t,n,r,i,s,o){var u;r.hash()==="error=githubUnresponsive"&&(i(function(){return r.hash(null)}),u=n.$on("alert-drawer-ready",function(){return n.$emit("waffle.alert.danger","We're sorry, GitHub is experiencing problems.")}),t.$on("$destroy",u)),t.intercomIsEnabled=o.isEnabled(),t.showIntercom=function(){return o.showNewMessage()},t.logout=function(){return s.logout().then(function(n){return function(){var n;return delete t.loggedIn,delete t.avatarUrl,delete t.projects,delete t.addCurrentProjectToDropdown,n=r.path().split("/"),n.length>3&&(n=n.splice(0,3)),e.location.href=n.join("/")}}(this))}}return e}()])}.call(this),define("controllers/site",function(){}),function(){angular.module("waffle").directive("waffleAlertDrawer",["$rootScope","$timeout",function(e,t){return{restrict:"E",replace:!0,templateUrl:"alert-drawer.html",scope:{},link:function(n,r,i){var s,o,u;return s=null,o=function(e,r,i){var o;o=(i!=null?i:{}).keepAround,n.type=e,n.message=r,s&&t.cancel(s);if(!o)return s=t(n.dismissAlert,1e4)},n.dismissAlert=function(){return s&&t.cancel(s),s=null,delete n.message},u=[],u.push(e.$on("waffle.alert.success",function(e,t,n){return o("success",t,n)})),u.push(e.$on("waffle.alert.info",function(e,t,n){return o("info",t,n)})),u.push(e.$on("waffle.alert.processing",function(e,t,n){return o("processing",t,n)})),u.push(e.$on("waffle.alert.danger",function(e,t,n){return o("danger",t,n)})),u.push(e.$on("waffle.alert.warning",function(e,t,n){return o("warning",t,n)})),u.push(e.$on("waffle.alert.dismiss",n.dismissAlert)),n.$on("$destroy",_.flowRight.apply(_,u)),e.$emit("alert-drawer-ready")}}}])}.call(this),define("directives/alert-drawer",function(){}),function(){angular.module("waffle").directive("waffleAdminBanner",["SessionService",function(e){return{restrict:"E",replace:!0,template:'<div class="admin-banner bg-danger text-danger" ng-if="adminMessage" ng-bind-html="adminMessage"></div>',scope:{},link:function(t,n,r){if(e.getSessionData().impersonating)return t.adminMessage="You are impersonating <strong>"+e.getUser().github.login+"</strong>. Take actions with care."}}}])}.call(this),define("directives/banners/admin-banner",function(){}),function(){angular.module("waffle").directive("waffleBadgePullRequestBanner",["$rootScope","localStorageService","Application","$modal",function(e,t,n,r){return{controller:"BadgePullRequestBannerController as controller",restrict:"E",replace:!0,templateUrl:"banners/badge-pull-request-banner.html",scope:!0,link:function(i,s,o,u){var a,f;if(n.env==="takeout")return;if(!e.isTeamMember)return;if(_.some((f=e.project)!=null?f.sources:void 0,function(e){return e["private"]}))return;if(t.get("hideBadgeBanner"))return;return i.username=e.username,i.repo=e.repo,a=function(){return r.open({templateUrl:"board/badge-pull-request-modal.html",windowClass:"message-modal"})},u.checkReadmeForBadge().then(function(e){if(e)return;return u.checkForPendingPullRequestFromWaffle().then(function(e){var t,n;t=e.sent,n=e.url;if(!t)return i.showBanner=!0})}),i.sendBadgePullRequest=function(){return e.$emit("waffle.alert.processing","waffle-ironing your pull request"),u.sendBadgePullRequest().then(function(){return e.$emit("waffle.alert.success","pull request sent!"),i.showBanner=!1})["catch"](function(){return a(),e.$emit("waffle.alert.dismiss")})},i.hideBadgeBannerForever=function(){return t.add("hideBadgeBanner",!0),delete i.showBanner}}}}])}.call(this),define("directives/banners/badge-pull-request-banner",function(){}),function(){angular.module("waffle").directive("waffleCreateProjectBanner",["$window",function(e){return{restrict:"E",replace:!0,templateUrl:"banners/create-project-banner.html",link:function(e,t,n){}}}])}.call(this),define("directives/banners/create-project-banner",function(){}),function(){angular.module("waffle").directive("waffleSourceOauthBanner",["$compile","$rootScope","$timeout","localStorageService","SessionService",function(e,t,n,r,i){return{restrict:"E",replace:!0,templateUrl:"banners/oauth-banner.html",transclude:!0,scope:{severity:"=waffleOauthBannerSeverity"},link:function(e,n,s){if(!t.isTeamMember)return;if(!t.project.needsAuthentication)return;if(r.get("hideAuthBanner:"+t.project._id))return;return e.needsAuthentication=t.project.needsAuthentication,e.hideBannerForever=function(){return r.set("hideAuthBanner:"+t.project._id,!0),delete e.needsAuthentication},e.authenticate=function(){return i.login({permission:"private",baseAuthUrl:"/project/"+t.project._id+"/authenticate"})}}}}])}.call(this),define("directives/banners/source-oauth-banner",function(){}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("waffle").directive("waffleWebhookBanner",["$rootScope","$state","localStorageService","SessionService","RepoService",function(t,n,r,i,s){return{restrict:"E",replace:!0,templateUrl:"banners/webhook-banner.html",link:function(o,u,a){var f,l;if(!i.isLoggedIn())return;if(l=i.getUser()._id,e.call(o.project.team,l)<0)return;o.settingsView=n.current.name.indexOf("sources")>-1;if(!o.settingsView&&r.get("hideWebhookBanner:"+t.project._id))return;return f=function(){var e;o.unhookedSources=_.filter((e=o.project)!=null?e.sources:void 0,{hooked:!1});if(!_.isEmpty(o.unhookedSources))return delete o.canCreateHook,s.get({repoPath:o.unhookedSources[0].repoPath}).then(function(e){return o.canCreateHook=e.permissions.admin})},f(),o.hideBannerOnBoard=function(){return r.set("hideWebhookBanner:"+t.project._id,!0),delete o.unhookedSources},o.createHooks=function(){var e;return t.$emit("waffle.alert.processing","Creating webhooks...",{keepAround:!0}),e=o.unhookedSources[0].repoPath,o.project.$update().then(function(n){return o.project=n,f(),_.isEmpty(o.unhookedSources)?t.$emit("waffle.alert.success","Great! Updates from GitHub will now appear in real time"):_.some(o.unhookedSources,{repoPath:e})?t.$emit("waffle.alert.danger","We were unable to create hooks for "+e,{keepAround:!0}):t.$emit("waffle.alert.warning","We made progress, but some repos are still unhooked",{keepAround:!0})})["catch"](function(e){return t.$emit("waffle.alert.danger","Oops! We weren't able to update your project",{keepAround:!0})})}}}}])}.call(this),define("directives/banners/webhook-banner",function(){}),function(){angular.module("waffle").directive("waffleAssigneesDropdownMenu",["$rootScope","AssigneeService","SessionService","$timeout","TrackService",function(e,t,n,r,i){return{restrict:"E",replace:!0,templateUrl:"board/assignees-dropdown-menu.html",scope:{card:"=card"},link:function(r,s,o){var u,a;return u=!1,a=null,s.parent().on("show.bs.dropdown",function(i){var s;a=angular.copy(r.card.githubMetadata.assignees);if(!r.possibleAssignees)return s=e.project.getSourceFromCard(r.card),t.query({sources:[s]}).then(function(e){var t;return t=n.getUser().github.login,r.possibleAssignees=_.sortBy(e,function(e){return e.login.toLowerCase()}),r.possibleAssignees.unshift(_.remove(r.possibleAssignees,{login:t})[0])})}),s.parent().on("shown.bs.dropdown",function(e){var t;t=s.find("input"),t.focus(50);if(u)return;return u=!0,t.bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).keydown(function(n){if(n.keyCode===27){if(t.val())return r.assigneeSearch=null,r.$apply();if(e)return $(e).dropdown("toggle")}}).keypress(function(e){if(e.keyCode===13)return e.preventDefault(),s.find(".waffle-dropdown-menu-list-item.highlight").click()})}),s.parent().on("hide.bs.dropdown",function(t){var n;return delete r.assigneeSearch,_.xorBy(a,r.card.githubMetadata.assignees,"login").length?(n=angular.copy(r.card.githubMetadata.assignees),r.card.githubMetadata.assignee=null,r.card.githubMetadata.assignees=a,r.card.$update().then(function(e){return i.track("successful owner assignment"),r.card.githubMetadata.assignees=angular.copy(a)})["catch"](function(t){return r.card.githubMetadata.assignees=n,e.$emit("waffle.alert.danger","Unable to set assignees for #"+r.card.githubMetadata.number)})):r.$apply()}),r.isActiveAssignee=function(e){return _(a).map("login").includes(e.login)},r.setAssignees=function(e){return e?r.isActiveAssignee(e)?_.remove(a,function(t){return t.login===e.login}):a.push(_.pick(e,["login","avatar_url"])):a=[]}}}}])}.call(this),define("directives/board/assignees-dropdown-menu",function(){}),function(){angular.module("waffle").directive("waffleAssigneesStack",["$rootScope","SessionService",function(e,t){return{replace:!0,restrict:"E",scope:{card:"="},templateUrl:"board/assignees-stack.html",link:function(n,r,i){var s;return s=e.project.getSourceFromCard(n.card),n.hasAccessToken=t.getAccessToken(s)!=null||s.type==="github",n.isTeamMember=e.isTeamMember,n.$watchCollection("card.githubMetadata.assignees",function(e){var r;if(!e)return;n.assignees=_.sortBy(n.card.githubMetadata.assignees,function(e){return e.login.toLowerCase()}),n.shouldCollapse=n.assignees.length>=4,r=t.getUser();if(r&&_.some(n.assignees,{login:r.github.login}))return n.assignees.push(_.remove(n.assignees,{login:r.github.login})[0])})}}}])}.call(this),define("directives/board/assignees-stack",function(){}),function(){angular.module("waffle").directive("waffleBoard",["$document","$rootScope","$window","CardService","FilterService","ProjectDataService",function(e,t,n,r,i,s){return{controller:"BoardController",restrict:"E",replace:!0,templateUrl:"board/board.html",link:function(e,n,r){var o;return e.$on("$destroy",i.clearAll),o=function(n){var r,i,o,u,a,f,l;return l=n.source,o=n.dest,a=_.cloneDeep(l.itemScope.card),f=void 0,r=l.itemScope.card,o.sortableScope.cards.length>1&&(o.index===0?r.rank={above:o.sortableScope.cards[1]._id}:r.rank={below:o.sortableScope.cards[o.index-1]._id},s.getProjectData().then(function(e){return f=e.rankCard({card:r,rank:r.rank})})),l.sortableScope!==o.sortableScope&&(u=o.sortableScope.column,o.sortableScope.endIndex++,i=_(e.board.columns).map("label").compact().map("name").value(),r.githubMetadata.state=u.isDone?"closed":"open",r.githubMetadata.labels=_.filter(r.githubMetadata.labels,function(e){return!_.includes(i,e.name)}),u.label!=null&&r.githubMetadata.labels.push(_.clone(u.label))),t.$emit("card-updated",{card:r,silent:!0}),r.$update()["catch"](function(e){var n;return t.$emit("waffle.alert.danger",(e!=null?(n=e.data)!=null?n.message:void 0:void 0)||"Could not move card #"+r.githubMetadata.number),r.githubMetadata.state=a.githubMetadata.state,r.githubMetadata.labels=a.githubMetadata.labels,o.sortableScope.endIndex--,f!=null?s.getProjectData().then(function(e){return e.rankCard({card:r,index:f}),t.$emit("card-updated",{card:r,silent:!0})}):t.$emit("card-updated",{card:r,silent:!0})})},e.sortableOptions={containment:".board-body",containerPositioning:"relative",dragMove:function(e,t,n){var r,i;if(n){r=$(".as-sortable-placeholder").parents(".column-body")[0],i=e.nowY;if(i<r.offsetTop)return r.scrollTop=r.scrollTop-20;if(i>r.offsetTop+r.offsetHeight-$(".as-sortable-drag").height())return r.scrollTop=r.scrollTop+20}},itemMoved:o,orderChanged:o}}}}])}.call(this),define("directives/board/board",function(){}),function(){angular.module("waffle").directive("waffleCard",["$q","$rootScope","$state","$timeout","$window","ft","SessionService","TrackService",function(e,t,n,r,i,s,o,u){return{controller:"CardController as controller",controllerAs:"controller",replace:!0,require:"^^waffleBoard",restrict:"E",scope:!0,templateUrl:"board/card.html",link:function(a,f,l,c){var h,p,d;return a.$parent.$last&&s("client_timings")&&console.timeEnd(a.column.displayName+" cards rendered"),h=null,t.$on("card-updated",function(e,t){var n,i,s,o;n=t.card,o=t.silent;if(o)return;s=n._id===a.card._id,i=_.some(a.card.pullRequests,{_id:n._id});if(!s&&!i)return;return r.cancel(h),a.card.recentlyChanged=!0,h=r(function(){return delete a.card.recentlyChanged},4e3)}),a.hasEllipsis=function(){var e;e=f.find(".source-name")[0];if(!e)return;return e.offsetWidth<e.scrollWidth},d=t.project.getSourceFromCard(a.card),((p=t.project.sources)!=null?p.length:void 0)>1&&(a.sourceName=d.displayName||d.repoPath),a.hasAccessToken=o.getAccessToken(d)||d.type==="github",a.canUserDragCard=function(){t.loggedIn||t.$emit("waffle.alert.danger","Please login to interact with cards."),t.loggedIn&&!t.isTeamMember&&!t.project.isPhantom&&t.$emit("waffle.alert.danger","Only collaborators can update cards."),t.loggedIn&&t.project.isPhantom&&t.project.createable&&t.$emit("waffle.alert.danger","Please make this repo a Waffle project to move cards.");if(!a.hasAccessToken)return t.$emit("waffle.alert.danger","Please authenticate for this repo.")},a.showDetailModal=function(e){var t,r;if(!a.hasAccessToken)return;return e.metaKey||e.ctrlKey?(i.open((t=a.card.githubMetadata.html_url)!=null?t:a.card.githubMetadata.pull_request.html_url),a.track("clicked card number to go to GitHub from board")):(r="",$(e.currentTarget).is(".js-pull-requests-button")?r=".pulls":$(e.currentTarget).is(".js-comments-button")&&a.track("clicked comment icon on card"),n.go("app.board.home.card"+r,{cardId:a.card._id}))},a.updateCard=function(){return a.card.$update()["catch"](function(n){return t.$emit("waffle.alert.danger","Unable to update issue."),e.reject(n)})},a.track=function(e){return u.track(e)}}}}])}.call(this),define("directives/board/card",function(){}),function(){angular.module("waffle").directive("waffleCardComment",["$rootScope","$window","$timeout","$sce","AssigneeService","SessionService",function(e,t,n,r,i,s){return{restrict:"E",replace:!0,templateUrl:"board/card-comment.html",scope:{card:"=card",item:"=item",onSubmit:"&submit",onDelete:"&delete"},link:function(o,u,a){var f,l,c,h;return o.isTeamMember=e.isTeamMember,f=function(){if(!o.isTeamMember)return;return n(function(){return u.gfmTaskList({markdownContainer:".markdown-container",renderedContainer:".github-markdown",onUpdate:function(e){return u.gfmTaskList("disable"),o.item.body=e,o.onSubmit().then(function(e){return e.body_html=r.trustAsHtml(e.body_html),n(function(){return u.gfmTaskList("enable")})})}})})},o.action=(l=a.action)!=null?l:"commented",o.deletable=a["delete"]!=null,o.userGitHubLogin=(c=s.getSessionData().user)!=null?c.github.login:void 0,h=o.$watch("item.body_html",function(){if(o.item.body_html)return _.isFunction(o.item.body_html.$$unwrapTrustedValue)?h():(o.item.body_html=r.trustAsHtml(o.item.body_html),f())}),o.$watch("item.body",function(){return o.textareaContent=o.item.body}),n(function(){return u.find(".card-item-body textarea").keydown(function(e){e.keyCode===13&&(e.metaKey||e.ctrlKey)&&o.submit();if(e.keyCode===27)return o.textareaContent.indexOf("@")>-1?$("mentio-menu").css("display","none"):u.find("textarea").blur(),e.preventDefault(),e.stopPropagation()}),f()}),o.$watch("item.created_at",function(e){return o.timeSinceAction=t.moment(e).fromNow()}),o.edit=function(){return o.assignees||i.query({sources:e.project.sources}).then(function(e){return e=_.reject(e,{login:o.userGitHubLogin}),e=_.uniqBy(e,"login"),o.assignees=_.map(e,function(e){return{label:e.login}})}),o.editing=!0,n(function(){return u.find(".card-item-body textarea").focus()})},o.reset=function(e){delete o.editing;if(!e)return o.textareaContent=o.item.body},o.submit=function(){return u.find(".submit-button").button("loading"),o.item.body=o.textareaContent,o.onSubmit().then(function(e){return e.body_html=r.trustAsHtml(e.body_html),f(),o.reset(!0)})["catch"](function(){return o.reset()})["finally"](function(){return u.find(".submit-button").button("reset")})},o["delete"]=function(){if(t.confirm("Are you sure you want to delete this?"))return o.onDelete().then(function(){return o.card.githubMetadata.comments--})}}}}])}.call(this),define("directives/board/card-comment",function(){}),function(){angular.module("waffle").directive("waffleCardPrList",["$window","$rootScope","$state","$timeout","Application","BoardPreferencesService",function(e,t,n,r,i,s){return{restrict:"E",replace:!0,templateUrl:"board/card-pr-list.html",scope:{card:"="},link:function(r,o,u){var a;return r.multipleAssigneesOff=i.env==="takeout",r.hasEllipsis=function(){var e;e=o.find(".pr-source")[0];if(!e)return;return e.offsetWidth<e.scrollWidth},r.$watchCollection("card.pullRequests",function(e){var n;if(((n=t.project.sources)!=null?n.length:void 0)>1)return _.each(e,function(e){return function(e){var n,r;return n=t.project.getSourceFromCard(e),e.prSourceName=(r=n.displayName)!=null?r:n.repoPath}}(this));return}),r.expandAllPRs=s.getPrExpanded(),a=t.$on("prExpansionChanged",function(e,t){var n;return r.expandAllPRs=t,r.prClose=!1,n=o.find(".js-expandedPR"),t?n.collapse("show"):n.collapse("hide"),!1}),r.$on("$destroy",a),r.toggleExpandPR=function(t,n){return t.metaKey||t.ctrlKey?e.open(n.githubMetadata.html_url):(o.find(".js-expandedPR").collapse({toggle:!1}).collapse("hide"),$(t.target).parents(".card-pr-list-item").find(".js-expandedPR").collapse("toggle"),r.prClose=!r.prClose),!1},r.showDetailModal=function(t,r){var i;if(!t.metaKey&&!t.ctrlKey)return n.go("app.board.home.card",{cardId:r._id});e.open((i=r.githubMetadata.html_url)!=null?i:r.githubMetadata.pull_request.html_url)}}}}])}.call(this),define("directives/board/card-pr-list",function(){}),function(){angular.module("waffle").directive("waffleColumn",["$rootScope","$timeout","$window","ft","localStorageService","CardService","ProjectDataService",function(e,t,n,r,i,s,o){return{controller:"ColumnController",replace:!0,restrict:"E",scope:!0,templateUrl:"board/column.html",link:function(o,u,a){var f,l,c;return r("client_timings")&&console.time(o.column.displayName+" cards rendered"),o.endIndex=30,o.column.collapsed=i.get("collapsedColumn:"+e.project._id+","+o.column._id)!=null,o.column.isDone&&(o.hideArchiveAlert={value:i.get("hideArchiveAllAlert")!=null}),o.hasEllipsis=function(){var e,t;return o.column.collapsed?!1:(t=u.find(".display-name")[0],e=u.find(".column-header")[0].offsetWidth-118,t.offsetWidth>e)},o.scrollColumn=function(){if(o.endIndex>o.cards.length)return;return o.endIndex=Math.min(o.endIndex+5,o.cards.length)},l=function(){var e,t;return e=$(window).height()-$(".header-nav").outerHeight()-34-(parseInt($(".column-body").css("padding-top")||0)+parseInt($(".column-body").css("padding-bottom")||0)),t=$(".board-body").outerHeight()-$(".columns-ct").outerHeight(),e-=t,u.find(".column-body").height(e)},angular.element(n).bind("resize",function(){return l()}),c=o.$watch("column",function(e){if(e)return l(),c()}),o.toggleCollapseColumn=function(){return o.column.collapsed=!o.column.collapsed,o.column.collapsed?i.set("collapsedColumn:"+e.project._id+","+o.column._id,!0):(i.remove("collapsedColumn:"+e.project._id+","+o.column._id),t(function(){return e.$broadcast("elastic:adjust")}))},o.archiveApproval=function(e){var t;t=e,o.archiveAlert=!1,o.hideArchiveAlert.value&&i.add("hideArchiveAllAlert",!0);if(!t)return;return f()},o.archiveAllCheck=function(){if(!o.column.cards.length)return;return o.hideArchiveAlert.value?f():o.archiveAlert=!0},f=function(){var t;return t=_(o.column.cards).map(function(e){return e.archived=!0,t=_.map(e.pullRequests,function(e){if(e.githubMetadata.state!=="closed")return;return e.archived=!0,_.pick(e,"_id","archived")}),t.push(_.pick(e,"_id","archived")),t}).flatten().compact().uniqBy("_id").value(),s.bulkUpdate(t).then(function(){return e.$emit("card-bulk-update")})["catch"](function(){return e.$emit("waffle.alert.danger","Unable to archive cards")})}}}}])}.call(this),define("directives/board/column",function(){}),function(){angular.module("waffle").directive("waffleCommentForm",["$rootScope","$window","$timeout","$location","AssigneeService","SessionService",function(e,t,n,r,i,s){return{controller:"CommentFormController as controller",restrict:"E",replace:!0,templateUrl:"board/comment-form.html",scope:{card:"=card",comments:"=comments"},link:function(t,r,o,u){var a;return t.loggedIn=e.loggedIn,t.login=function(){return s.login()},t.userGitHubLogin=(a=s.getSessionData().user)!=null?a.github.login:void 0,t.loggedIn&&(t.assignees||i.query({sources:e.project.sources}).then(function(e){return e=_.reject(e,{login:t.userGitHubLogin}),e=_.uniqBy(e,"login"),t.assignees=_.map(e,function(e){return{label:e.login}})})),t.comment=function(){return $(".comment-btn").button("loading"),u.comment().then(function(){return r.find('.tabset li[heading="Write"] a').scope().select()})["catch"](function(){return e.$emit("waffle.alert.danger","Unable to comment on card #"+t.card.githubMetadata.number)})["finally"](function(){return $(".comment-btn").button("reset")})},n(function(){return r.find("textarea").keydown(function(e){e.keyCode===13&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),t.comment());if(e.keyCode===27)return t.form.comment.indexOf("@")>-1?$("mentio-menu").css("display","none"):r.find("textarea").blur(),e.preventDefault(),e.stopPropagation()})})}}}])}.call(this),define("directives/board/comment-form",function(){}),function(){angular.module("waffle").directive("waffleCommentLabel",["$rootScope","SessionService","CollaboratorService","TrackService",function(e,t,n){return{restrict:"E",replace:!0,template:'<span bindonce="commentLabel"><span class="comment-label" bo-if="commentLabel" bo-bind="commentLabel" ng-click="trackClick()"></span></span>',scope:{card:"=card",commentOwner:"=commentOwner"},link:function(t,r,i){var s;s=e.project.getSourceFromCard(t.card);if(!s)return;return t.$watch("commentOwner",function(r){if(r!=null?!r.login:!void 0)return;if(!e.isTeamMember)return;return s.repoPath.indexOf(r.login)===0?t.commentLabel="owner":n.isCollaborator({source:s,username:r.login}).then(function(e){if(e)return t.commentLabel="collaborator"})}),t.trackClick=function(){return TrackService.track("clicked comment label")}}}}])}.call(this),define("directives/board/comment-label",function(){}),function(){angular.module("waffle").directive("waffleDetailModal",["$q","$rootScope","FilterService","ft","ProjectDataService",function(e,t,n,r,i){return{restrict:"E",templateUrl:"board/detail-modal.html",link:function(r,s,o){var u,a;return s.parent(".modal-content").draggable({handle:".drag-modal"}),a=t.project.getSourceFromCard(r.card),((u=t.project.sources)!=null?u.length:void 0)>1&&(r.sourceName=a.displayName||a.repoPath,r.privateSource=a["private"]),r.archiveCard=function(){return r.card.archived=!0,r.card.$update().then(function(){return i.getProjectData()}).then(function(e){return e.removeCard({card:r.card}),_.each(r.card.pullRequests,function(n){return n.archived=!0,n.$update().then(function(){return e.removeCard({card:n})})["catch"](function(){return t.$emit("waffle.alert.danger","unable to archive card  #"+n.githubMetadata.number)})})})["catch"](function(){return t.$emit("waffle.alert.danger","unable to archive card  #"+r.card.githubMetadata.number)}),r.controller.track("clicked archive card from issue detail")},r.updateBody=function(){return r.controller.updateBody()["catch"](function(n){return t.$emit("waffle.alert.danger","Unable to update description for #"+r.card.githubMetadata.number),e.reject()})},r.updateComment=function(n){return r.controller.updateComment(n)["catch"](function(n){return t.$emit("waffle.alert.danger","Unable to update comment for #"+r.card.githubMetadata.number),e.reject()})},r.deleteComment=function(n){return r.controller.deleteComment(n)["catch"](function(n){return function(n){return t.$emit("waffle.alert.danger","Unable to delete comment for #"+r.card.githubMetadata.number),e.reject()}}(this))},r.controller.loadNextPageOfComments(),r.$on("$destroy",n.updateFilterUrl)}}}])}.call(this),define("directives/board/detail-modal",function(){}),function(){angular.module("waffle").directive("waffleLabelDropdownMenu",["LabelService","$rootScope","$timeout",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"board/label-dropdown-menu.html",scope:{card:"="},link:function(r,i,s){var o;return r.labelBackground=function(e,t){var n,i,s;if(r.isActiveLabel(e))return s=parseInt(e.color.slice(0,2),16),i=parseInt(e.color.slice(2,4),16),n=parseInt(e.color.slice(4,6),16),{"background-color":"rgba("+s+", "+i+", "+n+", "+t+")"}},r.isActiveLabel=function(e){return _(r.card.githubMetadata.labels).map("name").includes(e.name)},o=null,r.toggleLabel=function(e){return r.isActiveLabel(e)?_.remove(r.card.githubMetadata.labels,function(t){return t.name===e.name}):r.card.githubMetadata.labels.push(e),r.card.$update()["catch"](function(){return t.$emit("waffle.alert.danger","unable to change labels for #"+r.card.githubMetadata.number),r.card.githubMetadata.labels=angular.copy(o)})},i.parent().on("hide.bs.dropdown",function(e){return delete r.labelSearch,r.$apply()}),i.parent().on("show.bs.dropdown",function(s){var u;return o=angular.copy(r.card.githubMetadata.labels),r.labels||(u=t.project.getSourceFromCard(r.card),e.query({sources:[u]}).then(function(e){return r.labels=e})),n(function(){return i.bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).find("input").focus().keydown(function(e){if(e.keyCode===27)return e.preventDefault(),e.stopPropagation(),$(s.relatedTarget).dropdown("toggle")}).keypress(function(e){if(e.keyCode===13)return i.find(".waffle-dropdown-menu-list-item.highlight").click()})})})}}}])}.call(this),define("directives/board/label-dropdown-menu",function(){}),function(){angular.module("waffle").directive("waffleLabelPillBox",["$rootScope","ProjectDataService",function(e,t){return{restrict:"E",replace:!0,template:'<span\n  ng-repeat="label in displayLabels"\n  class="label-pill"\n  bo-class="lightOrDark(label)"\n  bo-style="{\'background-color\': \'#\'+label.color}"\n  bo-bind="label.name">\n</span>',scope:{labels:"="},link:function(e,n,r){return t.getProjectData().then(function(t){var n;return n=t.columns,e.$watch("labels",function(t){var r;return r=_(n).map("label").compact().map("name").value(),e.displayLabels=_(t).reject(function(e){return _.includes(r,e.name)}).sortBy("name").value()})}),e.lightOrDark=function(e){var t,n,r,i;return i=parseInt(e.color.slice(0,2),16),r=parseInt(e.color.slice(2,4),16),t=parseInt(e.color.slice(4,6),16),n=Math.sqrt(i*i*.241+r*r*.691+t*t*.068),n>130?"light":"dark"}}}}])}.call(this),define("directives/board/label-pill-box",function(){}),function(){angular.module("waffle").directive("waffleMilestoneDropdownMenu",["MilestoneService","$rootScope","$timeout","TrackService",function(e,t,n,r){return{restrict:"E",replace:!0,templateUrl:"board/milestone-dropdown-menu.html",scope:{card:"=card",project:"=project"},link:function(i,s,o){return s.parent().on("hide.bs.dropdown",function(e){return delete i.milestoneSearch,i.$apply()}),s.parent().on("show.bs.dropdown",function(t){return i.milestones||e.query({sources:[_.find(i.project.sources,{_id:i.card.githubMetadata.source})]}).then(function(e){return i.milestones=_.uniqBy(e,"title"),i.loaded=!0}),n(function(){return s.find("input").bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).focus().keydown(function(e){if(e.keyCode===27)return e.preventDefault(),e.stopPropagation(),$(t.relatedTarget).dropdown("toggle")}).keypress(function(e){if(e.keyCode===13)return s.find(".waffle-dropdown-menu-list-item.highlight").click()})})}),i.selectMilestone=function(e){var n,s;if((e!=null?e.number:void 0)===((s=i.card.githubMetadata.milestone)!=null?s.number:void 0))return;return n=angular.copy(i.card.githubMetadata.milestone),i.card.githubMetadata.milestone=e,i.card.$update().then(function(e){return r.track("assigned milestone")})["catch"](function(e){return t.$emit("waffle.alert.danger","unable to set milestone for #"+i.card.githubMetadata.number),i.card.githubMetadata.milestone=n})}}}}])}.call(this),define("directives/board/milestone-dropdown-menu",function(){}),function(){angular.module("waffle").directive("waffleOwnerDropdownMenu",["$rootScope","AssigneeService","SessionService","$timeout","TrackService",function(e,t,n,r,i){return{restrict:"E",replace:!0,templateUrl:"board/owner-dropdown-menu.html",scope:{card:"=card"},link:function(s,o,u){return o.parent().on("hide.bs.dropdown",function(e){return delete s.assigneeSearch,s.$apply()}),o.parent().on("show.bs.dropdown",function(i){var u;return s.assignees||(u=e.project.getSourceFromCard(s.card),t.query({sources:[u]}).then(function(e){var t;return t=n.getSessionData().user.github.login,s.assignees=_.sortBy(e,function(e){return e.login.toLowerCase()}),s.assignees.unshift(_.remove(s.assignees,{login:t})[0])})),r(function(){return o.find(".js-assignee-search").focus(50).bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).keydown(function(e){if(e.keyCode===27)return e.preventDefault(),e.stopPropagation(),$(i.relatedTarget).dropdown("toggle")}).keypress(function(e){if(e.keyCode!==13)return;return o.find(".waffle-dropdown-menu-list-item.highlight").click()})})}),s.setAssignee=function(t){var n,r;if((t!=null?t.login:void 0)===((r=s.card.githubMetadata.assignee)!=null?r.login:void 0))return;return n=angular.copy(s.card.githubMetadata.assignee),s.card.githubMetadata.assignee=t?_.pick(t,["login","avatar_url"]):null,s.card.$update().then(function(e){return i.track("successful owner assignment")})["catch"](function(t){return e.$emit("waffle.alert.danger","unable to set assignee for #"+s.card.githubMetadata.number),s.card.githubMetadata.assignee=n})}}}}])}.call(this),define("directives/board/owner-dropdown-menu",function(){}),function(){angular.module("waffle").directive("waffleSizeDropdownMenu",["$rootScope","TrackService",function(e,t){return{restrict:"E",replace:!0,templateUrl:"board/size-dropdown-menu.html",scope:{card:"=card"},link:function(n){return n.sizes=[1,2,3,5,8,13,20,40,100],n.setSize=function(r){var i;if(r===n.card.size)return;return i=angular.copy(n.card.size),n.card.size=r?r:null,n.card.$update().then(function(e){return t.track("set size")})["catch"](function(t){return e.$emit("waffle.alert.danger","unable to set size for #"+n.card.githubMetadata.number),n.card.size=i})}}}}])}.call(this),define("directives/board/size-dropdown-menu",function(){}),function(){angular.module("waffle").directive("waffleColorPicker",function(){return{restrict:"E",replace:!0,templateUrl:"color-picker.html",scope:{color:"="},link:function(e,t,n){}}})}.call(this),define("directives/color-picker",function(){}),function(){angular.module("waffle").directive("waffleDeleteForm",["$rootScope","$window",function(e,t){return{restrict:"E",replace:!0,templateUrl:"delete-form.html",scope:{onDelete:"&delete",deleteConfirmation:"@"},link:function(e,t,n){return e.$watch("confirmationValue",function(t){return function(t){if(e.deleteConfirmation)return e.deleteConfirmed=(t!=null?t.toLowerCase():void 0)===e.deleteConfirmation.toLowerCase()}}(this)),e.setLoading=function(){t.find("button").button("loading")},e["delete"]=function(){return e.onDelete().then(function(){return t.find("button").button("reset")})}}}}])}.call(this),define("directives/delete-form",function(){}),function(){angular.module("waffle").directive("waffleGithubLabelBackground",["$window","$http","$rootScope","$q","SessionService",function(e,t,n,r,i){return{restrict:"A",scope:{label:"=waffleGithubLabelBackground"},link:function(s,o,u){var a,f;return a=function(){var o;return((o=s.label)!=null?!o.name:!void 0)?r.reject("label must have a name to use waffleGithubLabelBackground"):t.get(e.Application.github.provider.baseApiUrl+"/repos/"+n.username+"/"+n.repo+"/labels/"+s.label.name,{headers:{Accept:"application/vnd.github.v3+json"},params:{access_token:i.getAccessToken()}}).then(function(e){var t;return(t=e.data)!=null?t.color:void 0})},f=s.$watch(u.waffleGithubLabelBackground,function(e){return a().then(function(e){if(e)return o.css("background-color","#"+e),f()})},!0)}}}])}.call(this),define("directives/github-label-background",function(){}),function(){angular.module("waffle").directive("waffleGithubMarkdown",["$rootScope","$http","Application","SessionService",function(e,t,n,r){return{restrict:"AE",scope:!0,link:function(e,i,s){var o,u;i.addClass("github-markdown"),o=function(e){return t({method:"POST",url:n.github.provider.baseApiUrl+"/markdown",headers:{Accept:"application/vnd.github.v3"},params:{access_token:r.getAccessToken()||n.github.accessToken},data:JSON.stringify({text:e,mode:"gfm"})})};if(s.waffleGithubMarkdown)return e.$watch(s.waffleGithubMarkdown,function(e){if(!e){i.html("");return}return o(e).then(function(e){return i.html(e.data)})});u=i.text();if(!u)return;return o(u).then(function(e){return i.html(e.data)})}}}])}.call(this),define("directives/github-markdown",function(){}),function(){angular.module("waffle").directive("waffleProjectChooser",["$rootScope","$state","$timeout","Application","UserDataService","ft",function(e,t,n,r,i,s){return{restrict:"E",replace:!0,templateUrl:"home/project-chooser.html",scope:{},link:function(o,u,a){return o.pin=s("pin"),o.newUser=r.session.isNewUser,i.getUserData().then(function(e){return function(e){return o.userData=e,o.projects=e.projects,o.loaded=!0}}(this)),o.isPinnedProject=function(e){return o.userData.isPinnedProject(e)},o.toggleProjectPin=function(e){return o.userData.toggleProjectPin(e)},o.sortByPin=function(e){return!o.userData.isPinnedProject(e)},o.sortByName=function(e){var t;return(t=e.sources[0].displayName)!=null?t:e.name},n(function(){return u.find(".filter-input").focus()}),o.goToState=function(n,r){var i;return r.loading=!0,i=r.sources[0].repoPath.split("/"),t.go(n,{username:i[0],repo:i[1]})["catch"](function(t){r.loading=!1;if(t.status===404)return e.$emit("waffle.alert.info","Looks like you don't have access to "+r.name+"."),_.remove(o.projects,r)})}}}}])}.call(this),define("directives/home/project-chooser",function(){}),function(){angular.module("waffle").directive("waffleInfiniteScrolling",[function(){return{link:function(e,t,n){var r;return r=n.scrollBuffer||100,t.scroll(function(i){var s,o,u,a;a=t.get(0).scrollHeight,o=t.outerHeight(),u=a-t.scrollTop()-o;if(u<r){s=e.$apply(n.waffleInfiniteScrolling);if(s===!0)return t.off("scroll")}})}}}])}.call(this),define("directives/infinite-scrolling",function(){}),function(){angular.module("waffle").directive("waffleInlineEdit",["$rootScope",function(e){return{restrict:"A",require:"ngModel",scope:{onSubmit:"&waffleInlineEditSubmit",allowEmpty:"=waffleInlineEditAllowEmpty"},link:function(e,t,n,r){var i;return i=e.$watch(function(){return r.$modelValue},function(t,n){return e._originalValue==null&&(e._originalValue=t),i()}),t.blur(function(){if(r.$modelValue===e._originalValue)return;if(r.$modelValue===""&&e.allowEmpty===!1){r.$setViewValue(e._originalValue),r.$render();return}return e.onSubmit().then(function(){return e._originalValue=r.$modelValue})["catch"](function(){return r.$setViewValue(e._originalValue),r.$render()})}).keydown(function(n){n.keyCode===13&&(n.preventDefault(),n.stopPropagation(),t.blur());if(n.keyCode===27)return r.$setViewValue(e._originalValue),r.$render(),e.$apply(),t.blur()})}}}])}.call(this),define("directives/inline-edit",function(){}),function(){angular.module("waffle").directive("waffleLoginForm",["$rootScope","$state","SessionService",function(e,t,n){return{restrict:"E",templateUrl:"login-form.html",replace:!0,scope:{baseAuthUrl:"="},link:function(e,n,r){var i,s;return i=(s=e.baseAuthUrl)!=null?s:"/login/oauth/github",e.authUrl=i+"?"+$.param({"private":r.permission==="private",client_redirect_uri:t.href(t.current)})}}}])}.call(this),define("directives/login-form",function(){}),function(){angular.module("waffle").directive("waffleMilestoneSelect",["$rootScope","MilestoneService","TrackService",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"milestone-select.html",scope:{allMilestones:"=",source:"=",onSelect:"&select"},link:function(r,i,s){var o;return o=!1,r.project=e.project,r.$watch("source",function(){return r.onSelect({$selection:void 0}),r.selectedMilestone="Select Milestone",r.selectedSource=r.source}),r.setMilestone=function(e){var t;return r.onSelect({$selection:e}),r.selectedMilestone=(t=e!=null?e.title:void 0)!=null?t:"Select Milestone"},i.on("hide.bs.dropdown",function(){return i.find(".dropdown-menu").slideUp(100),delete r.milestoneSearch}),i.on("show.bs.dropdown",function(){var e;i.find(".dropdown-menu").slideDown(200);if(!r.milestones||r.sourceId!==((e=r.selectedSource)!=null?e._id:void 0))return t.query({sources:r.selectedSource?[_.find(r.project.sources,{_id:r.selectedSource._id})]:r.project.sources,state:r.allMilestones?"all":void 0}).then(function(e){r.milestones=_.uniqBy(e,"title"),r.loaded=!0;if(r.selectedSource)return r.sourceId=r.selectedSource._id})}),i.on("shown.bs.dropdown",function(e){var t;n.track("open add new milestone select"),t=i.find("input"),t.focus();if(!o)return o=!0,t.bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).keydown(function(n){if(n.keyCode===27){if(t.val())return r.milestoneSearch=null,r.$apply();if(e)return $(e).dropdown("toggle")}}).keypress(function(e){if(e.keyCode===13)return e.preventDefault(),i.find(".dropdown-menu-item.highlight").click()})})}}}])}.call(this),define("directives/milestone-select",function(){}),function(){angular.module("waffle").directive("waffleBurndownGraph",["$rootScope","MetricsService","MetricsFilterService","localStorageService",function(e,t,n,r){return this.MetricsService=t,{restrict:"E",replace:!0,templateUrl:"metrics/burndown-graph.html",controller:"MetricsBurndownController as controller",scope:{},link:function(t,i,s){var o,u,a,f,l,c;return t.showGraph=!1,t.storedCustomDate=r.get("customMetricsDate"),t.hideIdealAlert={value:r.get("hideIdealAlert")},t.dates=[{name:"Last 7 days",start:moment().subtract("days",7).toISOString()},{name:"Last 2 weeks",start:moment().subtract("weeks",2).toISOString()},{name:"Last month",start:moment().subtract("month",1).toISOString()}],t.buildGraph=function(e,n){return t.showGraph?(t.shouldSetCustomDate&&(r.set("customMetricsDate",[e,n]),t.storedCustomDate=[e,n]),t.loaded=!1,u(e,n).then(function(){if(t.burndownGraphData==null)return;return o()})):o()},u=function(n,r){return this.MetricsService.burndown(t.selectedMilestone,n,r).then(function(e){return function(e){return t.burndownGraphData=e}}(this))["catch"](function(t){return function(t){return e.$emit("waffle.alert.danger","Sorry, could not retrieve burndown chart data")}}(this))},t.selectMilestone=function(e){t.selectedMilestone=e,t.hideIdealAlert.value||(t.showIdealAlert=!0),t.idealTooltip=t.noIdeal?"Milestone must have a due date to show the Ideal line on graph":"This line shows the ideal progress to reach the scheduled due date",t.showGraph=t.selectedMilestone!=null,f();if(!t.selectedMilestone)return;return l(),t.buildGraph(t.dp.startDate,t.dp.endDate)},l=function(){var e;return t.dp.startDate=t.selectedMilestone.created_at,t.dp.endDate=(e=t.selectedMilestone.due_on)!=null?e:moment().toDate(),t.shouldSetCustomDate=!1},f=function(){return t.buttonEnabled=t.validDate&&t.selectedMilestone!=null},t.selectDate=function(e){var n;return t.shouldSetCustomDate=!1,e==="custom"?(n=r.get("customMetricsDate"),t.dp.startDate=n[0],t.dp.endDate=n[1]):(t.dp.startDate=e.start,t.dp.endDate=moment().toDate())},t.dismissIdealAlert=function(){t.showIdealAlert=!1;if(t.hideIdealAlert.value)return r.set("hideIdealAlert",!0)},t.$watchCollection("dp",function(e,n){var r,i;if(e.startDate===n.startDate||e.endDate===n.endDate)t.shouldSetCustomDate=!0;return i=e.startDate?moment(new Date(e.startDate),"ddd MMM D YYYY"):void 0,r=e.endDate?moment(new Date(e.endDate),"ddd MMM D YYYY"):void 0,t.validDate=r!=null&&i!=null&&moment(r,"YYYY MM DD").isAfter(i,"YYYY MM DD"),f()}),t.$watch("useSize",function(e,r){if(e==null||t.selectedMilestone==null)return;return n.updateUseSize(e)}),t.$watch("closedType",function(e,r){if(e==null||t.selectedMilestone==null)return;return n.updateIssueTypes(e)}),t.$watch("showGraph",function(e,n){if(e!=null&&!t.showGraph)return o();return}),a=function(e,t,r){var i,s,o,u,a,f,l;return r===e.length-2||r===e.length-1||r===0?!1:(o=(a=e[r-1])!=null?a.cards:void 0,i=(f=e[r+1])!=null?f.cards:void 0,n.useSize?(l=_.sum(_.map(t.cards,"size")),u=_.sum(_.map(o,"size")),s=_.sum(_.map(i,"size")),l===u&&l===s):t.cards.length===o.length&&t.cards.length===i.length)},o=function(){var e,r,i,s,o,u,f;return t.emptyMilestone=!1,u=void 0,t.showGraph?(t.dp.startDate=moment(t.dp.startDate).toISOString(),t.dp.endDate=moment(t.dp.endDate).toISOString(),e=[],f=[],r=angular.copy(t.burndownGraphData.data),i=[],t.closedType==="Closed PRs"&&(s=_.each(r,function(e){return _.remove(e.cards,{pr:!1})})),t.closedType==="Closed Issues"&&(s=_.each(r,function(e){return _.remove(e.cards,{pr:!0})})),t.closedType==="Both"&&(s=r),_.each(s,function(r,o){var u;if(a(s,r,o))return;return f.push(_.sum(_.map(r.cards,"size"))),e.push(r.cards.length),u=moment(r.date,"YYYY MM DD").isSame(t.dp.endDate,"YYYY MM DD")?moment(r.date,"YYYY MM DD").valueOf():moment(r.date,"YYYY MM DD hh").valueOf(),i.push({x:u,y:n.useSize?_.sum(_.map(r.cards,"size")):r.cards.length})}),o=_.map(i,"x"),t.chartData={series:[{name:"actual",data:i}]},moment(t.selectedMilestone.due_on,"YYYY MM DD").valueOf()>moment(t.dp.startDate,"YYYY MM DD").valueOf()?(t.noIdeal=!1,t.chartData.series.unshift({name:"ideal",data:[{x:moment(t.dp.startDate,"YYYY MM DD").valueOf(),y:n.useSize?_.first(f):_.first(e)},{x:moment(t.selectedMilestone.due_on,"YYYY MM DD").valueOf(),y:0}]}),o.unshift(t.chartData.series[0].data[0].x),o.push(t.chartData.series[0].data[1].x),moment(t.dp.endDate,"YYYY MM DD").isBefore(t.selectedMilestone.due_on,"YYYY MM DD")?(o.pop(),o.push(moment(t.dp.endDate,"YYYY MM DD").valueOf()),u=moment(t.dp.endDate,"YYYY MM DD").valueOf(),$(".ct-chart").addClass("clip-graph")):$(".ct-chart").removeClass("clip-graph")):(t.noIdeal=!0,o.push(moment(t.dp.endDate,"YYYY MM DD").valueOf())),t.burndownGraphData.data.length>0||(t.emptyMilestone=!0,t.showIdealAlert=!1,o=[moment(t.dp.startDate,"YYYY MM DD").valueOf()])):(t.chartData={series:[{name:"ideal",data:[{x:moment().subtract("days",7).valueOf(),y:20},{x:moment().valueOf(),y:0}]},{name:"actual",data:[{x:moment().subtract("days",7).valueOf(),y:20},{x:moment().subtract("days",6).valueOf(),y:16},{x:moment().subtract("days",3).valueOf(),y:10},{x:moment().subtract("days",1).valueOf(),y:4}]}]},o=_.map(t.chartData.series[1].data,"x"),o.push(t.chartData.series[0].data[1].x)),t.chartOptions={series:{ideal:{lineSmooth:Chartist.Interpolation.none({fillHoles:!0})},actual:{lineSmooth:Chartist.Interpolation.none({fillHoles:!0}),showArea:!0}},axisY:{low:0,onlyInteger:!0},axisX:{high:u,onlyInteger:!0,ticks:_.uniq(o),type:Chartist.FixedScaleAxis,labelInterpolationFnc:function(e){if(t.showGraph&&moment(e).hours()>0)return;return moment(e).format("MMM D")}}},t.loaded=!0},c=e.$on("filterUpdated",o),t.$on("$destroy",function(){return c(),n.clearAll()})}}}])}.call(this),define("directives/metrics/burndown-graph",function(){}),function(){angular.module("waffle").directive("waffleGraphSnippets",["$state",function(e){return{restrict:"E",replace:!0,templateUrl:"metrics/graph-snippets.html",scope:!0,link:function(t,n,r){return t.username=e.params.username,t.repo=e.params.repo}}}])}.call(this),define("directives/metrics/graph-snippets",function(){}),function(){angular.module("waffle").directive("waffleThroughputGraph",["$rootScope","$window","MetricsFilterService",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"metrics/throughput-graph.html",scope:!0,link:function(r,i,s){var o,u,a,f,l,c,h;return l=$(".graph-container .panel-body"),r.$on("throughputGraphDataFetched",function(){var t;return t=e.$on("filterUpdated",u),r.$on("$destroy",function(){return t(),n.clearAll()}),$(window).resize(function(){return u()}),u()}),u=function(){var e,t;return e=r.controller.getThroughputGraphData().weeks,t=f(e),a(t,h(e))},f=function(e){var t;return t=0,_.each(e,function(e){var r,i;return n.useSize?(r=e["Closed PRs"].concat(e["Closed Issues"]),i=_.reduce(r,function(e,t){var n;return e+=(n=t.size)!=null?n:0},0)):i=e["Closed PRs"].length+e["Closed Issues"].length,t=Math.max(t,i)}),t},h=function(e){return _.map(e,function(e){return{week:e.week,"Closed Issues":c(e,"Closed Issues"),"Closed PRs":c(e,"Closed PRs")}})},c=function(e,t){var r;return r=o(e,t),n.useSize?_.reduce(r,function(e,t){var n;return e+=(n=t.size)!=null?n:0},0):r.length},o=function(e,t){return _.filter(e[t],function(e){return n.issueMatchesFilter(e,t)})},a=function(e,n){if(!n)return;return $(".throughput-graph").empty(),t.WaffleMetrics.ThroughputGraph.build({json:n,el:".throughput-graph",yMax:e,width:l.width(),height:l.height()})}}}}])}.call(this),define("directives/metrics/throughput-graph",function(){}),function(){angular.module("waffle").directive("waffleThroughputGraphFilter",["$rootScope","$state","MetricsFilterService",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"metrics/throughput-graph-filter.html",scope:!0,link:function(e,t,r){return e.closedPRs=!0,e.closedIssues=!0,e.$watch("closedPRs",function(t,r){if(t==null)return;return n.updateIssueType("Closed PRs",e.closedPRs)}),e.$watch("closedIssues",function(t,r){if(t==null)return;return n.updateIssueType("Closed Issues",e.closedIssues)}),e.$watch("useSize",function(e,t){if(e==null)return;return n.updateUseSize(e)})}}}])}.call(this),define("directives/metrics/throughput-graph-filter",function(){}),function(){angular.module("waffle").directive("openLinksInNewTab",[function(){return{restrict:"A",scope:!0,link:function(e,t,n){var r,i;return r=0,i=e.$watch(function(){return t.children().length},function(){return r++,r===2&&i(),t.find("a").attr("target","_blank")})}}}])}.call(this),define("directives/open-links-in-new-tab",function(){}),function(){angular.module("waffle").directive("waffleColumnEditor",["$rootScope","localStorageService",function(e,t){return{restrict:"E",replace:!0,templateUrl:"settings/columns/column-editor.html",scope:{column:"=",columns:"=",selection:"="},link:function(n,r,i){var s;return n.sortableOptions=n.$parent.typeSortableOptions,n.startTypes=[],s=["inProgressStart","nonCollaboratorPrStart","collaboratorPrStart"],_.each(s,function(e){if(!n.column[e])return;e=_.find(n.selection,{type:e});if(!e)return;return e.claimed=!0,n.startTypes.push(e)}),n.hasGitHubLabel=function(){return!n.column.isDone&&!n.column.isBacklog},n.deleteColumn=function(){return t.remove("collapsedColumn:"+e.project._id+","+n.column._id),_(n.columns).pull(n.column).sortBy("rank").forEach(function(e,t){return e.rank=t}),_.each(n.startTypes,function(e){return delete e.claimed}),n.$destroy()}}}}])}.call(this),define("directives/settings/columns/column-editor",function(){}),function(){angular.module("waffle").directive("waffleColumnLabel",["$rootScope","$window","LabelService","TrackService",function(e,t,n,r){return{restrict:"E",replace:!0,templateUrl:"settings/columns/column-label.html",scope:{selection:"="},link:function(i,s,o){var u,a,f;return a=!1,i.colorPicker={hex:"e6e6e6"},i.project=e.project,i.newLabel=!1,i.$watch("selection",function(e){var t,n;return i.labelSelectDropdownTitle=(t=e!=null?e.name:void 0)!=null?t:"Select Label",i.labelSelectDropdownColor=(n=e!=null?e.color:void 0)!=null?n:i.colorPicker.hex}),i.selectLabel=function(e){return i.selection=e},i.isValidLabel=function(){var e;return((e=i.labelSearch)!=null?e.name:void 0)&&i.colorPicker.hex?!_.some(i.labels,function(e){var t;return e.name.toLowerCase()===((t=i.labelSearch)!=null?t.name.toLowerCase():void 0)}):!1},u=function(e){return/^([0-9a-f]{3}|[0-9a-f]{6})$/i.test(e)},i.createLabel=function(t){var o;if(!t)return;if(!u(i.colorPicker.hex)){s.find(".color-picker").addClass("has-error"),i.colorInputError="Must be a valid hex color code",o=i.$watch("colorPicker.hex",function(e){if(!u(e))return;return s.find(".color-picker").removeClass("has-error"),delete i.colorInputError,o()});return}return $(".create-label-btn").button("loading"),r.track("create column label"),t.color=i.colorPicker.hex,n.create({sources:e.project.sources,label:t}).then(function(e){return function(e){return i.selection=t,s.find(".dropdown-menu-toggle").dropdown("toggle")}}(this))["catch"](function(t){return e.$emit("waffle.alert.danger","Unable to create label")})["finally"](function(){return $(".create-label-btn").button("reset")})},s.on("hide.bs.dropdown",function(){return i.colorPicker={hex:"e6e6e6"},i.newLabel=!1,s.find(".dropdown-menu").slideUp(100),delete i.labelSearch}),s.on("show.bs.dropdown",function(){return s.find(".dropdown-menu").slideDown(200),n.query({sources:i.project.sources}).then(function(e){return i.labels=_.uniqBy(e,"name"),i.loaded=!0}),f()}),s.on("shown.bs.dropdown",function(){var e,t;r.track("open column label select"),e=s.find(".filter-input"),e.focus(),t=s.find(".new-label-button");if(!a)return a=!0,e.bind("click",function(e){return e.preventDefault(),e.stopPropagation(),i.newLabel=!1,i.$apply()}).keydown(function(t){if(t.keyCode===27)return e.val()?(i.labelSearch=null,i.$apply()):s.find(".dropdown-menu-toggle").dropdown("toggle")}).keypress(function(e){if(e.keyCode===13)return e.preventDefault(),s.find(".dropdown-menu-item.highlight").click()}),s.find(".new-label-button").bind("click",function(t){return s.find(".new-label-input").focus(),_.isEmpty(i.colorPicker.hex)&&(i.colorPicker.hex="e6e6e6"),s.find(".new-label").keydown(function(t){if(t.keyCode===27)return i.newLabel=!1,i.$apply(),e.focus()})})}),f=function(){return s.find(".dropdown-menu-item-list").css("max-height",function(){return t.innerHeight-500})},angular.element(t).bind("resize",f)}}}])}.call(this),define("directives/settings/columns/column-label",function(){}),function(){angular.module("waffle").directive("waffleBadgeSnippets",["$rootScope","Application",function(e,t){return{restrict:"E",replace:!0,templateUrl:"settings/general/badge-snippets.html",scope:!0,link:function(e,n,r,i){return e.showSnippets=!e.project.sources[0]["private"]&&t.env!=="takeout"}}}])}.call(this),define("directives/settings/general/badge-snippets",function(){}),function(){angular.module("waffle").directive("waffleEditGithubSourceForm",function(){return{restrict:"E",replace:!0,templateUrl:"settings/sources/github/edit/edit-github-source-form.html",controller:"EditGitHubSourceFormController as controller",scope:{source:"=source"},link:function(e,t,n){return t.keydown(function(t){if(t.keyCode===13)return t.preventDefault(),t.stopPropagation(),e.controller.submit()})}}})}.call(this),define("directives/settings/sources/github/edit/edit-github-source-form",function(){}),function(){angular.module("waffle").directive("waffleGithubConnectForm",["$window","$location","SessionService",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"settings/sources/github/new/github-connect-form.html",scope:{provider:"="},link:function(r,i,s){var o,u;return r.origin=e.location.protocol+"//"+e.location.host,r.$parent.providerName=r.provider.baseUrl.split("//").pop(),r.$parent.providerName==="github.com"&&(r.$parent.providerName="GitHub"),o=n.getSessionData().user.credentials,u=_.find(o,{provider:r.provider._id}),r.$parent.hasGithubCredentials=u!=null,r.login=function(n){return e.location=r.provider.baseUrl+"/login/oauth/authorize?"+$.param({client_id:r.provider.clientId,redirect_uri:r.origin+"/github-enterprise-callback/"+r.provider._id+"?"+$.param({client_redirect_uri:t.path()}),scope:n+",read:org,user:email"})}}}}])}.call(this),define("directives/settings/sources/github/new/github-connect-form",function(){}),function(){angular.module("waffle").directive("waffleGithubEnterpriseConnectForm",["$window","$http","$location","ProviderService",function(e,t,n,r){return{restrict:"E",replace:!0,templateUrl:"settings/sources/github/new/github-enterprise-connect-form.html",scope:{provider:"="},link:function(i,s,o,u){return i.origin=e.location.protocol+"//"+e.location.host,i.$watch("provider.baseUrl",function(e){return function(e){if(!e)return;return e[e.length-1]==="/"&&(e=e.slice(0,e.length-1)),t.get("/providers/exists",{params:{url:e},cache:!1}).then(function(e){return i.ipIsValid=e.status===200,i.ipIsInvalid=!i.ipIsValid})["catch"](function(){return i.ipIsInvalid=!0,i.ipIsValid=!1})}}(this)),i.submit=function(){return r.save({type:"github-enterprise",baseUrl:i.provider.baseUrl,clientId:i.provider.clientId,clientSecret:i.provider.clientSecret}).$promise.then(function(t){return function(t){return e.location=t.baseUrl+"/login/oauth/authorize?"+$.param({client_id:t.clientId,redirect_uri:i.origin+"/github-enterprise-callback/"+t._id+"?client_redirect_uri="+n.path()+"%3Fprovider="+t._id,scope:"repo,read:org,user:email"})}}(this))["catch"](function(e){return function(e){return i.invalidClientIdAndSecret=!0}}(this))}}}}])}.call(this),define("directives/settings/sources/github/new/github-enterprise-connect-form",function(){}),function(){angular.module("waffle").directive("waffleGithubRepoChooser",["$rootScope","$timeout",function(e,t){return{restrict:"E",replace:!0,templateUrl:"settings/sources/github/new/github-repo-chooser.html",controller:"GitHubRepoChooserController as controller",scope:{onSubmit:"&submit",excludeSources:"=",provider:"="},link:function(e,n,r,i){return t(function(){return n.find(".filter-input").focus()}),e.selectRepo=function(t){return e.$eval(e.onSubmit({$selection:t,$provider:e.provider}))},e.doesntHaveSource=function(t){return e.excludeSources?!_(e.excludeSources).map("repoPath").invokeMap("toLowerCase").includes(t.full_name.toLowerCase()):!0},i.fetchRepos().then(function(t){return e.repos=t})}}}])}.call(this),define("directives/settings/sources/github/new/github-repo-chooser",function(){}),function(){angular.module("waffle").directive("waffleProjectSource",["ft",function(e){return{restrict:"E",replace:!0,templateUrl:"settings/sources/project-source.html",controller:"ProjectSourceController as controller",scope:{project:"=project",source:"=source"},link:function(e,t,n,r){return e.source.displayName=e.source.displayName===""?void 0:e.source.displayName}}}])}.call(this),define("directives/settings/sources/project-source",function(){}),function(){angular.module("waffle").directive("waffleAddNew",["$window","$rootScope","Application","CardService","KeyboardShortcuts","localStorageService","SessionService","TrackService","ProjectDataService","$timeout",function(e,t,n,r,i,s,o,u,a,f){return{restrict:"E",replace:!0,templateUrl:"sidebar/add-new/add-new.html",scope:{},link:function(l,c,h){var p,d,v;return l.project=t.project,l.loggedIn=t.loggedIn,l.isTeamMember=t.isTeamMember,l.multipleAssigneesOff=n.env==="takeout",l.state={selectedLabels:[],selectedAssignees:[]},l.selectAssignee=function(e){return l.selectedAssignee=e},l.selectMilestone=function(e){return l.selectedMilestone=e},l.createCard=function(){var e,n,i,s,o,h,p;if(!l.title)return;return u.track("opened new issue"),p=(o=l.selectedSource)!=null?o:t.project.sources[0],i=l.state.selectedLabels,e=l.state.selectedAssignees,l.multipleAssigneesOff?s=new r({githubMetadata:{source:p._id,title:l.title,body:l.description,assignee:(h=l.selectedAssignee)!=null?h.login:void 0,milestone:l.selectedMilestone,labels:i}}):s=new r({githubMetadata:{source:p._id,title:l.title,body:l.description,assignees:e,milestone:l.selectedMilestone,labels:i}}),n=c.find(".js-add-new-button"),n.button("loading"),s.$save({username:t.username,repo:t.repo}).then(function(e){return a.getProjectData().then(function(t){return t.addCard({card:e}),delete l.title,delete l.description,l.state.selectedLabels=[],f(function(){return n.addClass("disabled").attr("disabled","disabled")})})})["catch"](function(e){var n,r;return r=e.status,r===410&&(n="Issues are disabled. <a target='_blank' href='"+p.provider.baseUrl+"/"+p.repoPath+"/settings'>Enable on GitHub.</a>"),t.$emit("waffle.alert.danger",n!=null?n:"Unable to create card.")})["finally"](function(){return d.focus(),n.button("reset")})},d=c.find("input.text-input"),l.clearInput=function(){return d.val()?d.focus():(d.blur(),l.expanded=!1,angular.element(".js-board").off("click",p)),l.title=null},v=function(){return c.find(".select .dropdown-menu-item-list").css("max-height",function(){return e.innerHeight-angular.element(".header-nav").outerHeight()*2-c.find(".popover").outerHeight()-c.find(".select").outerHeight()})},angular.element(e).bind("resize",v),l.login=function(){return u.track("click login from board header",{origin:"header login button"}),o.login()},l.signup=function(){return u.track("click signup from board header",{origin:"header signup button"}),o.login()},p=function(){if(!l.loggedIn){u.track("add new clicked before logged in"),t.$emit("waffle.alert.danger","Please login to create issues."),l.$apply();return}if($(".add-new-issue").hasClass("open")){l.expanded=!1,l.$apply(),angular.element(".js-board").off("click",p),v();return}return l.expanded=!0,s.get("showAddCardDetails")&&(l.detailsOpen=!0,l.formExpanded=!0),l.$apply(),d.focus(),angular.element(".js-board").one("click",p),v()},c.find(".header-action-toggle").click(function(t){var n,r;if(!((t!=null?t.metaKey:void 0)||(t!=null?t.ctrlKey:void 0))){p();return}return u.track("Add new button clicked with metaKey"),r=_.find(l.project.sources,{_id:(n=l.selectedSource._id)!=null?n:l.project.sources[0]._id}),e.open(r.provider.baseUrl+"/"+r.repoPath+"/issues/new")}),d.keydown(function(e){if(e.keyCode===27)return l.clearInput(),l.$apply()}),e.key(i.newIssue.keystroke,function(e){return p(),e.preventDefault(),l.$apply()}),l.$on("$destroy",function(){return e.key.unbind(i.newIssue.keystroke)}),c.find("#collapse-details").on("show.bs.collapse",function(){return s.add("showAddCardDetails",!0),l.formExpanded=!0,l.$apply()}),c.find("#collapse-details").on("shown.bs.collapse",function(){return c.find("textarea").focus()}),c.find("#collapse-details").on("hide.bs.collapse",function(){return s.remove("showAddCardDetails"),l.formExpanded=!1,l.$apply()})}}}])}.call(this),define("directives/sidebar/add-new/add-new",function(){}),function(){angular.module("waffle").directive("waffleAssigneesSelect",["$rootScope","AssigneeService","SessionService","TrackService",function(e,t,n,r){return{restrict:"E",replace:!0,templateUrl:"sidebar/add-new/assignees-select.html",scope:{source:"=",selection:"="},link:function(i,s,o){var u;return u=!1,i.project=e.project,i.$watch("source",function(){return i.selection=[],i.selectedAssignee="Select Assignees",i.selectedSource=i.source}),i.isActiveAssignee=function(e){return _.some(i.selection,function(t){return(e!=null?e.login:void 0)===(t!=null?t.login:void 0)})},i.toggleAssignee=function(e){return i.isActiveAssignee(e)?_.remove(i.selection,function(t){return(e!=null?e.login:void 0)===(t!=null?t.login:void 0)}):i.selection.push(_.pick(e,["login","avatar_url"])),i.selectedAssignee=i.selection.length?_.map(i.selection,"login").join(", "):"Select Assignees"},i.clearAssignee=function(){return i.selection=[],i.selectedAssignee="Select Assignees"},s.on("hide.bs.dropdown",function(){return s.find(".dropdown-menu").slideUp(100),delete i.assigneeSearch}),s.on("show.bs.dropdown",function(){s.find(".dropdown-menu").slideDown(200);if(!i.possibleAssignees||i.sourceId!==i.selectedSource._id)return t.query({sources:[_.find(i.project.sources,{_id:i.selectedSource._id})]}).then(function(e){var t;return t=n.getSessionData().user.github.login,i.possibleAssignees=_.sortBy(e,function(e){return e.login.toLowerCase()}),i.possibleAssignees.unshift(_.remove(i.possibleAssignees,{login:t})[0]),i.loaded=!0,i.sourceId=i.selectedSource._id})}),s.on("shown.bs.dropdown",function(e){var t;r.track("open add new assignee select"),t=s.find("input"),t.focus();if(!u)return u=!0,t.bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).keydown(function(n){if(n.keyCode===27){if(t.val())return i.assigneeSearch=null,i.$apply();if(e)return $(e).dropdown("toggle")}}).keypress(function(e){if(e.keyCode===13)return e.preventDefault(),s.find(".dropdown-menu-item.highlight").click()})})}}}])}.call(this),define("directives/sidebar/add-new/assignees-select",function(){}),function(){angular.module("waffle").directive("waffleLabelSelect",["$q","LabelService","ProjectDataService","TrackService",function(e,t,n,r){return{restrict:"E",replace:!0,templateUrl:"sidebar/add-new/label-select.html",scope:{project:"=",selection:"="},link:function(i,s,o){var u;return u=!1,i.$watch("selection",function(){var e;if((e=i.selection)!=null?!e.length:!void 0)return i.labelSelectDropdownTitle="Select Labels"}),i.isActiveLabel=function(e){return _.some(i.selection,function(t){return e===t||(e!=null?e.name:void 0)===(t!=null?t.name:void 0)})},i.toggleLabel=function(e){return i.isActiveLabel(e)?_.remove(i.selection,function(t){return e===t||(e!=null?e.name:void 0)===(t!=null?t.name:void 0)}):i.selection.push(e),i.labelSelectDropdownTitle=i.selection.length?_.map(i.selection,"name").join(", "):"Select Labels"},i.clearLabels=function(){return i.selection=[],i.labelSelectDropdownTitle="Select Labels"},i.labelBackground=function(e,t){var n,r,s;if(i.isActiveLabel(e))return s=parseInt(e.color.slice(0,2),16),r=parseInt(e.color.slice(2,4),16),n=parseInt(e.color.slice(4,6),16),{"background-color":"rgba("+s+", "+r+", "+n+", "+t+")"}},s.on("hide.bs.dropdown",function(){return s.find(".dropdown-menu").slideUp(100),delete i.labelSearch}),s.on("show.bs.dropdown",function(){return s.find(".dropdown-menu").slideDown(200),e.all([n.getProjectData(),t.query({sources:i.project.sources})]).then(function(e){var t,n,r,s;return s=e[0],n=s.columns,r=e[1],t=_(n).map("label").compact().map("name").value(),r=_.uniqBy(r,"name"),i.labels=_.reject(r,function(e){return _.includes(t,e.name)}),i.loaded=!0})}),s.on("shown.bs.dropdown",function(e){var t;r.track("open add new labels select"),t=s.find("input"),t.focus();if(!u)return u=!0,angular.element(".popover").keydown(function(t){if(t.keyCode===27&&e)return $(e).dropdown("toggle")}),t.bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).keydown(function(n){if(n.keyCode===27){if(t.val())return i.labelSearch=null,i.$apply();if(e)return $(e).dropdown("toggle")}}).keypress(function(e){if(e.keyCode===13)return e.preventDefault(),s.find(".dropdown-menu-item.highlight").click()})})}}}])}.call(this),define("directives/sidebar/add-new/label-select",function(){}),function(){angular.module("waffle").directive("waffleOwnerSelect",["$rootScope","AssigneeService","SessionService","TrackService",function(e,t,n,r){return{restrict:"E",replace:!0,templateUrl:"sidebar/add-new/owner-select.html",scope:{source:"=",onSelect:"&select"},link:function(i,s,o){var u;return u=!1,i.project=e.project,i.$watch("source",function(){return i.onSelect({$selection:void 0}),i.selectedAssignee="Select Assignee",i.selectedSource=i.source}),i.setAssignee=function(e){var t;return i.onSelect({$selection:e}),i.selectedAssignee=(t=e!=null?e.login:void 0)!=null?t:"Select Assignee"},s.on("hide.bs.dropdown",function(){return s.find(".dropdown-menu").slideUp(100),delete i.assigneeSearch}),s.on("show.bs.dropdown",function(){s.find(".dropdown-menu").slideDown(200);if(!i.assignees||i.sourceId!==i.selectedSource._id)return t.query({sources:[_.find(i.project.sources,{_id:i.selectedSource._id})]}).then(function(e){var t;return t=n.getSessionData().user.github.login,i.assignees=_.sortBy(e,function(e){return e.login.toLowerCase()}),i.assignees.unshift(_.remove(i.assignees,{login:t})[0]),i.loaded=!0,i.sourceId=i.selectedSource._id})}),s.on("shown.bs.dropdown",function(e){var t;r.track("open add new assignee select"),t=s.find("input"),t.focus();if(!u)return u=!0,t.bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).keydown(function(n){if(n.keyCode===27){if(t.val())return i.assigneeSearch=null,i.$apply();if(e)return $(e).dropdown("toggle")}}).keypress(function(e){if(e.keyCode===13)return e.preventDefault(),s.find(".dropdown-menu-item.highlight").click()})})}}}])}.call(this),define("directives/sidebar/add-new/owner-select",function(){}),function(){angular.module("waffle").directive("waffleSourceSelect",["$rootScope","TrackService","localStorageService",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"sidebar/add-new/source-select.html",scope:{},link:function(r,i,s){var o,u;return r.selectSource=function(e){var t;return n.set("defaultSelectSource:"+r.project.name,e._id),r.$parent.selectedSource=e,r.selectedSource=(t=e.displayName)!=null?t:e.repoPath},r.project=e.project,u=!1,o=_.find(r.project.sources,{_id:n.get("defaultSelectSource:"+r.project.name)}),o||(o=r.project.sources[0]),r.selectSource(o),i.on("hide.bs.dropdown",function(){return i.find(".dropdown-menu").slideUp(100),delete r.sourceSearch}),i.on("show.bs.dropdown",function(){return i.find(".dropdown-menu").slideDown(200)}),i.on("shown.bs.dropdown",function(e){var n;t.track("open add new source select"),n=i.find("input"),n.focus();if(!u)return u=!0,n.bind("click",function(e){return e.preventDefault(),e.stopPropagation()}).keydown(function(t){if(t.keyCode===27){if(n.val())return r.sourceSearch=null,r.$apply();if(e)return $(e).dropdown("toggle")}}).keypress(function(e){if(e.keyCode===13)return e.preventDefault(),i.find(".dropdown-menu-item.highlight").click()})})}}}])}.call(this),define("directives/sidebar/add-new/source-select",function(){}),function(){angular.module("waffle").directive("waffleFilter",["$rootScope","$window","$timeout","KeyboardShortcuts","BoardPreferencesService","FilterService","SearchFilterService","TrackService",function(e,t,n,r,i,s,o,u){return{restrict:"E",replace:!0,templateUrl:"sidebar/filter.html",scope:!0,link:function(e,a,f){var l,c,h,p;return c=a.find(".search-query"),e.search=o.get(),e.debouncedWatch("search",function(e){return function(e){return o.update(e)}}(this),350),t.key(r.filter.keystroke,function(){return l(),e.$apply(),!1}),e.$on("$destroy",function(){return t.key.unbind(r.filter.keystroke)}),e.expandPRs=i.getPrExpanded(),e.toggleExpandAllPRs=function(){return i.togglePrExpansion()},e.clearSearch=function(){var t;return t=c.val(),t!==""?c.focus():(c.blur(),e.expanded=!1,angular.element(".board").off("click",l)),e.search=null},e.clearAllFilters=function(){return s.clearAll(),c.focus(),a.find(".collapse.in").collapse("hide"),e.search=null},h=function(){return $(".filter #accordion ul").css("max-height",function(){return t.innerHeight-250})},angular.element(t).bind("resize",h),l=function(){return $(".header-action-toggle").hasClass("open")?(e.expanded=!1,e.$apply(),angular.element(".board").off("click",l)):(e.expanded=!0,e.$apply(),c.focus(),angular.element(".board").one("click",l)),h()},a.find(".header-action-toggle").click(l),c.keydown(function(t){if(t.keyCode===27)return e.clearSearch(),e.$apply()}),p=null,e.$watch("search",function(e){n.cancel(p);if(!e)return;return p=n(function(){return u.track("filter",{text:e})},1e3)})}}}])}.call(this),define("directives/sidebar/filter",function(){}),function(){angular.module("waffle").directive("waffleLabelFilters",["$rootScope","LabelService","LabelFilterService","LabelExclusionFilterService","TrackService",function(e,t,n,r,i){return{restrict:"E",replace:!0,templateUrl:"sidebar/label-filters.html",scope:{project:"="},link:function(e,s,o){var u,a,f,l;return o.exclude?u=r:u=n,f=!1,e.isActiveLabel=function(e){return u.has(e)},e.toggleLabel=function(e){return u.toggle(e)},e.clearSelection=function(){return u.clear()},a=function(){return t.query({sources:e.project.sources}).then(function(t){return e.labels=_.uniqBy(t,"name"),e.loaded=!0})},l=function(t){var n;n=s.find("input");if(!f)return f=!0,n.keydown(function(r){if(r.keyCode===27){if(n.val())return e.labelSearch=null,e.$apply();if(t)return $(t.target).collapse("toggle")}}).keyup(function(){if(!n.val())return e.labelSearch=null,e.$apply()}).keypress(function(e){if(e.keyCode===13)return s.find(".waffle-filter-list-item.highlight").click()})},s.closest("#collapse-labels").on("hide.bs.collapse",function(t){return delete e.labelSearch}),o.startOpen==="true"?(a(),l()):(s.closest("#collapse-labels").on("show.bs.collapse",a),s.closest("#collapse-labels").on("shown.bs.collapse",function(e){return i.track("open label collapse"),s.find("input").focus(),l(e)}))}}}])}.call(this),define("directives/sidebar/label-filters",function(){}),function(){angular.module("waffle").directive("waffleMilestoneFilters",["$rootScope","MilestoneService","MilestoneFilterService","TrackService",function(e,t,n,r){return{restrict:"E",replace:!0,templateUrl:"sidebar/milestone-filters.html",scope:{project:"="},link:function(e,i,s){var o,u,a;return u=!1,e.isActiveMilestone=function(e){return n.has(e)},e.toggleMilestone=function(e){return n.toggle(e)},e.clearSelection=function(){return n.clear()},o=function(){return t.query({sources:e.project.sources}).then(function(t){return e.milestones=_.uniqBy(t,"title"),e.loaded=!0})},a=function(t){var n;n=i.find("input");if(!u)return u=!0,n.keydown(function(r){if(r.keyCode===27){if(n.val())return e.milestoneSearch=null,e.$apply();if(t)return $(t.target).collapse("toggle")}}).keyup(function(){if(!n.val())return e.milestoneSearch=null,e.$apply()}).keypress(function(e){if(e.keyCode===13)return i.find(".waffle-filter-list-item.highlight").click()})},i.closest("#collapse-milestones").on("hide.bs.collapse",function(t){return delete e.milestoneSearch}),s.startOpen==="true"?(o(),a()):(i.closest("#collapse-milestones").on("show.bs.collapse",o),i.closest("#collapse-milestones").on("shown.bs.collapse",function(e){return r.track("open milestone collapse"),i.find("input").focus(),a(e)}))}}}])}.call(this),define("directives/sidebar/milestone-filters",function(){}),function(){angular.module("waffle").directive("waffleOwnerFilters",["$rootScope","AssigneeService","OwnerFilterService","SessionService","TrackService",function(e,t,n,r,i){return{restrict:"E",replace:!0,templateUrl:"sidebar/owner-filters.html",scope:{project:"=project"},link:function(e,s,o){var u;return e.isActiveOwner=function(e){return n.has(e)},e.toggleOwner=function(e){return n.toggle(e)},e.clearSelection=function(){return n.clear()},u=function(){return t.query({sources:e.project.sources}).then(function(t){var n;return r.isLoggedIn()&&(n=r.getSessionData().user.github.login,t.unshift(_.remove(t,{login:n})[0])),e.assignees=_.uniqBy(t,"login"),e.loaded=!0})},s.closest("#collapse-owners").on("hide.bs.collapse",function(t){return delete e.assigneeSearch}),s.closest("#collapse-owners").on("show.bs.collapse",function(e){return u()}),s.closest("#collapse-owners").on("shown.bs.collapse",function(t){var n;i.track("open assigned collapse"),n=s.find("input"),n.focus();if(!this.previouslyOpened)return this.previouslyOpened=!0,n.keydown(function(r){if(r.keyCode===27)return n.val()?(e.assigneeSearch=null,e.$apply()):$(t.target).collapse("toggle")}).keyup(function(){if(!n.val())return e.assigneeSearch=null,e.$apply()}).keypress(function(e){if(e.keyCode===13)return s.find(".waffle-filter-list-item.highlight").click()})})}}}])}.call(this),define("directives/sidebar/owner-filters",function(){}),function(){angular.module("waffle").directive("wafflePrFilters",["$rootScope","BoardPreferencesService",function(e,t){return{restrict:"E",replace:!0,templateUrl:"sidebar/pr-filters.html",scope:{project:"="},link:function(e,n,r){return e.currentPrView=t.getPrView(),e.isActiveView=function(e){return t.getPrView()===e},e.setPrView=function(e){return t.setPrView(e)},e.views=["PRs only","PRs & Issues","Issues only"]}}}])}.call(this),define("directives/sidebar/pr-filters",function(){}),function(){angular.module("waffle").directive("waffleProjectDropdown",["$window","$rootScope","ft","SessionService","TrackService","Application",function(e,t,n,r,i,s){return{restrict:"E",replace:!0,templateUrl:"sidebar/project-dropdown.html",scope:!0,link:function(t,o,u){var a,f;return t.pin=n("pin"),t.loggedIn&&(a=_.find(r.getSessionData().user.credentials,{provider:s.github.provider._id}),t.publicPermissions=_.includes(a.scope,"public_repo")),t.isPinnedProject=function(e){return t.userData.isPinnedProject(e)},t.toggleProjectPin=function(e){return t.userData.toggleProjectPin(e)},t.sortByPin=function(e){return!t.userData.isPinnedProject(e)},t.sortByName=function(e){var t;return(t=e.sources[0].displayName)!=null?t:e.name},t.upgrade=function(e){return r.login({permission:"private"}),i.track("click add private access",{origin:e})},f=function(){return o.find(".project-dropdown-menu").css("max-height",function(){return e.innerHeight-100})},$(document).ready(function(){return f(),$(e).resize(f)}),o.on("show.bs.dropdown",function(){return o.find(".dropdown-menu").slideDown(200)}),o.on("hide.bs.dropdown",function(){return o.find(".dropdown-menu").slideUp(100)})}}}])}.call(this),define("directives/sidebar/project-dropdown",function(){}),function(){angular.module("waffle").directive("waffleSidebar",["$rootScope","TrackService",function(e,t){return{restrict:"E",replace:!0,templateUrl:"sidebar/sidebar.html",controller:"SidebarController as controller",link:function(n,r){var i;if(!e.project)return;return n.showInvite=n.project.createable==null,i=function(){return r.find(".js-share").hasClass("open")?(n.share=!1,n.$apply(),angular.element("#page").off("click",i)):(n.share=!0,n.$apply(),t.track("clicked share icon",{publicProject:!n.project.hasPrivateSources()}),angular.element("#page").one("click",i))},r.find(".share-btn").click(i),r.find(".js-github-url").click(function(e){return t.track("clicked go to project on github")}),r.find(".js-share").click(function(e){return e.stopPropagation()}),$(document).keyup(function(e){if(e.keyCode===27&&r.find(".js-share").hasClass("open"))return i()})}}}])}.call(this),define("directives/sidebar/sidebar",function(){}),function(){angular.module("waffle").directive("waffleSidebarToggle",["$window","KeyboardShortcuts",function(e,t){return{restrict:"A",link:function(n,r,i){return e.key(t.sidebar.keystroke,function(){return n.toggleMaximized(),n.$apply()}),e.key("esc",function(){if($(".sidebar.navbar").hasClass("maximized"))return n.toggleMaximized(),n.$apply()}),n.$on("$destroy",function(){return e.key.unbind(t.sidebar.keystroke)})}}}])}.call(this),define("directives/sidebar/sidebar-toggle",function(){}),function(){angular.module("waffle").directive("waffleShareForm",["$rootScope","$timeout","$window","Application","zeroclipboard","TrackService",function(e,t,n,r,i,s){return{restrict:"E",templateUrl:"sidebar/share-form.html",replace:!0,link:function(e,o){var u,a,f,l,c,h,p;e.showSocial=!e.project.sources[0]["private"]&&r.env!=="takeout"&&e.project.sources[0].provider.type==="github",c=n.location.protocol+"//"+n.location.host,h=e.project.name,e.url=c+"/"+h+"/join",a=o.find(".url-link-icon"),f=o.find("#js-clipboard-text"),a.click(function(){return f.select()}),f.click(function(){return f.select()}),o.find(".copy-well").click(function(){return e.showSocial?(s.track("copied join link",{project:"public"}),n.Intercom("trackEvent","copied public join link")):(s.track("copied join link",{project:"private"}),n.Intercom("trackEvent","copied private join link"))}),p={text:"I’m%20open%20sourcing%20my%20%23github%20workflow%20with%20@waffleio%20-%20see%20what%20I'm%20working%20on%20at",url:c+"/"+h+"/"},o.find(".twitter-button").click(function(){var e;return e="https://twitter.com/intent/tweet?text="+p.text+"&url="+p.url,n.open(e,"Share with Twitter","width=575,height=430,left=300,top=140,resizable=1"),s.track("clicked share twitter"),n.Intercom("trackEvent","clicked share twitter")}),l=o.find(".js-copy-button"),e.hideCopyButton=i.isFlashUnusable();if(!i.isFlashUnusable())return u=new i(l),u.on("ready",function(e){return u.on("aftercopy",function(e){return l.button("copied"),t(function(){return l.button("reset")},2e3)})}),u.on("error",function(){return e.copyError=!0,u.destroy()})}}}])}.call(this),define("directives/sidebar/share-form",function(){}),function(){angular.module("waffle").directive("waffleSourceFilters",["$rootScope","SourceFilterService","TrackService",function(e,t,n){return{restrict:"E",replace:!0,templateUrl:"sidebar/source-filters.html",scope:{project:"="},link:function(e,r,i){var s,o;return s=!1,e.isActiveSource=function(e){return t.has(e)},e.toggleSource=function(e){return t.toggle(e)},e.clearSelection=function(){return t.clear()},o=function(t){var n;n=r.find("input");if(!s)return s=!0,n.keydown(function(r){if(r.keyCode===27){if(n.val())return e.sourceSearch=null,e.$apply();if(t)return $(t.target).collapse("toggle")}}).keypress(function(e){if(e.keyCode===13)return r.find(".waffle-filter-list-item.highlight").click()})},r.closest("#collapse-sources").on("hide.bs.collapse",function(t){return delete e.sourceSearch}),i.startOpen==="true"?o():r.closest("#collapse-sources").on("shown.bs.collapse",function(e){return n.track("open source collapse"),r.find("input").focus(),o(e)})}}}])}.call(this),define("directives/sidebar/source-filters",function(){}),function(){angular.module("waffle").directive("waffleToggleSwitch",[function(){return{restrict:"E",replace:!0,templateUrl:"toggle-switch.html",scope:{toggleStateSelection:"="},link:function(e,t,n){if(e.toggleStateSelection==null)return t.find("input").prop("checked",!1)}}}])}.call(this),define("directives/toggle-switch",function(){}),function(){angular.module("waffle").config(["$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,n){return e.html5Mode(!0).hashPrefix("!"),n.rule(function(e,t){var n;n=S(t.path()).chompRight("/").s;if(n!==t.path())return n}),n.when("/:username/:repo/settings","/:username/:repo/settings/sources"),n.when("/:username/:repo",["$rootScope","$window","$match","SessionService",function(e,t,n,r){var i;return!e.project||!e.loggedIn?!1:(i=_.find(r.getSessionData().user.credentials,{provider:t.Application.github.provider._id}),e.project.hasPrivateSources()&&!i.scope.match(/\brepo/)?(r.login(),!0):!1)}]),n.when("/:username/:repo/new",["$location","$match","$rootScope","$state","$window","ProjectService","TrackService",function(e,t,n,r,i,s,o){return n.$emit("waffle.alert.dismiss"),n.$emit("waffle.alert.processing","Creating project...",{keepAround:!0}),s.save({name:t.username+"/"+t.repo}).$promise.then(function(t){return n.$emit("waffle.alert.success","Project created"),o.track("new project created",{uri:e.path(),publicProject:!t.hasPrivateSources()}),i.location="/"+t.name})["catch"](function(e){return n.$emit("waffle.alert.danger","Unable to create project: "+e.data,{keepAround:!0})}),!0}]),t.state("app",{templateUrl:"base.html","abstract":!0,controller:["$rootScope","ft","SessionService",function(e,t,n){return e.loggedIn=n.isLoggedIn(),e.ft=t}]}).state("app.home",{url:"/",templateUrl:"home/page.html",controller:"HomePageController as controller",onEnter:["$window","SessionService","$stateParams","TrackService",function(e,t,n,r){return t.isLoggedIn()?document.title="Waffle.io":e.location="/",r.identify()}]}).state("app.board",{"abstract":!0,templateUrl:"board/base.html",url:"/:username/:repo",resolve:{project:["$rootScope","ProjectService","RepoService","$stateParams","$state","Application",function(e,t,n,r,i,s){return t.get({username:r.username,repo:r.repo}).$promise.then(function(e){var t,n,s;return e.name!==r.username+"/"+r.repo&&(t=e.name.split("/"),s=t[0],n=t[1],i.go("app.board.home",{username:s,repo:n})),e})["catch"](function(i){if(i.status===403&&i.data.message)return e.$on("alert-drawer-ready",function(){var t;return t=i.data.message,s.session.user||(t+=" Please log in."),e.$emit("waffle.alert.danger",t,{keepAround:!0})}),new t({name:r.username+"/"+r.repo,team:[],viewers:[],sources:[{type:s.github.provider.type,repoPath:r.username+"/"+r.repo,provider:s.github.provider}],isPhantom:!0});if(i.status!==404){e.$on("alert-drawer-ready",function(){return e.$emit("waffle.alert.danger","uh oh, we couldn't load your project, our waffle iron caught on fire",{keepAround:!0})});return}return n.get({repoPath:r.username+"/"+r.repo}).then(function(e){return new t({name:""+e.full_name,team:[],viewers:[],sources:[{type:s.github.provider.type,repoPath:""+e.full_name,provider:s.github.provider,"private":e["private"]}],createable:e.permissions.push||e.permissions.admin,isPhantom:!0})})})}]},controller:"BoardPageController as controller",onEnter:["$rootScope","$stateParams","TrackService","project",function(e,t,n,r){return e.project=r,document.title=(r.sources[0].displayName||r.name)+" | Waffle.io",n.identify(r)}],onExit:["$rootScope",function(e){return delete e.project,delete e.username,delete e.repo,delete e.isTeamMember}]}).state("app.board.home",{url:"",templateUrl:"board/page.html"}).state("app.board.home.card",{url:"/cards/:cardId",controller:"CardRouteController as controller",resolve:{card:["$stateParams","project","ProjectDataService",function(e,t,n){return n.getProjectData({project:t}).then(function(t){var n;return n=t.cards,_.find(n,{_id:e.cardId})})}]},onEnter:["$stateParams","card","project",function(e,t,n){var r;if(t)return r=_.find(n.sources,{_id:t.githubMetadata.source}),r==null&&(r=n.sources[0]),document.title="#"+t.githubMetadata.number+" · "+(r.displayName||r.repoPath)+" | Waffle.io"}],onExit:["$stateParams","project",function(e,t){return document.title=(t.sources[0].displayName||t.name)+" | Waffle.io"}]}).state("app.board.join",{url:"/join",onEnter:["$state","$stateParams","$location","TrackService",function(e,t,n,r){return r.identify(),r.track("referral",{uri:n.path(),from:"join link"}),e.transitionTo("app.board.home",t)}]}).state("app.board.settings",{url:"/settings",templateUrl:"settings/page.html"}).state("app.board.settings.general",{url:"/general",templateUrl:"settings/general/page.html",controller:"SettingsGeneralPageController as controller"}).state("app.board.settings.sources",{url:"/sources",templateUrl:"settings/sources/page.html",controller:"SettingsSourcesController as controller"}).state("app.board.settings.add-github-source",{url:"/sources/new/github",templateUrl:"/settings/sources/github/new/page.html",controller:"AddGitHubSourcePageController as controller"}).state("app.board.settings.edit-github-source",{url:"/sources/:source/edit",templateUrl:"/settings/sources/github/edit/page.html",controller:"SettingsEditSourcePageController as controller"}).state("app.board.settings.columns",{url:"/columns",templateUrl:"settings/columns/page.html",controller:"SettingsColumnsPageController"}).state("app.board.metrics",{url:"/metrics",templateUrl:"metrics/page.html",controller:"MetricsIndexController as controller"}).state("app.board.metrics.throughput",{url:"/throughput",templateUrl:"metrics/throughput.html",controller:"MetricsThroughputController as controller"}).state("app.board.metrics.burndown",{url:"/burndown",templateUrl:"metrics/burndown.html",controller:"MetricsBurndownController as controller"}).state("app.account",{"abstract":!0,templateUrl:"account/base.html",url:"/account",onEnter:["TrackService",function(e){return document.title="My Account | Waffle.io",e.identify()}]}).state("app.account.home",{url:"",controller:"AccountPageController as controller",templateUrl:"account/page.html"}).state("oauthauthorize",{url:"/login/oauth/authorize",templateUrl:"oauth/authorize.html",controller:"OAuthAuthorizeController as controller",resolve:{OAuthGrant:["$window",function(e){return e.OAuthGrant}]}})}]).run(["$rootScope","$state","SessionService","TrackService","ft","$location",function(e,t,n,r,i,s){return e.$on("$stateChangeStart",function(e,n,r,s,o){if(!i("metrics")){n.name==="app.board.metrics"&&(e.preventDefault(),t.go("app.board.metrics.throughput",r));if(n.name==="app.board.metrics.burndown")return e.preventDefault(),t.go("app.board.metrics.throughput",r)}}),e.$on("$stateChangeSuccess",function(t,n,i,o,u){var a;return a={uri:s.path()},n.name==="app.board.home"&&e.project&&(a.createable=!!e.project.createable,a.isPhantom=!!e.project.isPhantom),r.track("viewed "+n.name+" page",a),e.$emit("waffle.alert.dismiss")})}])}.call(this),define("routes",function(){}),function(){angular.module("waffle").factory("AccountService",["$resource","Application",function(e,t){var n,r;return r=t.waffleApi.provider.baseApiUrl,n=e(r+"/accounts/:_id",{_id:"@_id"},{"delete":{url:"/account",method:"DELETE"}}),n}])}.call(this),define("service/account",function(){}),function(){angular.module("waffle").service("Application",["$window",function(e){return e.Application}])}.call(this),define("service/application",function(){}),function(){angular.module("waffle").factory("ProviderService",["$resource","Application",function(e,t){var n;return n=t.waffleApi.provider.baseApiUrl,e(n+"/providers/:_id",{_id:"@_id"})}])}.call(this),define("service/auth/provider",function(){}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};angular.module("waffle").factory("BoardDataService",["BoardPreferencesService","ft","ProjectDataService",function(t,n,r){var i;return i=function(){function i(t){var r;r=t.cards,this.columns=t.columns,this._getColumnForCard=e(this._getColumnForCard,this),this._connectToAssociations=e(this._connectToAssociations,this),this._addCard=e(this._addCard,this),n("client_timings")&&console.time("BoardDataService#constructor"),this.cards=[],_.each(this.columns,function(e){return e.cards=[]}),_.each(r,function(e){return function(t){return e._addCard({card:t,cards:r})}}(this)),n("client_timings")&&console.timeEnd("BoardDataService#constructor")}return i.createBoard=function(){return r.getProjectData().then(function(e){return function(e){var t,n;return t=e.cards,n=e.columns,new i({cards:t,columns:n})}}(this))},i.prototype.destroy=function(){return _.each(this.columns,function(e){return delete e.cards}),_.each(this.cards,function(e){return delete e.pullRequests})},i.prototype._addCard=function(e){var t,n,r;t=e.card,n=e.cards;if(t.archived)return;if(this._connectToAssociations({card:t,cards:n!=null?n:this.cards}))return;if(!this._isShownByBoardPreferences({card:t}))return;this.cards.push(t),r=this._getColumnForCard({card:t});if(!r)return;return r.cards.push(t)},i.prototype._connectToAssociations=function(e){var t,n,r;return t=e.card,n=e.cards,r=!1,_.each(t.associations,function(e){return function(i){var s;s=_.find(n,{_id:i});if(s){_.some(s.pullRequests,{_id:t._id})||(s.pullRequests==null&&(s.pullRequests=[]),s.pullRequests.push(t));if(t.githubMetadata.state!=="open"||s.githubMetadata.state!=="closed")return r=e._isShownByBoardPreferences({card:s})}}}(this)),r},i.prototype._isShownByBoardPreferences=function(e){var n,r,i,s;n=e.card;if(t.isFiltered()){r=t.getPrView();if(r==="Issues only"&&((i=n.githubMetadata.pull_request)!=null?i.html_url:void 0)!=null)return!1;if(r==="PRs only"&&((s=n.githubMetadata.pull_request)!=null?s.html_url:void 0)==null)return!1}return!0},i.prototype._getColumnForCard=function(e){var t;return t=e.card,_.find(this.columns,function(e){return function(n){var r;return n.isBacklog?t.githubMetadata.state!=="open"?!1:(r=_(e.columns).map("label").compact().map("name").value(),_(t.githubMetadata.labels).map("name").intersection(r).isEmpty()):n.isDone?t.archived?!1:t.githubMetadata.state==="closed":t.githubMetadata.state==="closed"?!1:_(t.githubMetadata.labels).map("name").includes(n.label.name)}}(this))},i}()}])}.call(this),define("service/board-data",function(){}),function(){angular.module("waffle").factory("BoardPreferencesService",["$rootScope","localStorageService",function(e,t){var n;return n=function(){function n(){}return n.togglePrExpansion=function(){return n.prExpansion=!n.prExpansion,t.set("prExpanded:"+e.project._id,n.prExpansion),e.$emit("prExpansionChanged",n.prExpansion)},n.getPrExpanded=function(){return n.prExpansion=t.get("prExpanded:"+e.project._id)==="true"},n.setPrView=function(r){return n._prView=r,n._prView==="PRs & Issues"?t.remove("prView:"+e.project._id):t.set("prView:"+e.project._id,n._prView),e.$emit("boardPreferenceUpdated")},n.getPrView=function(){var r;return r=t.get("prView:"+e.project._id),n._prView=r!=null?r:"PRs & Issues"},n.isFiltered=function(){return n._prView!=="PRs & Issues"},n}()}])}.call(this),define("service/board-preferences",function(){}),function(){var e=[].slice;angular.module("waffle").factory("CardService",["$http","$q","$resource","$rootScope","Application",function(t,n,r,i,s){var o,u;return u=s.waffleApi.provider.baseApiUrl,o=r(u+"/:username/:repo/cards/:_id",{},{update:{method:"PUT",params:{_id:"@_id"}}}),o.prototype.$update=_.wrap(o.prototype.$update,function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],r=angular.copy(this),n.apply(this,t).then(function(e){return _.defaultsDeep(e,r),delete e.rank,e})}),o.bulkUpdate=function(e){return _.isArray(e)?t.patch(u+"/projects/"+i.project._id+"/cards",e):n.reject("must pass an array of cards to bulkUpdate")},o.create=o.save,o}])}.call(this),define("service/card",function(){}),function(){var e=[].slice;angular.module("waffle").factory("ColumnService",["$resource","Application",function(t,n){var r,i;return i=n.waffleApi.provider.baseApiUrl,r=t(i+"/:username/:repo/columns/:_id",{_id:"@_id",username:"@username",repo:"@repo"},{update:{method:"PUT"},bulkUpdate:{method:"PUT",url:i+"/projects/:projectId/columns",isArray:!0}}),r.prototype.$update=_.wrap(r.prototype.$update,function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],r=this.$$hashKey,n.apply(this,t).then(function(e){return function(){return e.$$hashKey=r}}(this))}),r}])}.call(this),define("service/column",function(){}),function(){angular.module("waffle").service("ft",["Application",function(e){return function(t){return e!=null?e.featureToggles[t]:void 0}}])}.call(this),define("service/feature-toggles",function(){}),function(){var e=[].slice;angular.module("waffle").factory("FilterService",["$location","$rootScope","LabelFilterService","SearchFilterService","SourceFilterService","MilestoneFilterService","OwnerFilterService",function(t,n,r,i,s,o,u){var a;return a={isFiltered:function(){return!!(i.isFiltered()||r.isFiltered()||o.isFiltered()||u.isFiltered()||s.isFiltered())},clearAll:function(){return i.clear(),r.clear(),o.clear(),u.clear(),s.clear()},cardMatchesFilter:function(e,t){return this.isFiltered()?this._cardMatchesSearchText(e)&&this._cardMatchesLabels(e,t)&&this._cardMatchesMilestones(e)&&this._cardMatchesOwners(e)&&this._cardMatchesSources(e):!0},updateFilterUrl:function(){return i.updateUrl(),r.updateUrl(),o.updateUrl(),u.updateUrl(),s.updateUrl()},_cardMatchesSearchText:function(e){return i.isFiltered()?i.matches(e):!0},_cardMatchesLabels:function(e,t){var n,i,s,o,u;return r.isFiltered()?(i=(u=t.label)!=null?u.name:void 0,s=_.map(e.githubMetadata.labels,"name"),o=_.flatten(_.map(e.pullRequests,function(e){return _.map(e.githubMetadata.labels,"name")})),_.remove(s,function(e){return e===i}),_.remove(o,function(e){return e===i}),n=_.union(s,o),r.matches(function(e){return _.isUndefined(e)?_.size(s)===0:_.some(n,function(t){return t===(e!=null?e.name:void 0)})})):!0},_cardMatchesMilestones:function(e){return o.isFiltered()?o.matches(function(t){var n;return e.githubMetadata.milestone!=null&&t===void 0?!1:((n=e.githubMetadata.milestone)!=null?n.title:void 0)===(t!=null?t.title:void 0)||_.some(e.pullRequests,function(e){var n;return((n=e.githubMetadata.milestone)!=null?n.title:void 0)===(t!=null?t.title:void 0)})}):!0},_cardMatchesOwners:function(t){var n,r;return u.isFiltered()?(n=_.reduce(t.pullRequests,function(t,n){return t.push.apply(t,[n.githubMetadata.assignee].concat(e.call(n.githubMetadata.assignees))),t},[t.githubMetadata.assignee].concat(e.call(t.githubMetadata.assignees))),r=_(n).map(function(e){return function(e){return e!=null?e.login:void 0}}(this)).uniq().value(),u.matches(function(e){return _.includes(r,e!=null?e.login:void 0)})):!0},_cardMatchesSources:function(e){return s.isFiltered()?s.matches(function(t){return e.githubMetadata.source===(t!=null?t._id:void 0)||_.some(e.pullRequests,function(e){return e.githubMetadata.source===(t!=null?t._id:void 0)})}):!0}},a}])}.call(this),define("service/filter",function(){}),function(){angular.module("waffle").service("CollectionFilterService",["$rootScope",function(e){var t;return t=function(){function t(e){this._collection=e!=null?e:[]}return t.prototype.isFiltered=function(){return!!this._collection.length},t.prototype.add=function(e){return this._collection.push(e),this._handleFilterUpdate()},t.prototype.get=function(){return this._collection},t.prototype.toggle=function(e){return this.has(e)?this.remove(e):this.add(e)},t.prototype.clear=function(e){e==null&&(e=!0);if(!this.isFiltered())return;this._collection=[];if(e)return this._handleFilterUpdate()},t.prototype.matches=function(e){return _.some(this._collection,function(t){return e(t)})},t.prototype._handleFilterUpdate=function(){return this.updateUrl(),e.$emit("filterUpdated")},t}()}])}.call(this),define("service/filters/collection",function(){}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;angular.module("waffle").factory("LabelFilterService",["$rootScope","$location","LabelService","CollectionFilterService",function(t,n,r,i){var s;return s=function(i){function s(){var e;s.__super__.constructor.call(this);if(!n.search().label)return;e=n.search().label.split(","),r.query({sources:t.project.sources}).then(function(t){return function(n){return n=_.uniqBy(n,"name"),_.each(e,function(e){return t.add(_.find(n,{name:e}))})}}(this))}return e(s,i),s.prototype.toggle=function(e){return _.isUndefined(e)?this.has(e)||this.clear(!1):_.pull(this._collection,void 0),s.__super__.toggle.call(this,e)},s.prototype.remove=function(e){return _.remove(this._collection,function(t){return e===t||(e!=null?e.name:void 0)===(t!=null?t.name:void 0)}),this._handleFilterUpdate()},s.prototype.has=function(e){return _.some(this._collection,function(t){return e===t||(e!=null?e.name:void 0)===(t!=null?t.name:void 0)})},s.prototype.matches=function(e){return _.every(this._collection,function(t){return e(t)})},s.prototype.updateUrl=function(){var e,t;return e=_.map(this._collection,function(e){return e?e.name:"unlabeled"}),t=this._collection.length?[e]:null,n.search("label",t)},s}(i),new s}])}.call(this),define("service/filters/label",function(){}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;angular.module("waffle").factory("LabelExclusionFilterService",["$rootScope","$location","LabelService","CollectionFilterService",function(t,n,r,i){var s;return s=function(i){function s(){var e,i;s.__super__.constructor.call(this),i=n.search()["-label"];if(!i)return;e=i.split(","),r.query({sources:t.project.sources}).then(function(t){return function(n){return n=_.uniqBy(n,"name"),_.each(e,function(e){return t.add(_.find(n,{name:e}))})}}(this))}return e(s,i),s.prototype.remove=function(e){return _.remove(this._collection,function(t){return e===t||(e!=null?e.name:void 0)===(t!=null?t.name:void 0)}),this._handleFilterUpdate()},s.prototype.has=function(e){return _.some(this._collection,function(t){return e===t||(e!=null?e.name:void 0)===(t!=null?t.name:void 0)})},s.prototype.updateUrl=function(){var e;return e=this._collection.length?[_.map(this._collection,"name")]:null,n.search("-label",e)},s}(i),new s}])}.call(this),define("service/filters/label-exclusion",function(){}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;angular.module("waffle").factory("MilestoneFilterService",["$rootScope","$location","MilestoneService","CollectionFilterService",function(t,n,r,i){var s;return s=function(i){function s(){var e;s.__super__.constructor.call(this);if(!n.search().milestone)return;e=n.search().milestone.split(","),r.query({sources:t.project.sources}).then(function(t){return function(n){return n=_.uniqBy(n,"title"),_.each(e,function(e){return t.add(_.find(n,{title:e}))})}}(this))}return e(s,i),s.prototype.remove=function(e){return _.remove(this._collection,function(t){return e===t||(e!=null?e.id:void 0)===(t!=null?t.id:void 0)}),this._handleFilterUpdate()},s.prototype.has=function(e){return _.some(this._collection,function(t){return e===t||(e!=null?e.id:void 0)===(t!=null?t.id:void 0)})},s.prototype.updateUrl=function(){var e,t;return e=_.map(this._collection,function(e){return e?e.title:"none"}),t=this._collection.length?[e]:null,n.search("milestone",t)},s}(i),new s}])}.call(this),define("service/filters/milestone",function(){}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;angular.module("waffle").factory("OwnerFilterService",["$rootScope","$location","CollectionFilterService","AssigneeService",function(t,n,r,i){var s;return s=function(r){function s(){var e;s.__super__.constructor.call(this);if(!n.search().assigned)return;e=n.search().assigned.split(","),i.query({sources:t.project.sources}).then(function(t){return function(n){return _.each(e,function(e){return e||scope.toggleOwner(void 0),t.add(_.find(n,{login:e}))})}}(this))}return e(s,r),s.prototype.toggle=function(e){return _.isUndefined(e)?this.has(e)||this.clear(!1):_.pull(this._collection,void 0),s.__super__.toggle.call(this,e)},s.prototype.remove=function(e){return _.remove(this._collection,function(t){return e===t||(e!=null?e.id:void 0)===(t!=null?t.id:void 0)}),this._handleFilterUpdate()},s.prototype.has=function(e){return _.some(this._collection,function(t){return e===t||(e!=null?e.id:void 0)===(t!=null?t.id:void 0)})},s.prototype.matches=function(e){return _.every(this._collection,function(t){return e(t)})},s.prototype.updateUrl=function(){var e,t;return e=_.map(this._collection,function(e){return e?e.login:"unassigned"}),t=this._collection.length?[e]:null,n.search("assigned",t)},s}(r),new s}])}.call(this),define("service/filters/owner",function(){}),function(){angular.module("waffle").factory("SearchFilterService",["$rootScope","$location",function(e,t){var n;return n=function(){function n(){this._searchText=null;if(!t.search().search)return;this._searchText=t.search().search}return n.prototype.isFiltered=function(){return!!this._searchText},n.prototype.get=function(){return this._searchText},n.prototype.update=function(e){return this._searchText=e!=null?e.toLowerCase():void 0,this._handleFilterUpdate()},n.prototype.matches=function(t){var n,r,i,s,o,u;return u=_.find(e.project.sources,function(e){return e._id===t.githubMetadata.source}),n=_.reduce(t.pullRequests,function(e,t){return e.push.apply(e,_.map(t.githubMetadata.assignees,"login")),e},_.map(t.githubMetadata.assignees,"login")),((r=t.githubMetadata.title)!=null?r.toLowerCase().indexOf(this._searchText):void 0)>=0||((i=t.githubMetadata.assignee)!=null?i.login.toLowerCase().indexOf(this._searchText):void 0)>=0||n.join().toLowerCase().indexOf(this._searchText)>=0||((s=t.githubMetadata.number)!=null?s.toString().indexOf(this._searchText):void 0)>=0||e.project.sources.length>1&&(((o=u.displayName)!=null?o.indexOf(this._searchText):void 0)>=0||u.repoPath.split("/")[1].indexOf(this._searchText)>=0)||_.some(t.githubMetadata.labels,function(e){return function(t){return t.name.toLowerCase().indexOf(e._searchText)>=0}}(this))||_.some(t.pullRequests,function(e){return function(t){var n,r;return((n=t.githubMetadata.title)!=null?n.toLowerCase().indexOf(e._searchText):void 0)>=0||((r=t.githubMetadata.number)!=null?r.toString().indexOf(e._searchText):void 0)>=0||_.some(t.githubMetadata.labels,function(t){return t.name.toLowerCase().indexOf(e._searchText)>=0})}}(this))},n.prototype.clear=function(){if(!this.isFiltered())return;return this._searchText=null,this._handleFilterUpdate()},n.prototype.updateUrl=function(){var e;return e=this._searchText||[],t.search("search",e)},n.prototype._handleFilterUpdate=function(){return this.updateUrl(),e.$emit("filterUpdated")},n}(),new n}])}.call(this),define("service/filters/search",function(){}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;angular.module("waffle").factory("SourceFilterService",["$rootScope","$location","CollectionFilterService",function(t,n,r){var i;return i=function(r){function i(){var e;i.__super__.constructor.call(this);if(!n.search().source)return;e=n.search().source.split(","),_.each(e,function(e){return function(n){var r;r=_.find(t.project.sources,{repoPath:n});if(!r)return;return e.add(r)}}(this))}return e(i,r),i.prototype.remove=function(e){return _.remove(this._collection,{_id:e!=null?e._id:void 0}),this._handleFilterUpdate()},i.prototype.has=function(e){return _.some(this._collection,{_id:e!=null?e._id:void 0})},i.prototype.updateUrl=function(){var e;return e=this._collection.length?[_.map(this._collection,"repoPath")]:null,n.search("source",e)},i}(r),new i}])}.call(this),define("service/filters/source",function(){}),function(){angular.module("waffle").factory("AssigneeService",["$window","$http","SessionService","$q","PaginationService","$rootScope",function(e,t,n,r,i,s){var o;return o=function(n,u,a,f){return a==null&&(a=[]),f==null&&(f=r.defer()),t({method:"GET",url:u,params:{per_page:100,access_token:n||e.Application.github.accessToken},headers:{Accept:"application/vnd.github.v3+json"}}).then(function(e){var t;return a=a.concat(e.data),t=i.getNextPageUrl(e),t?o(n,t,a,f):f.resolve(a)})["catch"](function(){return s.$emit("waffle.alert.danger","Unable to fetch users from GitHub"),f.resolve(a)}),f.promise},{query:function(e){var t,i,s;return s=e.sources,t=r.defer(),i=[],i=_.map(s,function(e){var t;return t=n.getAccessToken(e),!t&&e.type!=="github"?r.resolve([]):o(t,e.provider.baseApiUrl+"/repos/"+e.repoPath+"/assignees")}),r.allSettled(i).then(function(e){var n;return n=_.flatten(e),t.resolve(n)}),t.promise}}}])}.call(this),define("service/github/assignee",function(){}),function(){angular.module("waffle").factory("CollaboratorService",["Application","$http","$q","SessionService",function(e,t,n,r){return{isCollaborator:function(i){var s,o,u;return o=i.source,u=i.username,s=r.getAccessToken(o),t({method:"GET",url:o.provider.baseApiUrl+"/repos/"+o.repoPath+"/collaborators/"+u,params:{access_token:s||e.github.accessToken},headers:{Accept:"application/vnd.github.v3+json"}}).then(function(e){return e.status===204})["catch"](function(e){return e.status===404?!1:n.reject(e.data)})}}}])}.call(this),define("service/github/collaborator",function(){}),function(){var e;angular.module("waffle").service("CommentService",["$window","$http","SessionService",e=function(){function e(e,t,n){this.$window=e,this.$http=t,this.SessionService=n}return e.prototype.comment=function(e){var t,n;return t=e.card,n=e.message,this.$http({method:"POST",url:t.githubMetadata.url+"/comments",headers:{Accept:"application/vnd.github.v3.full+json"},params:{access_token:this.SessionService.getAccessToken(t.githubMetadata.source)},data:{body:n}})},e.prototype.update=function(e){var t,n,r;return t=e.card,n=e.comment,r=e.data,this.$http({method:"PATCH",url:n.url,headers:{Accept:"application/vnd.github.v3.full+json"},params:{access_token:this.SessionService.getAccessToken(t.githubMetadata.source)},data:r}).then(function(e){return e.data})},e.prototype["delete"]=function(e){var t,n;return t=e.card,n=e.comment,this.$http({method:"DELETE",url:n.url,headers:{Accept:"application/vnd.github.v3.full+json"},params:{access_token:this.SessionService.getAccessToken(t.githubMetadata.source)}}).then(function(e){return e.data})},e}()])}.call(this),define("service/github/comment",function(){}),function(){angular.module("waffle").factory("IssueService",["$http","$q","$rootScope","Application","SessionService",function(e,t,n,r,i){var s;return s=function(){return r.env!=="takeout"?"application/vnd.github.cerberus-preview.full+json":"application/vnd.github.v3.full+json"},{get:function(o){var u,a,f;return a=o.card,f=n.project.getSourceFromCard(a),u=i.getAccessToken(f),u||r.github.accessToken&&f.provider._id===r.github.provider._id?e({method:"GET",url:a.githubMetadata.url,headers:{Accept:s()},params:{_dc:(new Date).getTime(),access_token:u!=null?u:r.github.accessToken}}).then(function(e){return e.data}):t.resolve([])},update:function(t){var n,r;return n=t.card,r=t.data,e({method:"PATCH",url:n.githubMetadata.url,headers:{Accept:s()},params:{access_token:i.getAccessToken(n.githubMetadata.source)},data:JSON.stringify(r)}).then(function(e){return e.data})}}}])}.call(this),define("service/github/issue",function(){}),function(){angular.module("waffle").factory("LabelService",["$window","$http","SessionService","$q","PaginationService",function(e,t,n,r,i){var s;return s=function(n,o,u,a){return u==null&&(u=[]),a==null&&(a=r.defer()),t({method:"GET",url:o,params:{per_page:100,access_token:n||e.Application.github.accessToken},headers:{Accept:"application/vnd.github.v3+json"}}).then(function(e){var t;return u=u.concat(e.data),t=i.getNextPageUrl(e),t?s(n,t,u,a):a.resolve(u)})["catch"](function(){return a.resolve(u)}),a.promise},{create:function(e){var i,s,o,u;return u=e.sources,s=e.label,i=r.defer(),o=_.map(u,function(e){var i;return i=n.getAccessToken(e),!i&&e.type!=="github"?r.resolve([]):t({method:"POST",url:e.provider.baseApiUrl+"/repos/"+e.repoPath+"/labels",params:{access_token:i},headers:{Accept:"application/vnd.github.v3+json"},data:{name:s.name,color:s.color}})}),r.allSettled(o).then(function(e){return i.resolve(e)})["catch"](function(e){return i.reject(e)}),i.promise},query:function(e){var t,i,o;return o=e.sources,t=r.defer(),i=[],i=_.map(o,function(e){var t;return t=n.getAccessToken(e),!t&&e.type!=="github"?r.resolve([]):s(t,e.provider.baseApiUrl+"/repos/"+e.repoPath+"/labels")}),r.allSettled(i).then(function(e){var n;return n=_.flatten(e),n=_.sortBy(n,function(e){return e.name.toLowerCase()}),t.resolve(n)}),t.promise}}}])}.call(this),define("service/github/label",function(){}),function(){angular.module("waffle").factory("MilestoneService",["$window","$http","$q","SessionService",function(e,t,n,r){return{query:function(i){var s,o,u,a;return u=i.sources,a=i.state,s=n.defer(),o=_.map(u,function(i){var s;return s=r.getAccessToken(i),!s&&i.type!=="github"?n.resolve([]):t({method:"GET",url:i.provider.baseApiUrl+"/repos/"+i.repoPath+"/milestones",params:{state:a,per_page:100,access_token:s!=null?s:e.Application.github.accessToken},headers:{Accept:"application/vnd.github.v3+json"}}).then(function(e){return e.data})["catch"](function(){return[]})}),n.allSettled(o).then(function(e){var t;return t=_.flatten(e),s.resolve(t)}),s.promise}}}])}.call(this),define("service/github/milestone",function(){}),function(){angular.module("waffle").factory("PaginationService",[function(){return{getNextPageUrl:function(e){var t;if(((t=e.headers().link)!=null?t.indexOf('rel="next"'):void 0)>-1)return e.headers().link.split(";")[0].replace(/<(.*)>/,"$1").trim()}}}])}.call(this),define("service/github/pagination",function(){}),function(){var e;angular.module("waffle").service("RepoService",["$http","SessionService","Application",e=function(){function e(e,t,n){this.$http=e,this.SessionService=t,this.Application=n}return e.prototype.get=function(e){var t;return t=e.repoPath,this.$http({method:"GET",url:this.Application.github.provider.baseApiUrl+"/repos/"+t,headers:{Accept:"application/vnd.github.v3.full+json"},params:{access_token:this.SessionService.getAccessToken()||this.Application.github.accessToken}}).then(function(e){return e.data})},e}()])}.call(this),define("service/github/repo",function(){}),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};angular.module("waffle").service("Intercom",["$window",e=function(){function e(e){this.$window=e,this.isEnabled=t(this.isEnabled,this),this.showNewMessage=t(this.showNewMessage,this)}return e.prototype.showNewMessage=function(e){if(!this.isEnabled())return;return this.$window.Intercom("showNewMessage",e)},e.prototype.isEnabled=function(){return this.$window.Intercom!=null},e}()])}.call(this),define("service/intercom",function(){}),function(){angular.module("waffle").constant("KeyboardShortcuts",{newIssue:{keystroke:"i",action:"New Issue"},filter:{keystroke:"/, f",action:"Filter Cards"},reload:{keystroke:"r",action:"Reload Columns and Cards"},sidebar:{keystroke:"command+\\",action:"Toggle Sidebar"},help:{keystroke:"shift+/",action:"See Shortcut Documentation"}})}.call(this),define("service/keyboard-shortcuts",function(){}),function(){angular.module("waffle").factory("MetricsService",["$rootScope","$http","Application",function(e,t,n){var r;return r=n.waffleApi.provider.baseApiUrl,{throughput:function(){return t({method:"GET",url:"/metrics/"+e.username+"/"+e.repo+"/throughput"}).then(function(e){return e.data})},burndown:function(n,i,s){return t({method:"GET",url:r+"/metrics/projects/"+e.project._id+"/burndown",params:{milestone:n.title,start:i,end:s}}).then(function(e){return e.data})}}}])}.call(this),define("service/metrics/metrics",function(){}),function(){angular.module("waffle").factory("MetricsFilterService",["$rootScope","SourceFilterService","MilestoneFilterService","LabelExclusionFilterService",function(e,t,n,r){var i;return i={"Closed PRs":!0,"Closed Issues":!0,useSize:!1,isFiltered:function(){return!this["Closed PRs"]||!this["Closed Issues"]||t.isFiltered()||n.isFiltered()||r.isFiltered()},clearAll:function(){return t.clear(),n.clear(),r.clear(),this["Closed PRs"]=!0,this["Closed Issues"]=!0,this.useSize=!1},updateIssueType:function(e,t){return this[e]=t,this._emitFilterUpdated()},updateIssueTypes:function(e){return this["Closed PRs"]=e==="Closed PRs"||e==="Both",this["Closed Issues"]=e==="Closed Issues"||e==="Both",this._emitFilterUpdated()},updateUseSize:function(e){return this.useSize=e,this._emitFilterUpdated()},issueMatchesFilter:function(e,t){return this.isFiltered()?this[t]?this._issueMatchesSources(e)&&this._issueMatchesMilestone(e)&&this._issueMatchesLabels(e):!1:!0},_issueMatchesLabels:function(e){return r.isFiltered()?!_.some(e.labels,function(e){return r.has(e)}):!0},_issueMatchesMilestone:function(e){return n.isFiltered()?n.matches(function(t){return e.milestone===(t!=null?t.id:void 0)}):!0},_issueMatchesSources:function(e){return t.isFiltered()?t.matches(function(t){return e.source===t.repoPath}):!0},_emitFilterUpdated:function(){return e.$emit("filterUpdated")}},i}])}.call(this),define("service/metrics/metrics-filter",function(){}),function(){var e;angular.module("waffle").service("MongoService",[e=function(){function e(){}return e.prototype.convertObjectIdToDate=function(e){return new Date(parseInt(e.substring(0,8),16)*1e3)},e}()])}.call(this),define("service/mongo",function(){}),function(){angular.module("waffle").factory("ProjectService",["$resource","$rootScope","$http","Application",function(e,t,n,r){var i,s,o;return s=r.waffleApi.provider.baseApiUrl,o=null,i=e(s+"/projects/:username/:repo",{username:"@username",repo:"@repo"},{projectsForUser:{url:s+"/user/projects",params:{syncProjects:function(){if(!r.session.isNewUser||o)return;return o=!0,r.session.isNewUser||void 0}},method:"GET",isArray:!0},addSource:{url:s+"/projects/:_id/sources",method:"POST",params:{_id:"@_id"}},updateSource:{url:s+"/projects/:_id/sources/:sourceId",method:"PUT",params:{_id:"@_id",sourceId:"@sourceId"}},removeSource:{url:s+"/projects/:_id/sources/:sourceId",method:"DELETE",params:{_id:"@_id"}},"delete":{url:s+"/projects/:_id",method:"DELETE",params:{_id:"@_id"}},update:{url:s+"/projects/:_id",method:"PUT",params:{_id:"@_id"}}}),i.get=function(e){var t,r,o;return o=e.username,r=e.repo,t=n.get(s+"/projects/"+o+"/"+r).then(function(e){var t;return t=e.data,new i(t)}),{$promise:t}},i.prototype.hasPrivateSources=function(){return _.some(this.sources,"private")},i.prototype.getPrimarySource=function(){return _.find(this.sources,function(e){return e.provider["default"]&&e.repoPath.toLowerCase()===(t.username+"/"+t.repo).toLowerCase()})},i.prototype.getSourceFromCard=function(e){var t;return t=_.find(this.sources,{_id:e.githubMetadata.source}),t||this.getPrimarySource()},i}])}.call(this),define("service/project",function(){}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};angular.module("waffle").factory("ProjectDataService",["$q","$rootScope","CardService","ColumnService","PusherService",function(t,n,r,i,s){var o;return o=function(){function u(t){this.cards=t.cards,this.columns=t.columns,this.project=t.project,this._columnDeleted=e(this._columnDeleted,this),this._columnUpdated=e(this._columnUpdated,this),this._cardDeleted=e(this._cardDeleted,this),this._determineChange=e(this._determineChange,this),this._cardUpdated=e(this._cardUpdated,this),this._updateCardsAndNotify=e(this._updateCardsAndNotify,this),this._updateCardAndNotify=e(this._updateCardAndNotify,this),this.removeCard=e(this.removeCard,this),this.addCard=e(this.addCard,this),s.subscribeToProjectChannels({project:this.project}),s.bind("card-assigned",this._updateCardAndNotify({action:"assigned"})),s.bind("card-closed",this._updateCardAndNotify({action:"closed"})),s.bind("card-commented",this._updateCardAndNotify({action:"commented on"})),s.bind("card-opened",this._updateCardAndNotify({action:"opened"})),s.bind("card-reopened",this._updateCardAndNotify({action:"reopened"})),s.bind("card-unassigned",this._updateCardAndNotify({action:"unassigned"})),s.bind("card-updated",this._updateCardAndNotify({action:"updated"})),s.bind("card-bulk-update",this._updateCardsAndNotify),s.bind("card-assigned-silent",this._updateCardAndNotify({silent:!0})),s.bind("card-closed-silent",this._updateCardAndNotify({silent:!0})),s.bind("card-commented-silent",this._updateCardAndNotify({silent:!0})),s.bind("card-deleted-silent",this._cardDeleted),s.bind("card-opened-silent",this._updateCardAndNotify({silent:!0})),s.bind("card-reopened-silent",this._updateCardAndNotify({silent:!0})),s.bind("card-unassigned-silent",this._updateCardAndNotify({silent:!0})),s.bind("card-updated-silent",this._updateCardAndNotify({silent:!0})),s.bind("column-created",function(e){return function(t){return e._columnUpdated(t)}}(this)),s.bind("column-deleted",function(e){return function(t){return e._columnDeleted(t)}}(this)),s.bind("column-updated",function(e){return function(t){return e._columnUpdated(t)}}(this))}var o;return o=null,u.getProjectData=function(e){var s,a,f,l,c,h,p;return l=(e!=null?e:{}).project,l==null&&(l=n.project),(o!=null?o.project.name:void 0)===l.name?o:(c=l.name.split("/"),p=c[0],h=c[1],s=r.query({username:p,repo:h}),f=i.query({username:p,repo:h}),a=s.$promise["catch"](function(e){return n.$emit("waffle.alert.danger",e.data),[]}),o=t.all([a,f.$promise]).then(function(e){var t,n;return t=e[0],n=e[1],new u({cards:t,columns:n,project:l})}),o.project=l,o)},u.clearCache=function(){return o=null},u.prototype.addCard=function(e){var t;t=e.card;if(!this._findExistingCard({card:t}))return this.cards.unshift(t),n.$emit("card-updated",{card:t})},u.prototype.removeCard=function(e){var t,r;t=e.card,r=_.remove(this.cards,{_id:t._id});if(r.length)return n.$emit("card-updated",{card:t})},u.prototype.rankCard=function(e){var t,n,r,i,s,o;t=e.card,i=e.rank,r=e.index;if(!t||!i&&r==null)return;n=_.findIndex(this.cards,{_id:t._id}),_.pullAt(this.cards,n);if(r!=null)return this.cards.splice(r,0,t);if(i==="top")this.cards.unshift(t);else if(i==="bottom")this.cards.push(t);else if((i!=null?i.above:void 0)||(i!=null?i.below:void 0)){o=_.findIndex(this.cards,{_id:(s=i.above)!=null?s:i.below});if(o===-1)return this.cards.splice(n,0,t);i.below!=null&&o++,this.cards.splice(o,0,t)}return n},u.prototype._findExistingCard=function(e){var t;return t=e.card,_.find(this.cards,function(e){return function(n){if(e.project.sources.length>1&&n.githubMetadata.source!==t.githubMetadata.source)return;return n.githubMetadata.number===t.githubMetadata.number}}(this))},u.prototype._updateCardAndNotify=function(e){var t,r,i;return r=e!=null?e:{},t=r.action,i=r.silent,function(e){return function(r){var s,o,u;s=(u=e._cardUpdated(r,i))!=null?u:t;if(i||r.card.archived===!0)return;return r.rank&&s==="updated"&&(s="moved"),o="<a href='/"+r.project.name+"/cards/"+r.card._id+"'>"+r.sender.login+" "+s+" #"+r.card.githubMetadata.number+"</a>.",n.$emit("waffle.alert.info",o)}}(this)},u.prototype._updateCardsAndNotify=function(e){var t,r,i;t=e.cards,i=e.sender;if(!_.every(t,{archived:!0}))return;return _.each(t,function(e){return function(t){var n;n=e._findExistingCard({card:t});if(!n)return;return e._updateCard(n,t)}}(this)),_.remove(this.cards,{archived:!0}),r=i.login+" archived closed cards",n.$emit("card-bulk-update"),n.$emit("waffle.alert.info",r)},u.prototype._cardUpdated=function(e,t){var i,s,o,u;return s=e.card,u=e.rank,i=this._findExistingCard({card:s}),i?o=this._updateCard(i,s):(i=new r(s),this.cards.unshift(i)),this.rankCard({card:i,rank:u}),n.$emit("card-updated",{card:i,silent:t}),n.$apply(),o},u.prototype._updateCard=function(e,t){var n,r,i;return i=angular.copy(e),(n=t.githubMetadata).assignee==null&&(n.assignee=null),(r=t.githubMetadata).milestone==null&&(r.milestone=null),_.mergeWith(e,t,function(e,t,n){return n==="githubMetadata"?_.mergeWith(e,t,function(e,t){return t}):t}),this._determineChange(i,e)},u.prototype._determineChange=function(e,t){var n,r,i,s;return r=_(this.columns).map("label").compact().map("name").value(),s=_(e.githubMetadata.labels).map("name").intersection(r).value(),i=_(t.githubMetadata.labels).map("name").intersection(r).value(),_.isEqual(s,i)||(n="moved"),n},u.prototype._cardDeleted=function(e){var t,r;t=e.card,r=_.remove(this.cards,function(e){return e._id===t._id})[0];if(r!=null)return n.$emit("card-updated",{card:r})},u.prototype._columnUpdated=function(e){var t,r,s,o,u;return s=e.column,t=_.find(this.columns,function(e){return e._id===s._id}),t?(r=s.isBacklog!==t.isBacklog||s.isDone!==t.isDone||((o=s.label)!=null?o.name:void 0)!==((u=t.label)!=null?u.name:void 0),_.merge(t,s)):this.columns.push(new i(s)),n.$apply()},u.prototype._columnDeleted=function(e){var t,r;return t=e.column,r=_.remove(this.columns,function(e){return e._id===t._id})[0],n.$apply()},u,u}()}])}.call(this),define("service/project-data",function(){}),function(){var e=[].slice;angular.module("waffle").service("PusherService",["$rootScope","$window","$timeout","Application",function(t,n,r,i){var s;return s=function(){function f(){}var s,o,u,a;return s={},o={},u={authEndpoint:"/pusher/auth",encrypted:!!n.location.protocol.match(/https/),disableStats:!0,enabledTransports:["ws"],auth:{headers:{"csrf-token":i.session.csrfToken}}},i.pusher.poxaHost&&(u.wsHost=i.pusher.poxaHost),i.pusher.poxaPort&&(u.wsPort=i.pusher.poxaPort),a=new n.Pusher(i.pusher.key,u),f.subscribeToProjectChannels=function(e){var n;n=(e!=null?e:{}).project,n==null&&(n=t.project),this.publicChannel!=null&&(a.unsubscribe(this.publicChannel.name),delete this.publicChannel),this.privateChannel!=null&&(a.unsubscribe(this.privateChannel.name),delete this.privateChannel);if(!n||n.isPhantom)return;this.publicChannel=a.subscribe("waffle."+n._id);if(_.some(n.sources,{"private":!0}))return this.privateChannel=a.subscribe("private-waffle."+n._id)},f.bind=function(){var n,i,u,a;return n=1<=arguments.length?e.call(arguments,0):[],i=_.findIndex(n,_.isFunction),n[i]=_.wrap(n[i],function(n){return function(){var i,u,a,f,l;a=arguments[0],i=2<=arguments.length?e.call(arguments,1):[],u=i[0];if(u.partition==null)return a.apply(n,i);s[l=u.sha]==null&&(s[l]=[]),s[u.sha].push(u),r.cancel(o[u.sha]),o[u.sha]=r(function(){return delete s[u.sha],delete o[u.sha],typeof newrelic!="undefined"&&newrelic!==null&&newrelic.noticeError("Missed real time event partition for project: "+t.project._id),console.error("Missed real time event partition for project: "+t.project._id)},5e3);if(s[u.sha].length!==u.total)return;r.cancel(o[u.sha]),f=_(s[u.sha]).sortBy("partition").reduce(function(e,t,n){return e+t.data},""),delete s[u.sha];if(CryptoJS.SHA1(f).toString(CryptoJS.enc.Hex)!==u.sha){typeof newrelic!="undefined"&&newrelic!==null&&newrelic.noticeError("Realtime event could not be parsed for project: "+t.project._id+"."),console.error("Realtime event could not be parsed for project: "+t.project._id+".");return}return a.apply(n,[JSON.parse(f)])}}(this)),(u=this.publicChannel)!=null&&u.bind.apply(u,n),(a=this.privateChannel)!=null?a.bind.apply(a,n):void 0},f}()}])}.call(this),define("service/pusher",function(){}),function(){angular.module("waffle").factory("SessionService",["$rootScope","$http","ProviderService","$compile","$timeout","Application",function(e,t,n,r,i,s){return{getAccessToken:function(t){var n,r,i,o;o=this.getUser();if(!o)return;return _.isString(t)&&(t=_.find(e.project.sources,{_id:t})),r=(i=t!=null?t.provider:void 0)!=null?i:s.github.provider,n=_.find(o.credentials,{provider:r._id}),n!=null?n.accessToken:void 0},getApiAccessToken:function(){var e,t;t=this.getUser();if(!t)return;return e=_.find(t.credentials,{provider:s.waffleApi.provider._id}),e!=null?e.accessToken:void 0},getSessionData:function(){return angular.copy(s.session)},getUser:function(){return this.getSessionData().user},isLoggedIn:function(){var e;return(e=this.getSessionData())!=null?!!e.user:!!void 0},login:function(t){var n,s,o,u;return u=t!=null?t:{},o=u.permission,n=u.baseAuthUrl,o==null&&(o="public"),n!=null?s=r('<waffle-login-form permission="'+o+'" base-auth-url="\''+n+"'\"></waffle-login-form>")(e.$new()):s=r('<waffle-login-form permission="'+o+'"></waffle-login-form>')(e.$new()),angular.element("#js-login-form-container").html(s),i(function(){return s.submit()})},logout:function(){return t.post("/logout",{_csrf:this.getSessionData().csrfToken})}}}])}.call(this),define("service/session",function(){}),function(){var e=[].slice;angular.module("waffle").factory("TrackService",["$window","$location","$http","$q","Application","AccountService","MongoService",function(t,n,r,i,s,o,u){var a,f;return f=t.mixpanel,a=null,{identify:function(e){var t;return a!=null?a.promise:(a=i.defer(),!f||!s.session.user?(a.resolve(),a.promise):(s.session.isNewUser&&(f.user.alias(""+s.session.user._id),f.user.track("new user signup")),o.get({_id:(e!=null?(t=e.account)!=null?t._id:void 0:void 0)||s.session.user.account}).$promise.then(function(t){return function(t){var n,r,i;return s.session.teamMemberAddedToProject&&(f.account.track("team member added to project",{userId:s.session.user._id}),f.user.track("joined team on project",{project:e._id}),r=_.filter(t.projects,function(e){return _.includes(e.team,s.session.user._id)}),r.length===1&&(f.account.track("team member added to account",{userId:s.session.user._id}),f.user.track("joined account",{account:t._id})),delete s.session.teamMemberAddedToProject),i={$name:s.session.user.github.name,$email:s.session.user.github.email,isUser:!0,isAccount:!1,$created:u.convertObjectIdToDate(s.session.user._id)},f.user.identify(s.session.user._id),f.user.people.set(i),f.user.register(i),n={$owner:t.owner,numberOfProjects:t.numberOfProjects,numberOfUsers:t.numberOfUsers,accountType:t.type,isUser:!1,isAccount:!0,$created:u.convertObjectIdToDate(t._id)},f.account.identify(t._id),f.account.people.set(n),f.account.register(n),a.resolve()}}(this))["catch"](function(e){return a.resolve()}),a.promise))},ready:function(e){return a.promise.then(e)},track:function(){var t;t=1<=arguments.length?e.call(arguments,0):[];if(!f)return;return this.ready(function(){f.user.track.apply(f.user,t);if(s.session.user)return f.account.track.apply(f.account,t)})}}}])}.call(this),define("service/track",function(){}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};angular.module("waffle").factory("UserDataService",["$q","$rootScope","ProjectService","UserPreferencesService",function(t,n,r,i){var s;return s=function(){function o(t){this.projects=t.projects,this.preferences=t.preferences,this.isPinnedProject=e(this.isPinnedProject,this),this.toggleProjectPin=e(this.toggleProjectPin,this)}var s;return s=null,o.getUserData=function(){return s!=null?s:s=t.all([r.projectsForUser().$promise,i.get()]).then(function(e){return function(e){var t,n;return n=e[0],t=e[1],new o({projects:n,preferences:t})}}(this))},o.clearCache=function(){return s=null},o.prototype.toggleProjectPin=function(e){var t,r;return t=angular.copy(this.preferences.pinnedProjects),r=this.preferences.pinnedProjects,this.isPinnedProject(e)?_.remove(r,function(t){return t===e._id}):r.push(e._id),i.update({pinnedProjects:r}).then(function(e){return function(t){return _.assign(e.preferences,t)}}(this))["catch"](function(r){return function(){return n.$emit("waffle.alert.danger","Unable to toggle pin on project "+(e.sources[0].displayName||e.name)),r.preferences.pinnedProjects=t}}(this))},o.prototype.isPinnedProject=function(e){return _.includes(this.preferences.pinnedProjects,e!=null?e._id:void 0)},o}()}])}.call(this),define("service/user-data",function(){}),function(){angular.module("waffle").factory("UserPreferencesService",["$http","$q","Application","SessionService",function(e,t,n,r){return{get:function(){return e({method:"GET",url:n.waffleApi.provider.baseApiUrl+"/user/preferences",headers:{Authorization:"Bearer "+r.getApiAccessToken(),Accept:"application/json"}}).then(function(e){return e.data})},update:function(t){return e({method:"PATCH",url:n.waffleApi.provider.baseApiUrl+"/user/preferences",headers:{Authorization:"Bearer "+r.getApiAccessToken(),Accept:"application/json"},data:JSON.stringify(t)}).then(function(e){return e.data})}}}])}.call(this),define("service/user-preferences",function(){}),function(){angular.module("waffle").service("zeroclipboard",["$window",function(e){return e.ZeroClipboard}])}.call(this),define("service/zeroclipboard",function(){}),angular.module("waffle").run(["$templateCache",function(e){"use strict";e.put("account/base.html","<div>\n  <waffle-sidebar></waffle-sidebar>\n  <div class=\"page-sizer no-header\" ng-class=\"{'maximized': isMaximized, 'minimized': !isMaximized}\">\n    <ui-view/>\n  </div>\n</div>\n"),e.put("account/page.html",'<div class="account-page" ng-show="account.$resolved" bindonce>\n  <div class="account-owner-info">\n    <img class="github-user-avatar" bo-src="avatarUrl" />\n    <h1 class="account-owner">{{account.owner}}\'s account</h1>\n    <span class="account-created">\n      <i class="fa fa-clock-o"></i>\n      Joined on {{created}}\n    </span>\n  </div>\n  <div class="tabbed-view">\n    <tabset>\n      <tab class="tab-heading" heading="Overview">\n        <div class="tab-body account-overview">\n          <div class="account-info">\n            <div class="permissions">\n              <p class="permission-status public-permissions" ng-show="publicPermissions">\n                <i class="github-icon github-icon-repo public-icon"></i>\n                <span class="permission-text">\n                  <span class="permission-type">Public</span><br/>\n                  GitHub Permissions\n                </span>\n              </p>\n              <p class="permission-status" ng-hide="publicPermissions">\n                <i class="fa fa-lock private-icon"></i>\n                <span class="permission-text">\n                  <span class="permission-type">Private</span><br/>\n                  GitHub Permissions\n                </span>\n              </p>\n              <a class="add-btn"\n                 ng-show="publicPermissions"\n                 ng-click="upgrade(\'account page\')">\n                 <i class="fa fa-lock private-icon"></i>\n                 Add private permissions\n              </a>\n            </div>\n          </div>\n          <div class="account-plan">\n            <p class="plan-type"><i class="fa fa-credit-card" aria-hidden="true"></i>Free Plan</p>\n            <p class="plan-benefits">Unlimited Projects</p>\n            <p class="plan-benefits">Unlimited Collaborators</p>\n          </div>\n        </div>\n      </tab>\n      <tab class="tab-heading">\n        <tab-heading>\n          Projects\n          <span class="projects-count">{{account.numberOfProjects}}</span>\n        </tab-heading>\n        <div class="tab-body">\n          <input class="form-control filter-input project-list-input" placeholder="Filter projects" ng-model="projectSearch.name" autofocus />\n          <div class="project-list-container">\n            <div bindonce\n                 class="project-list-item"\n                 ng-repeat="project in filteredProjects = (account.projects | filter:projectSearch | orderBy:sortByName)">\n              <div class="project-link" ui-sref="app.board.home({username: project.name.split(\'/\')[0], repo: project.name.split(\'/\')[1]})">\n                <i class="repo-icon" ng-class="project.sources[0].private ? \'fa fa-lock private-icon\' : \'github-icon github-icon-repo public-icon\'"></i>\n                <div class="project-info">\n                  <h4 bo-bind="project.sources[0].displayName || project.name" class="project-name"></h4>\n                </div>\n              </div>\n            </div>\n            <div class="placeholder" ng-show="account.projects.length === 0">You don\'t have any projects yet.</div>\n            <div class="placeholder" ng-show="account.projects.length > 0 && filteredProjects.length === 0">No projects found by that name.</div>\n          </div>\n        </div>\n      </tab>\n      <tab class="tab-heading" heading="Settings">\n        <div class="tab-body">\n          <div class="tab-body-title">\n            <h3>Delete your account</h3>\n            <p>Deleting your account will remove all of your data from Waffle.io, including your projects that might have other team members.</p>\n          </div>\n          <waffle-delete-form delete="controller.deleteAccount()" delete-confirmation="{{account.owner}}\'s account"></waffle-delete-form>\n        </div>\n      </tab>\n    </tabset>\n'),e.put("alert-drawer.html",'<div class="alert-drawer {{type}}" ng-class="{slide: message}">\n    <div class="message">\n        <i class="fa fa-spinner waffle-spin" ng-show="type == \'processing\'"/>\n        <i class="fa fa-check" ng-show="type == \'success\'"/>\n        <i class="fa fa-bolt" ng-show="type == \'info\'"/>\n        <i class="fa fa-exclamation-triangle js-danger" ng-show="type == \'danger\'"/>\n        <i class="fa fa-exclamation-triangle js-warning" ng-show="type == \'warning\'"/>\n        <span ng-bind-html="message"></span>\n    </div>\n    <a class="dismiss" href="#" ng-click="dismissAlert()"></a>\n</div>\n'),e.put("banners/admin-banner.html",'<div>\n  <div ng-if="adminMessage">\n    Admin Banner\n  </div>\n</div>\n'),e.put("banners/badge-pull-request-banner.html",'<div class="waffle-badge-pull-request-banner" ng-show="showBanner">\n  <img ng-src="//badge.waffle.io/{{username}}/{{repo}}.png?label=ready&title=Ready">\n\n  <span class="badge-message">Show everyone what you\'re working on with a badge on your readme.</span>\n\n  <button class="btn btn-default" ng-click="sendBadgePullRequest()">Send Pull Request</button>\n  <button class="btn btn-link banner-dismiss" ng-click="hideBadgeBannerForever()"><i class="fa fa-times"></i>No Thanks</button>\n</div>\n'),e.put("banners/create-project-banner.html",'<div  class="create-project-banner" ng-show="project.createable">\n\n  <span class="message">Like what you see? Create this repo as a project in Waffle to get started.</span>\n\n  <a class="btn btn-default" ng-href="/{{project.name}}/new">Let\'s go!</a>\n  <a class="btn btn-link" href="https://github.com/waffleio/waffle.io/wiki/FAQs#what-happens-create-project" target="_blank">What happens when I click this button?</a>\n</div>\n'),e.put("banners/oauth-banner.html",'<div class="waffle-oauth-banner bg-{{severity}}" ng-show="needsAuthentication">\n\n  <i class="fa fa-exclamation-triangle text-{{severity}} banner-icon"></i>\n  <span class="message text-{{severity}}" ng-transclude></span>\n\n  <button class="btn btn-default" ng-click="authenticate()">Authenticate</button>\n  <button class="btn btn-link banner-dismiss" ng-click="hideBannerForever()"><i class="fa fa-times"></i>Don&#39;t ask again</button>\n</div>\n'),e.put("banners/webhook-banner.html",'<div class="waffle-webhook-banner bg-danger" ng-show="unhookedSources">\n\n  <i class="fa fa-exclamation-triangle text-danger banner-icon"></i>\n  <span class="message text-danger">Uh oh! Waffle needs an admin of {{unhookedSources[0].repoPath}} to configure webhooks, to enable real time updates from GitHub.</span>\n\n  <div class="webhook-banner-tooltip-wrapper"\n       tooltip="Only an admin can create the webhook, sorry!"\n       tooltip-placement="top"\n       tooltip-enable="!canCreateHook">\n    <button class="btn btn-default" ng-click="createHooks()" ng-disabled="!canCreateHook" >Create Hooks</button>\n  </div>\n  <div class="webhook-banner-tooltip-wrapper hide-link"\n       ng-hide="settingsView"\n       tooltip="Banner will only show on Sources page in Settings"\n       tooltip-placement="top">\n    <button class="btn btn-link banner-dismiss" ng-click="hideBannerOnBoard()"><i class="fa fa-times"></i>Don&#39;t show again</button>\n  </div>\n</div>\n'),e.put("base.html","<div>\n  <div ui-view></div>\n  <waffle-alert-drawer></waffle-alert-drawer>\n  <waffle-admin-banner></waffle-admin-banner>\n</div>\n"),e.put("board/assignees-dropdown-menu.html",'<div class="waffle-dropdown-menu assignees-dropdown-menu">\n  <div class="up-arrow"></div>\n  <div class="up-arrow-inner"></div>\n\n  <div class="text-center waffle-dropdown-menu-header">\n    <p>Assign up to 10 people to this card</p>\n    <input type="text" ng-model="assigneeSearch.login" placeholder="Filter people" class="form-control js-assignee-search">\n  </div>\n\n  <ul class="text-left waffle-dropdown-menu-list" ng-click="$event.stopPropagation()">\n    <li class="waffle-dropdown-menu-list-item" ng-click="setAssignees()">\n      <i class="fa fa-times-circle-o clear-selection-icon"></i>\n      <span class="clear-selection-text">Clear assignees</span>\n    </li>\n    <li ng-hide="possibleAssignees" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n    <li class="waffle-dropdown-menu-list-item"\n        ng-repeat="assignee in possibleAssignees | filter:assigneeSearch"\n        ng-class="{highlight: ($index === 0 && assigneeSearch)}"\n        ng-click="setAssignees(assignee)">\n      <i ng-class="{\'is-picked\': isActiveAssignee(assignee)}" class="fa fa-check checkmark"></i>\n      <img ng-src="{{assignee.avatar_url}}" class="img-circle">\n      <span class="user-login">{{assignee.login}}</span>\n    </li>\n  </ul>\n</div>\n'),e.put("board/assignees-stack.html",'<div bindonce="hasAccessToken" bo-switch="isTeamMember" class="assignees-stack">\n  <div bo-switch-when="true">\n    <button data-toggle="dropdown"\n            class="btn btn-link assignee-btn"\n            bo-disabled="!hasAccessToken">\n      <ul class="assignee-img-list" ng-show="assignees">\n        <li class="assignee-img-list-item"\n            ng-class="{\'collapse-assignees\':shouldCollapse}"\n            ng-repeat="assignee in assignees track by assignee.login">\n          <img class="assignee-img"\n               ng-src="{{assignee.avatar_url}}"\n               tooltip="{{assignee.login}}"\n               tooltip-placement="top"\n               tooltip-popup-delay=\'700\'\n               tooltip-append-to-body="true">\n        </li>\n      </ul>\n      <span ng-hide="assignees.length"\n            class="unassigned"\n            tooltip="assign"\n            tooltip-placement="top"\n            tooltip-popup-delay=\'1500\'\n            tooltip-append-to-body="true">\n        <i class="fa fa fa-user"></i>\n      </span>\n    </button>\n    <waffle-assignees-dropdown-menu card="card" class="dropdown-menu"></waffle-assignees-dropdown-menu>\n  </div>\n  <div bo-switch-when="false">\n    <div class="assignee-icon disabled" ng-show="assignees">\n      <ul class="assignee-img-list">\n       <li class="assignee-img-list-item"\n           ng-class="{\'collapse-assignees\':shouldCollapse}"\n           ng-repeat="assignee in assignees track by assignee.login">\n         <img class="assignee-img"\n              ng-src="{{assignee.avatar_url}}"\n              tooltip="{{assignee.login}}"\n              tooltip-placement="top"\n              tooltip-popup-delay=\'700\'\n              tooltip-append-to-body="true">\n       </li>\n      </ul>\n    </div>\n  </div>\n</div>\n'),e.put("board/badge-pull-request-modal.html",'<div class="modal-header">\n    <button type="button" class="close" ng-click="$close()" aria-hidden="true">&times;</button>\n    <img class="signup-drips" src="/resources/images/signup_drips.png">\n</div>\n<div class="modal-body">\n    <h1 id="modal-title">Oops!</h1>\n    <h2>We were unable to add your badge.</h2>\n    <p>Insert this code anywhere in your readme to get your badge:</p>\n  <h5>readme.md</h5>\n  <code>[![Stories in Ready](https://badge.waffle.io/{{username}}/{{repo}}.png?label=ready&title=Ready)](http://waffle.io/{{username}}/{{repo}})</code>\n  <h5>readme.rst</h5>\n  <code>.. image:: https://badge.waffle.io/{{username}}/{{repo}}.png?label=ready&title=Ready <br />&nbsp;:target: https://waffle.io/{{username}}/{{repo}} <br />&nbsp;:alt: \'Stories in Ready\'</code>\n  <h5>readme.rdoc</h5>\n  <code>{&lt;img alt=\'Stories in Ready\' src=\'https://badge.waffle.io/{{username}}/{{repo}}.png?label=ready&title=Ready\' /&gt;}[https://waffle.io/{{username}}/{{repo}}]</code>\n</div>\n'),e.put("board/base.html","<div>\n  <waffle-sidebar></waffle-sidebar>\n  <ui-view/>\n</div>\n"),e.put("board/board.html",'<div class="board js-board">\n  <div class="loading-mask" ng-hide="board">\n    <div class="loading-indicator">\n      <i class="fa fa-spinner waffle-spin"></i><span class="indicator-message">Ironing your waffle</span>\n    </div>\n  </div>\n\n  <waffle-badge-pull-request-banner></waffle-badge-pull-request-banner>\n  <waffle-source-oauth-banner waffle-oauth-banner-severity="\'warning\'">\n    You need further authentication to see all the content on this page.\n  </waffle-source-oauth-banner>\n  <waffle-webhook-banner></waffle-webhook-banner>\n  <waffle-create-project-banner></waffle-create-project-banner>\n\n  <div class="board-body">\n    <div class="columns-ct">\n      <div class="column-ct"\n           ng-class="{\'collapsed\': column.collapsed}"\n           ng-repeat="column in board.columns | orderBy:\'rank\'">\n        <waffle-column></waffle-column>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("board/card-comment.html",'<div class="card-comment" bindonce="item.user">\n  <a bo-href="item.user.html_url">\n    <img class=\'discusser-avatar img-rounded\' bo-src="item.user.avatar_url" />\n  </a>\n\n  <div class="card-item">\n    <div class="card-item-header">\n      <span bindonce="item.user.login">\n        <a bo-href="item.user.html_url" bo-bind="item.user.login"></a>\n      </span>\n      <span bindonce="timeSinceAction">\n        <span class="card-action" bo-bind="action + \' \' + timeSinceAction"></span>\n      </span>\n\n      <span bindonce="isTeamMember">\n        <span class="pull-right github-icon github-icon-x" bo-if="isTeamMember && deletable" ng-click="delete()"></span>\n        <span class="pull-right github-icon github-icon-pencil" bo-if="isTeamMember" ng-click="edit()"></span>\n        <waffle-comment-label class="pull-right" card="card" comment-owner="item.user"></waffle-comment-label>\n      </span>\n    </div>\n\n    <div class="card-item-body" ng-show="!editing">\n      <div class="placeholder" ng-if="!(item.body || item.body_html)" >No description given.</div>\n      <div ng-if="item.body_html" ng-bind-html="item.body_html" class="github-markdown" open-links-in-new-tab></div>\n      <div ng-if="!item.body_html && item.body && !editing" waffle-github-markdown="item.body"></div>\n    </div>\n\n    <div class="card-item-body body-edit" ng-show="editing">\n      <textarea\n        mentio\n        mentio-trigger-char\n        mentio-typed-text="typedMention"\n        mentio-items="assignees | filter:label:typedMention"\n        mentio-require-leading-space="true"\n        class="markdown-container"\n        msd-elastic\n        ng-model="textareaContent"\n        tabindex="1">\n      </textarea>\n      <button class="pull-left btn btn-default cancel-button" ng-click="reset()" tabindex="3">Cancel</button>\n      <button class="pull-right btn btn-primary submit-button" ng-click="submit()" data-loading-text="Saving..." tabindex="2">Update</button>\n    </div>\n  </div>\n</div>\n'),e.put("board/card-pr-list.html",'<div class="waffle-card-pr-list" bindonce>\n  <ul class="card-pr-list">\n    <li class="card-pr-list-item"\n        ng-repeat="pullRequest in card.pullRequests | orderBy:\'githubMetadata.state\':true">\n        <div class="minimizedPR">\n          <span class="pr-left">\n            <button ng-click="showDetailModal($event, pullRequest)" class="btn btn-link btn-xs number">\n              <span>{{pullRequest.githubMetadata.number}}</span>\n            </button>\n            <a ng-href="{{pullRequest.githubMetadata.html_url}}"  ng-class="pullRequest.githubMetadata.state" class="pr-icon-ct" target="_blank">\n              <i class="github-icon github-icon-pull-request pr-icon"></i>\n            </a>\n          </span>\n          <span class="pr-source" ng-click="expandAllPRs || toggleExpandPR($event, pullRequest)" ng-class="{disabled: expandAllPRs}">\n            <span ng-if="pullRequest.prSourceName"\n                  tooltip="{{pullRequest.prSourceName}}"\n                  tooltip-popup-delay="700"\n                  tooltip-enable="hasEllipsis()"\n                  tooltip-append-to-body="true">\n              {{pullRequest.prSourceName}}\n            </span>\n            <span ng-if="!pullRequest.prSourceName && !expandAllPRs" class="empty">\n              <i class="fa fa-angle-down dropdown-toggle" ng-if="!prClose"></i>\n              <i class="fa fa-angle-up" ng-if="prClose"></i></span>\n          </span>\n          <span class="pr-right">\n\n            <!--START assignee only-->\n            <img ng-if="multipleAssigneesOff && pullRequest.githubMetadata.assignee"\n                 class="assignee-img small-avatar"\n                 ng-src="{{pullRequest.githubMetadata.assignee.avatar_url}}"\n                 tooltip="{{pullRequest.githubMetadata.assignee.login}}"\n                 tooltip-placement="bottom"\n                 tooltip-popup-delay=\'700\'\n                 tooltip-append-to-body="true" />\n            <!--END assignee only-->\n\n            <waffle-assignees-stack card="pullRequest" ng-if="!multipleAssigneesOff"></waffle-assignees-stack>\n\n            <button ng-click="showDetailModal($event, pullRequest)" class="js-comments-button comment btn btn-link btn-xs">\n              <i class="github-icon github-icon-comment-discussion"></i>\n              <span class="comment-count">{{pullRequest.githubMetadata.comments}}</span>\n            </button>\n          </span>\n        </div>\n\n      <div ng-class="{in: expandAllPRs}" class="js-expandedPR panel-collapse collapse">\n        <span class="pr-title">{{pullRequest.githubMetadata.title}}</span>\n        <span class="pr-labels">\n          <waffle-label-pill-box labels="pullRequest.githubMetadata.labels"></waffle-label-pill-box>\n        </span>\n      </div>\n    </li>\n  </ul>\n</div>\n'),e.put("board/card.html",'<div  class="card"\n      ng-class="{highlight: card.recentlyChanged}"\n      bindonce="hasAccessToken"\n      bo-attr\n      bo-attr-data-waffle-url="card.githubMetadata.url">\n\n  <div class="card-header" bo-class="{draggable: isTeamMember}" ng-mousedown="canUserDragCard()" as-sortable-item-handle>\n    <button class="card-number btn btn-link btn-xs"\n            ng-mousedown="$event.stopPropagation()"\n            ng-click="showDetailModal($event)"\n            bo-bind="card.githubMetadata.number"\n            bo-disabled="!hasAccessToken"\n            no-drag></button>\n\n    <a  class="card-pull-request btn btn-link btn-xs"\n        ng-mousedown="$event.stopPropagation()"\n        ng-class="card.githubMetadata.state"\n        bo-href="card.githubMetadata.pull_request.html_url"\n        bo-if="card.githubMetadata.pull_request.html_url"\n        target="_blank"\n        tabindex="0">\n      <i class="github-icon github-icon-pull-request"></i>\n    </a>\n\n    <div  class="source-name"\n          ng-if="sourceName"\n          bo-bind="sourceName"\n          tooltip="{{sourceName}}"\n          tooltip-popup-delay=\'700\'\n          tooltip-enable="hasEllipsis()"\n          tooltip-append-to-body="true">\n    </div>\n\n    <!--START assignee only-->\n    <div bo-switch="isTeamMember" class="assignee-img-ct" ng-if="multipleAssigneesOff">\n      <div bo-switch-when="true">\n        <button data-toggle="dropdown"\n                class="btn btn-link assignee-btn"\n                bo-disabled="!hasAccessToken">\n          <img class="assignee-img"\n               ng-show="card.githubMetadata.assignee"\n               ng-src="{{card.githubMetadata.assignee.avatar_url}}"\n               tooltip="{{card.githubMetadata.assignee.login}}"\n               tooltip-placement="top"\n               tooltip-popup-delay=\'700\'\n               tooltip-append-to-body="true">\n          <span ng-hide="card.githubMetadata.assignee"\n                class="unassigned"\n                tooltip="assign"\n                tooltip-placement="top"\n                tooltip-popup-delay=\'1500\'\n                tooltip-append-to-body="true">\n            <i class="fa fa fa-user"></i>\n          </span>\n        </button>\n        <waffle-owner-dropdown-menu card="card" class="dropdown-menu"></waffle-owner-dropdown-menu>\n      </div>\n      <div bo-switch-when="false">\n        <div class="assignee-icon disabled"\n             ng-show="card.githubMetadata.assignee">\n          <img class="assignee-img"\n               ng-src="{{card.githubMetadata.assignee && card.githubMetadata.assignee.avatar_url}}"\n               tooltip="{{card.githubMetadata.assignee.login}}"\n               tooltip-placement="top"\n               tooltip-popup-delay=\'700\'\n               tooltip-append-to-body="true">\n        </div>\n      </div>\n    </div>\n    <!--END assignee only-->\n\n    <waffle-assignees-stack card="card" ng-if="!multipleAssigneesOff"></waffle-assignees-stack>\n  </div>\n\n  <div class="card-body">\n    <textarea class="title"\n              bo-if="isTeamMember && hasAccessToken"\n              ng-model="card.githubMetadata.title"\n              msd-elastic\n              waffle-inline-edit\n              waffle-inline-edit-allow-empty="false"\n              waffle-inline-edit-submit="updateCard()">\n    </textarea>\n    <div class="title" bo-if="!(isTeamMember && hasAccessToken)">{{card.githubMetadata.title}}</div>\n\n    <div class="footer clearfix">\n      <div class="pills">\n        <span class="milestone-pill"\n              ng-show="card.githubMetadata.milestone.title">\n              {{card.githubMetadata.milestone.title}}\n        </span>\n\n        <waffle-label-pill-box labels="card.githubMetadata.labels"></waffle-label-pill-box>\n      </div>\n\n      <div class="card-footer-actions">\n        <a  class="card-pull-request btn btn-link btn-xs card-footer-action"\n            bo-href="card.githubMetadata.html_url"\n            target="_blank"\n            tooltip="view in GitHub"\n            tooltip-placement="bottom"\n            tooltip-popup-delay=\'1500\'\n            tooltip-append-to-body="true">\n          <i class="fa fa-github go-github-icon"></i>\n        </a>\n        <div class="card-size">\n          <button data-toggle="dropdown"\n                  class="btn-link size card-footer-action"\n                  bo-class="{disabled: !isTeamMember || !hasAccessToken}"\n                  bo-disabled="!isTeamMember || !hasAccessToken"\n                  bo-if="isTeamMember && hasAccessToken"\n                  ng-click="track(\'clicked edit size from card\')"\n                  tooltip="size"\n                  tooltip-placement="bottom"\n                  tooltip-popup-delay=\'1500\'\n                  tooltip-append-to-body="true">\n              <i class="fa fa-balance-scale size-icon" ng-if="!card.size"></i>\n              <span class="size-count" ng-if="card.size">{{card.size}}</span>\n            </span>\n          </button>\n          <div class="size card-footer-action disabled"\n               ng-show="card.size && !(isTeamMember && hasAccessToken)"\n               tooltip="size"\n               tooltip-placement="bottom"\n               tooltip-popup-delay=\'1500\'\n               tooltip-append-to-body="true">\n            <span class="size-count" ng-if="card.size">{{card.size}}</span>\n          </div>\n          <waffle-size-dropdown-menu card="card" class="dropdown-menu" bo-if="isTeamMember"></waffle-size-dropdown-menu>\n        </div>\n        <button ng-click="showDetailModal($event)"\n                class="btn-link js-comments-button card-footer-action"\n                target="_blank"\n                tooltip="comment"\n                tooltip-placement="bottom"\n                tooltip-popup-delay=\'1500\'\n                tooltip-append-to-body="true">\n          <i class="github-icon github-icon-comment-discussion"></i>\n          <span class="count" ng-if="card.githubMetadata.comments > 0">{{card.githubMetadata.comments}}</span>\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <waffle-card-pr-list ng-if="card.pullRequests.length" card="card"></waffle-card-pr-list>\n</div>\n'),e.put("board/column.html",'<div class="column">\n  <div class="column-header text-center">\n    <button class="archive-all btn btn-link" ng-if="column.isDone && isTeamMember && !isFiltered" ng-click="archiveAllCheck()">\n      <i class="fa fa-archive"\n         tooltip="Archive all"\n         tooltip-popup-delay=\'500\'\n         tooltip-append-to-body="true"></i>\n    </button>\n    <div ng-show="archiveAlert" class="popover alert-dialog">\n      <h4>Are you sure?</h4>\n      <p>Archive all will hide everything currently in this column from everyone\'s view.</p>\n      <form class="alert-form">\n        <button class="btn btn-warning button-warning" ng-click="archiveApproval(true)">Archive All</button>\n        <button class="btn btn-default button-cancel" ng-click="archiveApproval(false)">Cancel</button><br>\n        <label class="hide-alert">\n          <input type="checkbox" class="hide-alert-chbx" ng-model="hideArchiveAlert.value">\n          Don\'t show again\n        </label>\n      </form>\n    </div>\n    <span class="column-text">\n      <span class="display-name"\n            ng-class="{\'has-tooltip\': hasEllipsis()}"\n            tooltip="{{column.displayName}}"\n            tooltip-popup-delay=\'700\'\n            tooltip-enable="hasEllipsis()"\n            tooltip-append-to-body="true">\n        {{column.displayName}}\n      </span>\n      <span class="column-card-count">\n        <span class="column-card-count-filtered" ng-show="isFiltered">{{cards.length}} / </span>\n        <span class="column-card-count-total">{{column.cards.length}}</span>\n      </span>\n      <span ng-if="columnSizeTotal" class="column-card-size-sum">\n        <span class="column-card-size-filtered" ng-show="isFiltered">{{filteredColumnSizeTotal}} / </span>\n        <span class="column-card-size-total">{{columnSizeTotal}}</span>\n      </span>\n    </span>\n    <button class="column-toggle btn btn-link" ng-click="toggleCollapseColumn()">\n      <i ng-if="!column.collapsed" class="fa fa-compress"></i>\n      <i ng-if="column.collapsed" class="fa fa-expand"></i>\n    </button>\n  </div>\n\n  <div  class="column-body"\n        as-sortable="sortableOptions"\n        ng-model="cards"\n        is-disabled="{{!isTeamMember}}"\n        waffle-infinite-scrolling="scrollColumn()">\n\n    <waffle-card  card="card"\n                  column="column"\n                  as-sortable-item\n                  ng-repeat="card in cards | limitTo: endIndex track by card._id"></waffle-card>\n\n    <div class="column-description text-center">\n      <div class="column-description-header">{{column.displayName}}</div>\n      <div class="column-description-body">{{column.columnDescriptionBody}}</div>\n    </div>\n  </div>\n</div>\n'),e.put("board/comment-form.html",'<div class="comment-form" bindonce="loggedIn" bo-class="{\'logged-in\': loggedIn}">\n\n  <div bo-if="loggedIn">\n    <tabset class="tabset">\n      <tab heading="Write">\n        <textarea\n          mentio\n          mentio-trigger-char\n          mentio-typed-text="typedMention"\n          mentio-items="assignees | filter:label:typedMention"\n          mentio-require-leading-space="true"\n          class="form-control"\n          msd-elastic="\\n"\n          ng-model="form.comment"\n          tabindex="4">\n        </textarea>\n      </tab>\n\n      <tab  heading="Preview"\n            select="previewActive = true"\n            deselect="previewActive = false"\n            disabled="!form.comment">\n        <div class="preview" ng-if="previewActive" waffle-github-markdown="form.comment"></div>\n      </tab>\n    </tabset>\n\n    <div class="footer">\n      <button class="btn btn-primary pull-right comment-btn" tabindex="5" ng-click="comment()" ng-disabled="!form.comment" data-loading-text="Commenting...">Comment</button>\n    </div>\n  </div>\n\n  <div class="login-prompt" bo-if="!loggedIn">\n    <a ng-click=\'login()\'>Sign in</a> to join this conversation.\n  </div>\n</div>\n'),e.put("board/detail-modal.html",'<div class=\'modal-header\' bindonce>\n  <div class="drag-modal">\n    <i class="drag-handle fa fa-ellipsis-v"/>\n    <i class="drag-handle fa fa-ellipsis-v"/>\n  </div>\n  <a ng-href="{{card.githubMetadata.html_url || card.githubMetadata.pull_request.html_url}}"\n      target=\'_blank\'\n      ng-click="controller.track(\'clicked title to go to GitHub from issue detail\')">\n    <span class=\'issue-number\' bo-bind="card.githubMetadata.number"></span>\n    <span class=\'issue-title\' bo-bind="card.githubMetadata.title"></span>\n  </a>\n  <button type=\'button\' class="close" ng-click="$close()" aria-hidden=\'true\'>&times;</button>\n</div>\n\n<div class=\'modal-body container-fluid\' bindonce>\n  <div class=\'row\'>\n    <div class=\'card-sidebar col-md-10\'>\n      <div ng-if="sourceName" class="source-name-ct">\n        <i class="repo-icon" ng-class="{\'github-icon github-icon-repo public-icon\': !privateSource, \'fa fa-lock private-icon\': privateSource}"></i>\n        <p bo-bind="sourceName" class="source-name"></p>\n        <div class="horizontal-divider"></div>\n      </div>\n\n      <div class=\'discussion-status\'>\n        <span class="state {{card.githubMetadata.state}}"\n              ng-bind="card.githubMetadata.state | uppercase"\n              ng-click="controller.track(\'clicked issue state from issue detail\')"></span>\n        <h5 class="archive-label" ng-if="card.archived">Archived</h5>\n        <span bo-if="isTeamMember"\n              ng-if="card.githubMetadata.state === \'closed\' && !card.archived">\n          <a class="btn btn-default btn-sm archive-button"\n             ng-click="archiveCard()">\n             <i class="fa fa-archive"></i>\n             <span>Archive</span>\n          </a>\n        </span>\n\n        <p class=\'comments-number\'>\n          <strong>{{card.githubMetadata.comments}}</strong>\n          <ng-pluralize count="card.githubMetadata.comments" when="{\'1\': \'comment\', \'other\': \'comments\'}"></ng-pluralize>\n        </p>\n        <div class="horizontal-divider"></div>\n      </div>\n\n      <!--START assignee only-->\n      <div class=\'assignee-container sidebar-options\' ng-if="multipleAssigneesOff">\n        <button data-toggle="dropdown"\n                class=\'option-button\'\n                ng-click="controller.track(\'clicked edit owner from issue detail\')"\n                ng-disabled="!isTeamMember">\n          <span>Assignee</span>\n          <i ng-if="isTeamMember" class=\'fa fa-gear menu-toggle-icon\'></i>\n        </button>\n        <waffle-owner-dropdown-menu card="card" class="dropdown-menu"></waffle-owner-dropdown-menu>\n        <ul class="assignee-img-list" ng-show="card.githubMetadata.assignee">\n          <li class="assignee-img-list-item">\n            <img class="assignee-img" ng-src="{{card.githubMetadata.assignee.avatar_url}}">\n            <p class="assignee-login">{{card.githubMetadata.assignee.login}}</p>\n          </li>\n        </ul>\n        <p class="option-placeholder" ng-hide="card.githubMetadata.assignee">Unassigned</p>\n      </div>\n      <!--END assignee only-->\n\n      <div class=\'assignee-container sidebar-options\' ng-if="!multipleAssigneesOff">\n        <button data-toggle="dropdown"\n                class=\'option-button\'\n                ng-click="controller.track(\'clicked edit owner from issue detail\')"\n                ng-disabled="!isTeamMember">\n          <span>Assignees</span>\n          <i ng-if="isTeamMember" class=\'fa fa-gear menu-toggle-icon\'></i>\n        </button>\n        <waffle-assignees-dropdown-menu card="card" class="dropdown-menu"></waffle-assignees-dropdown-menu>\n        <ul class="assignee-img-list" ng-show="card.githubMetadata.assignees.length">\n          <li class="assignee-img-list-item"\n              ng-repeat="assignee in card.githubMetadata.assignees | orderBy:\'login\' track by assignee.login">\n            <img class="assignee-img" ng-src="{{assignee.avatar_url}}">\n            <p class="assignee-login">{{assignee.login}}</p>\n          </li>\n        </ul>\n        <p class="option-placeholder" ng-hide="card.githubMetadata.assignees.length">Unassigned</p>\n      </div>\n\n      <div class="size-container sidebar-options">\n        <button data-toggle="dropdown"\n                class="option-button"\n                ng-class="{unsized:!card.size}"\n                ng-click="controller.track(\'clicked edit size from issue detail\')"\n                ng-disabled="!isTeamMember">\n          <span>Size</span>\n          <i ng-if="isTeamMember" class=\'fa fa-gear menu-toggle-icon\'></i>\n        </button>\n        <waffle-size-dropdown-menu card="card" class="dropdown-menu"></waffle-size-dropdown-menu>\n        <span class="size-number" ng-if="card.size">{{card.size}}</span>\n        <span class="option-placeholder" ng-hide="card.size">No Size</span>\n      </div>\n\n      <div class="labels-container sidebar-options">\n        <button data-toggle="dropdown"\n                class=\'option-button\'\n                ng-click="controller.track(\'clicked edit labels gear from issue detail\')"\n                ng-disabled="!isTeamMember">\n          <span>Labels</span>\n          <i ng-if="isTeamMember" class=\'fa fa-gear menu-toggle-icon\'></i>\n        </button>\n        <waffle-label-dropdown-menu card="card" class="dropdown-menu"></waffle-label-dropdown-menu>\n        <div class="labels">\n          <waffle-label-pill-box labels="card.githubMetadata.labels"></waffle-label-pill-box>\n          <div class="option-placeholder">No Labels</div>\n        </div>\n      </div>\n\n      <div class="milestone-container sidebar-options">\n        <button data-toggle="dropdown"\n                class=\'option-button\'\n                ng-click="controller.track(\'clicked edit milestone gear from issue detail\')"\n                ng-disabled="!isTeamMember">\n          <span>Milestone</span>\n          <i ng-if="isTeamMember" class=\'fa fa-gear menu-toggle-icon\'></i>\n        </button>\n        <waffle-milestone-dropdown-menu card="card" project="project" class="dropdown-menu"></waffle-milestone-dropdown-menu>\n        <div class="milestone-pill" ng-if="card.githubMetadata.milestone">{{card.githubMetadata.milestone.title}}</div>\n        <span class="option-placeholder" ng-hide="card.githubMetadata.milestone">No Milestone</span>\n      </div>\n    </div>\n\n    <div class=\'card-discussion col-md-2\' waffle-infinite-scrolling="controller.loadNextPageOfComments()" scroll-buffer="400">\n      <waffle-card-comment  class="js-card-description"\n                            card="card"\n                            item="card.githubMetadata"\n                            action="opened this issue"\n                            submit="updateBody()">\n      </waffle-card-comment>\n\n      <waffle-card-comment  class="comment"\n                            ng-repeat="comment in comments | orderBy:\'created_at\'"\n                            card="card"\n                            item="comment"\n                            submit="updateComment(comment)"\n                            delete="deleteComment(comment)">\n      </waffle-card-comment>\n\n      <div class="divider"></div>\n\n      <waffle-comment-form card="card" comments="comments"></waffle-comment-form>\n    </div>\n  </div>\n</div>\n'),e.put("board/keyboard-shortcut-docs.html",'<div class="modal-header">\n    <button type="button" class="close" ng-click="$close()" aria-hidden="true">x</button>\n    <h1>Keyboard Shortcuts</h1>\n</div>\n<div class="modal-body">\n    <table class="shortcuts">\n        <tr ng-repeat="shortcut in keyboardShortcuts">\n            <td class="keystroke">{{shortcut.keystroke}}</td>\n            <td class="action">{{shortcut.action}}</td>\n        </tr>\n    </table>\n</div>\n'),e.put("board/label-dropdown-menu.html",'<div class="waffle-dropdown-menu label-dropdown-menu">\n    <div class="up-arrow"></div>\n    <div class="up-arrow-inner"></div>\n\n    <div class="text-center waffle-dropdown-menu-header">\n      <p>Pick labels for this issue</p>\n      <input type="text" ng-model="labelSearch.name" placeholder="Filter labels" class="form-control"/>\n    </div>\n\n    <div class="waffle-dropdown-menu-list-container">\n      <ul class="text-left waffle-dropdown-menu-list">\n        <li ng-hide="labels" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n        <li class="waffle-dropdown-menu-list-item"\n            ng-repeat="label in labels | filter:labelSearch | orderBy:\'name\' track by label.name"\n            ng-class="{highlight: ($index === 0 && labelSearch)}"\n            ng-click="toggleLabel(label)"\n            ng-style="labelBackground(label, 0.2)">\n          <i ng-class="{\'is-picked\': isActiveLabel(label)}" class="fa fa-check checkmark"></i>\n          <span class="label-color" style="background-color: #{{label.color}}"></span>\n          <span class="label-name">{{label.name}}</span>\n        </li>\n      </ul>\n    </div>\n</div>\n'),e.put("board/milestone-dropdown-menu.html",'<div class="waffle-dropdown-menu milestone-dropdown-menu">\n    <div class="up-arrow"></div>\n    <div class="up-arrow-inner"></div>\n\n    <div class="text-center waffle-dropdown-menu-header">\n      <p>Select a milestone for this issue</p>\n      <input type="text" ng-model="milestoneSearch.title" placeholder="Filter milestones" class="form-control"/>\n    </div>\n\n    <div class="waffle-dropdown-menu-list-container">\n      <ul class="text-left waffle-dropdown-menu-list">\n        <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n        <li class="waffle-dropdown-menu-list-item" ng-click="selectMilestone(null)">\n          <i class="fa fa-times-circle-o clear-selection-icon"></i>\n          <span>Clear milestone</span>\n        </li>\n        <li class="waffle-dropdown-menu-list-item"\n            ng-repeat="milestone in milestones | filter:milestoneSearch | orderBy:\'title\'"\n            ng-class="{highlight: ($index === 0 && milestoneSearch)}"\n            ng-click="selectMilestone(milestone)">\n          <i ng-class="{\'is-picked\': card.githubMetadata.milestone.number == milestone.number}" class="fa fa-check checkmark"></i>\n          <span class="milestone-title">{{milestone.title}}</span>\n        </li>\n      </ul>\n    </div>\n</div>\n'),e.put("board/owner-dropdown-menu.html",'<div class="waffle-dropdown-menu owner-dropdown-menu">\n  <div class="up-arrow"></div>\n  <div class="up-arrow-inner"></div>\n\n  <div class="text-center waffle-dropdown-menu-header">\n    <p>Assign someone to this card</p>\n    <input type="text" ng-model="assigneeSearch.login" placeholder="Filter people" class="form-control js-assignee-search">\n  </div>\n\n  <ul class="text-left waffle-dropdown-menu-list">\n    <li class="waffle-dropdown-menu-list-item" ng-show="card.githubMetadata.assignee" ng-click="setAssignee()">\n      <i class="fa fa-times-circle-o clear-selection-icon"></i>\n      <span class="clear-selection-text">Clear assignee</span>\n    </li>\n    <li ng-hide="assignees" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n    <li class="waffle-dropdown-menu-list-item"\n        ng-repeat="assignee in assignees | filter:assigneeSearch"\n        ng-class="{highlight: ($index === 0 && assigneeSearch)}"\n        ng-click="setAssignee(assignee)">\n      <i ng-class="{\'is-picked\': (card.githubMetadata.assignee.login === assignee.login)}" class="fa fa-check checkmark"></i>\n      <img ng-src="{{assignee.avatar_url}}" class="img-circle">\n      <span class="user-login">{{assignee.login}}</span>\n    </li>\n  </ul>\n</div>\n'),e.put("board/page.html",'<div class="page-sizer" ng-class="{\'maximized\': isMaximized, \'minimized\': !isMaximized}">\n  <waffle-board></waffle-board>\n\n  <div ng-controller="KeyboardShortcutDocsController"></div>\n  <ui-view/>\n</div>\n'),e.put("board/size-dropdown-menu.html",'<div class="waffle-dropdown-menu size-dropdown-menu">\n  <div class="up-arrow"></div>\n  <div class="up-arrow-inner"></div>\n\n  <div class="text-center waffle-dropdown-menu-header">\n    <p>Select a Size\n      <i class="fa fa-question-circle help-icon"\n         tooltip="Add a size to compare difficulty if all issues are not broken down into the same amount of work. For example, if a card has 3 points it should be three times as difficult as a 1 point card."\n         tooltip-popup-delay=\'300\'\n         tooltip-placement="right"\n         tooltip-append-to-body="true"></i>\n    </p>\n  </div>\n\n  <ul class="text-left waffle-dropdown-menu-list">\n    <li class="waffle-dropdown-menu-list-item" ng-click="setSize()">\n      <i class="fa fa-times-circle-o clear-selection-icon"></i>\n      <span>Clear Size</span>\n    </li>\n    <li class="waffle-dropdown-menu-list-item"\n        ng-repeat="size in sizes"\n        ng-click="setSize(size)">\n      <i ng-class="{\'is-picked\': (card.size === size)}" class="fa fa-check checkmark"></i>\n      <span>{{size}}</span>\n    </li>\n  </ul>\n</div>\n'),e.put("color-picker.html",'<form name="form" class="color-picker">\n  <label class="label-color" style="background-color: #{{color}}"><span class="color-hash">#</span></label>\n  <input type="text" name="color" ng-model="color" maxlength="6" class="form-control dropdown-input new-color-input"></input>\n</form>\n'),e.put("delete-form.html",'<form role="form" name="deleteForm" ng-submit="delete()">\n  <div class="form-group">\n    <label for="deleteConfirmationInput">Enter "{{deleteConfirmation}}" to confirm delete</label>\n    <input type="text" class="form-control" id="deleteConfirmationInput" placeholder=\'Enter "{{deleteConfirmation}}"\' ng-model="confirmationValue"/>\n  </div>\n\n  <button type="submit" class="btn btn-danger" ng-disabled="!deleteConfirmed" ng-click="setLoading()" data-loading-text="DELETING...">DELETE</button>\n</form>\n'),e.put("home/page.html",'<div class="home-page"\n     bindonce>\n  <div class="board-list">\n    <div ng-if="!newProject">\n      <h3>\n        Your Projects\n        <div class="btn add-btn"\n             tooltip="Create a new project."\n             tooltip-placement="right"\n             ng-click="toggleNewProject()">\n          <i class="fa fa-plus-circle"></i>\n          Add Project\n        </div>\n      </h3>\n      <p class="repo-help-text">\n        All GitHub repositories in which you are a collaborator for which a Waffle project has been created will be shown in this list.<br />\n        <em ng-show="publicPermissions">\n          Don\'t see your project? It may be a private repo,\n          <a class="add-private-access" ng-click="upgrade(\'homepage project list link\')">add private repo access</a>\n          to view.\n        </em>\n      </p>\n    </div>\n    <h3 ng-if="newProject">\n      Add a Project\n      <div  class="btn btn-default return-btn"\n            tooltip="Back to your projects."\n            tooltip-placement="right"\n            ng-click="toggleNewProject()">\n        <i class="fa fa-reply"></i>Back\n      </div>\n    </h3>\n    <waffle-project-chooser ng-if="!newProject" public-permissions="publicPermissions" projects="projects"></waffle-project-chooser>\n    <div ng-if="newProject">\n      <p class="repo-help-text">Pick a repository to create a project. Don\'t see your organization\'s repos? Make sure you\'ve granted Waffle access\n        <a href="{{provider.baseUrl}}/settings/connections/applications/{{provider.clientId}}" target="_blank">here</a>.<br />\n        <em ng-show="publicPermissions">\n          Don\'t see your repository? It may be a private repo,\n          <a class="add-private-access" ng-click="upgrade(\'homepage add board link\')">add private repo access</a>\n          to view.\n        </em>\n      </p>\n      <waffle-github-repo-chooser submit="controller.addProject($selection)"\n                                  exclude-sources="excludeSources"\n                                  provider="provider"></waffle-github-repo-chooser>\n    </div>\n  </div>\n  <div class="user-panel">\n    <a class="open-intercom" ng-click="showIntercom()" bo-if="intercomIsEnabled">\n      <i class="help-icon fa fa-question-circle" tooltip="Ask a question"\n      tooltip-placement="left"></i>\n    </a>\n    <div>\n      <a class="hover-link" ui-sref="app.account.home"><img class="github-user-avatar img-circle" bo-src="avatarUrl" /></a>\n      <h4 class="github-username" bo-bind="githubUsername"></h4>\n      <a class="logout" ng-click="logout()">(logout)</a>\n      <p class="permission-status" ng-show="publicPermissions">logged in with public repo access</p>\n      <p class="permission-status" ng-hide="publicPermissions">logged in with private repo access</p>\n      <a class="add-private-access-btn add-btn"\n         ng-show="publicPermissions"\n         ng-click="upgrade(\'homepage userpanel button\')">\n         <i class="fa fa-lock private-icon"></i>\n         Add private repo access\n      </a>\n    </div>\n    <div class="hints">\n      <h3>Closing Issues via Commits</h3>\n      <p>Including a keyword and the issue # in your commit message will close that issue once it is merged into your default branch. This will automatically move the issue to the Done column on your Waffle board.</p>\n      <ul>\n        <b>keywords:</b>\n        <li>close, closes, closed</li>\n        <li>fix, fixes, fixed</li>\n        <li>resolve, resolves, resolved</li>\n      </ul>\n      <ul><b>examples:</b>\n        <li>same repo:<br />\n          <code>git commit -m "closes #104"</code></li>\n        <li>other repo:<br />\n          <code>git commit -m "closes username/repo#104"</code></li>\n      </ul>\n      <p>Pull Requests are issues too, merging a Pull Request will close it.</p>\n    </div>\n    <div class="hints">\n      <h3>Done Column</h3>\n      <p>The Done column only shows issues that have been closed within the past 7 days. Manually dragging an issue to the Done column on your Waffle board will close it. You can change which column closes your issues in your project settings.</p>\n    </div>\n    <div class="hints shortcuts">\n      <h3>Keyboard Shortcuts</h3>\n      <ul>\n        <li><span class="shortcut-symbol">/<span class="shortcut-separator"> or </span>f</span> : Filter Cards</li>\n        <li><span class="shortcut-symbol">i</span> : New Issue</li>\n        <li><span class="shortcut-symbol">r</span> : Reload Columns</li>\n        <li><span class="shortcut-symbol">&#8984;+\\</span> : Toggle Sidebar</li>\n        <li><span class="shortcut-symbol">?</span> : See Shortcut Documentation</li>\n      </ul>\n    </div>\n  </div>\n</div>\n'),e.put("home/project-chooser.html",'<div>\n  <input class="form-control filter-input project-list-input" placeholder="Filter projects" ng-model="projectSearch.name" autofocus />\n  <div class="project-list-container">\n    <div ng-hide="loaded" class="text-center picker-spinner">\n      <i class="fa fa-spinner waffle-spin"></i>\n      <span ng-if="!newUser">Fetching your projects</span>\n      <span ng-if="newUser">Finding all the Waffle projects you have access to...this will be much faster in the future.</span>\n    </div>\n    <div  bindonce\n          class="project-list-item"\n          ng-show="loaded"\n          ng-repeat="project in filteredProjects = (projects | filter:projectSearch | orderBy:[sortByPin, sortByName])">\n      <div ng-show="project.loading" class="text-center loading-project"><i class="fa fa-spinner waffle-spin"></i></div>\n      <div class="project-link" ng-click="goToState(\'app.board.home\', project)">\n        <i class="repo-icon" ng-class="project.sources[0].private ? \'fa fa-lock private-icon\' : \'github-icon github-icon-repo public-icon\'"></i>\n        <div class="project-info">\n          <h4 bo-bind="project.sources[0].displayName || project.name" class="project-name"></h4>\n          <span ng-repeat="source in project.sources" class="project-sources" ng-if="project.sources.length > 1">\n            <span bo-bind="(source.displayName || source.repoPath) + (!$last ? \',\' : \'\' ) "></span>\n          </span>\n        </div>\n      </div>\n      <div class="project-icon-btn btn-settings" ng-click="goToState(\'app.board.settings\', project);"><i class="fa fa-gear"></i></div>\n      <div class="project-icon-btn btn-pin"\n           ng-class="{\'pinned\':isPinnedProject(project)}"\n           ng-show="pin"\n           tooltip="Pins project to top of list"\n           tooltip-placement="left"\n           tooltip-popup-delay=\'1800\'\n           tooltip-append-to-body="true"\n           ng-click="toggleProjectPin(project)"><i class="fa fa-thumb-tack"></i></div>\n    </div>\n\n    <div class="placeholder" ng-show="loaded && projects.length === 0">You don\'t have any projects yet, <a ng-click="$parent.toggleNewProject()">click here</a> to add your first one.</div>\n    <div class="placeholder" ng-show="loaded && filteredProjects.length === 0 && projects.length > 0">No projects found by that name, <a ng-click="$parent.toggleNewProject()">click here</a> to add one.</div>\n  </div>\n</div>\n'),e.put("login-form.html",'<form action="{{authUrl}}" method="post"></form>\n'),e.put("metrics/burndown-graph.html",'<div class="burndown-graph">\n  <div class="panel panel-default form-inline burndown-header">\n    <h3 class="graph-title">Burndown Graph</h3>\n    <button class="btn btn-link toggle-btn"\n            ng-click="isCollapsed = !isCollapsed"\n            ng-show="showSnippets">\n      <i class="fa fa-github-alt"\n        aria-hidden="true"\n        tooltip="Add to your README"\n        tooltip-placement="right"\n        tooltip-popup-delay=\'100\'\n        tooltip-append-to-body="true"></i>\n   </button>\n    <div class="form-group" ng-class="{disabled: !selectedMilestone}">\n      <span class="date-label">Start</span>\n      <div class="input-group date-entry"\n           tooltip="Start date must be before the End date"\n           tooltip-placement="top"\n           tooltip-enable="!validDate">\n        <input type="text" class="form-control dp-text" ng-class="{\'invalid-date\': !validDate}" datepicker-popup="dd-MMMM-yyyy" ng-model="dp.startDate" min-date="dp.minStartDate" is-open="open.start" datepicker-options="dateOptions" datepicker-append-to-body="true" ng-required="true" close-text="Ok" />\n        <span class="input-group-btn">\n          <button type="button" class="btn toggle-button" ng-click="open($event,\'start\')"><i class="fa fa-calendar"></i></button>\n        </span>\n      </div>\n      <span class="date-label">End</span>\n      <div class="input-group date-entry"\n           tooltip="End date must be after the Start date"\n           tooltip-placement="top"\n           tooltip-enable="!validDate">\n        <input type="text" class="form-control dp-text" ng-class="{\'invalid-date\': !validDate}" datepicker-popup="dd-MMMM-yyyy" ng-model="dp.endDate" min-date="dp.minEndDate" is-open="open.end" datepicker-options="dateOptions" datepicker-append-to-body="true" ng-required="true" close-text="Ok" />\n        <span class="input-group-btn">\n          <button type="button" class="btn toggle-button" ng-click="open($event,\'end\')"><i class="fa fa-calendar"></i></button>\n        </span>\n      </div>\n      <div class="btn-group form-button">\n        <button type="button" class="btn primary" ng-class="{disabled: !buttonEnabled}" ng-click="buildGraph(dp.startDate, dp.endDate)">Go!</button>\n        <button type="button" class="btn primary menu-toggle dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n          <span class="caret"></span>\n          <span class="sr-only">Toggle Dropdown</span>\n        </button>\n        <ul class="dropdown-menu split-menu dropdown-menu-right">\n          <li ng-repeat="date in dates"\n              class="dropdown-menu-item"\n              ng-click="selectDate(date)">\n            <span>{{date.name}}</span>\n          </li>\n          <li ng-show="storedCustomDate" role="separator" class="divider"></li>\n          <li ng-show="storedCustomDate" class="dropdown-menu-item" ng-click="selectDate(\'custom\')">Last custom date</li>\n        </ul>\n      </div>\n    </div>\n    <div collapse="isCollapsed" class="collapsible-tabbed-view">\n      <p class="snippet-desc">Below are several variations of the Waffle Burndown Graph that you can add to your README.  Supported for public repos only.</p>\n      <waffle-graph-snippets></waffle-graph-snippets>\n    </div>\n  </div>\n  <div class="panel panel-default form-inline burndown-options">\n    <div class="btn-group burndown-option">\n      <label class="btn btn-sm btn-graph-radio" ng-class="{disabled: !showGraph}" ng-model="useSize" btn-radio="false">Count</label>\n      <label class="btn btn-sm btn-graph-radio" ng-class="{disabled: !showGraph}" ng-model="useSize" btn-radio="true">Size</label>\n    </div>\n    <div class="btn-group burndown-option">\n      <label class="btn btn-sm btn-graph-radio" ng-class="{disabled: !showGraph}" ng-model="closedType" btn-radio="\'Closed PRs\'">PRs Only</label>\n      <label class="btn btn-sm btn-graph-radio" ng-class="{disabled: !showGraph}" ng-model="closedType" btn-radio="\'Both\'">PRs &amp; Issues</label>\n      <label class="btn btn-sm btn-graph-radio" ng-class="{disabled: !showGraph}" ng-model="closedType" btn-radio="\'Closed Issues\'">Issues Only</label>\n    </div>\n    <div class="js-label-select burndown-option">\n      <i class="github-icon github-icon-milestone select-icon"></i>\n      <waffle-milestone-select select="selectMilestone($selection)" all-milestones="true"></waffle-milestone-select>\n    </div>\n  </div>\n  <div class="panel panel-default graph">\n    <span ng-hide="useSize" class="axis-labels y-axis">Card Count</span>\n    <span ng-show="useSize" class="axis-labels y-axis">Size Count</span>\n    <div ng-show="!showGraph" class="help-box">\n      <h3 class="help-title">Select a milestone from the dropdown</h3>\n      <p class="small-text">\n        Don\'t have a milestone? Create one in GitHub\n        <a href="{{githubBaseUrl}}/{{repoPath}}/milestones/new" target="_blank">here</a>.\n      </p>\n      <p class="help-text">\n        This Burndown Graph will show you how many issues or points you planned to complete in a set timeframe and how much effort is left in meeting that goal.\n      </p>\n    </div>\n    <div ng-show="emptyMilestone && loaded" class="help-box">\n      <h3 class="help-title">Empty Milestone</h3>\n      <p class="help-text">\n        There are no issues in this milestone.\n      </p>\n    </div>\n    <div ng-hide="loaded" class="graph-loading"><i class="fa fa-spinner waffle-spin" /></div>\n    <chartist class="ct-chart ct-major-twelfth chart-area" ng-show="loaded" ng-class="{\'demo-graph\': !showGraph || !loaded, \'no-ideal\': noIdeal}" chartist-data="chartData" chartist-chart-type="Line" chartist-chart-options="chartOptions"></chartist>\n    <span class="axis-labels">Date</span>\n  </div>\n  <div class="panel panel-default legend">\n    <div ng-show="noIdeal && showIdealAlert && loaded" class="popover alert-dialog">\n      <a class="dismiss-x" ng-click="dismissIdealAlert()"><i class="fa fa-times" /></a>\n      <h4>No Due Date</h4>\n      <p class="dialog-cta">\n        Set a due date in GitHub\n        <a href="{{githubBaseUrl}}/{{repoPath}}/milestones/{{selectedMilestone.number}}/edit" target="_blank">here</a>.\n      </p>\n      <p>\n        Milestone must have a due date to display the line showing the ideal progress to reach the scheduled date.\n      </p>\n\n      <form class="alert-form">\n        <label class="hide-alert">\n          <input type="checkbox" class="hide-alert-chbx" ng-model="hideIdealAlert.value">\n          Don\'t show again\n        </label>\n      </form>\n    </div>\n    <p class="legend-text"\n       tooltip="{{idealTooltip}}"\n       tooltip-placement="top"\n       tooltip-popup-delay=\'700\'\n       tooltip-append-to-body="true">\n       <span class="legend-color ideal"></span>\n       Ideal\n    </p>\n    <p class="legend-text"\n       tooltip="This line shows the actual progress towards reaching the scheduled due date"\n       tooltip-placement="top"\n       tooltip-popup-delay=\'700\'\n       tooltip-append-to-body="true">\n       <span class="legend-color actual"></span>\n       Actual\n    </p>\n  </div>\n</div>\n'),e.put("metrics/burndown.html",'<div class="waffle-metrics burndown">\n  <waffle-burndown-graph></waffle-burndown-graph>\n</div>\n'),e.put("metrics/graph-snippets.html",'<div class="readme-snippets tabbed-view" ng-if="showSnippets">\n  <h3>{{snippetBuilder.displayName}} Code Snippets</h3>\n  <p class="snippet-desc" ng-if="snippetBuilder.urlName == \'throughput\'">Below are several variations of the Waffle Throughput Graph that you can add to your README.  Supported for public repos only.</p>\n  <tabset>\n    <tab heading="readme.md">\n      <code>\n        [![{{snippetBuilder.displayName}}](https://graphs.waffle.io/{{snippetBuilder.path}}/{{snippetBuilder.urlName}}.svg{{snippetBuilder.params}})](https://waffle.io/{{username}}/{{repo}}/metrics/{{snippetBuilder.urlName}})\n      </code>\n    </tab>\n    <tab heading="readme.rst">\n      <code>\n        .. image:: https://graphs.waffle.io/{{snippetBuilder.path}}/{{snippetBuilder.urlName}}.svg{{snippetBuilder.params}} <br />&nbsp;:target: https://waffle.io/{{username}}/{{repo}}/metrics/{{snippetBuilder.urlName}} <br />&nbsp;:alt: \'{{snippetBuilder.displayName}}\'\n      </code>\n    </tab>\n    <tab heading="readme.rdoc">\n      <code>\n        {&lt;img alt=\'{{snippetBuilder.displayName}}\' src=\'https://graphs.waffle.io/{{snippetBuilder.path}}/{{snippetBuilder.urlName}}.svg{{snippetBuilder.params}}\' /&gt;}[https://waffle.io/{{username}}/{{repo}}/metrics/{{snippetBuilder.urlName}}]\n      </code>\n    </tab>\n    <tab heading="dates (optional)" ng-if="snippetBuilder.urlName == \'burndown\'">\n      <code>\n        Add parameters &amp;end=date and/or &amp;start=date to change the date range for the graph.\n      </code>\n    </tab>\n  </tabset>\n</div>\n'),e.put("metrics/page.html",'<div class="page-sizer waffle-metrics" ng-class="{\'maximized\': isMaximized, \'minimized\': !isMaximized}">\n  <div ui-view bindonce>\n    <div class="graph-tiles">\n      <div class="graph-tile" ui-sref="app.board.metrics.throughput">\n        <div class="graph-tile-header">\n          <h3>Throughput</h3>\n          <p>Issues closed over time</p>\n        </div>\n        <img class="graph-tile-image throughput-img" src="/resources/images/graph-throughput.png" />\n      </div>\n      <div class="graph-tile" ui-sref="app.board.metrics.burndown">\n        <div class="graph-tile-header">\n          <h3>Milestone Burndown</h3>\n          <p>Rate of issue progress towards milestone completion</p>\n        </div>\n        <img class="graph-tile-image throughput-img" src="/resources/images/graph-burndown.png" />\n      </div>\n    </div>\n    <div ng-if="loggedIn && intercomIsEnabled">\n      <div>\n        <div class="tell-us-what-you-think">\n          <h1>Want to see other graphs?</h1>\n          <p><a ng-click="controller.openIntercom()">Tell us what you think</a></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("metrics/throughput-graph-filter.html",'<div>\n  <div class="panel-group" id="accordion">\n    <div class="panel panel-default display-toggles">\n      <div class="panel-heading">\n        <h4 class="panel-title">\n          <span class="panel-expanded">Displays</span>\n        </h4>\n      </div>\n      <div class="panel-body">\n        <ul>\n          <li class="dropdown-menu-item">\n            <waffle-toggle-switch toggle-state-selection="useSize" class="pull-left"></waffle-toggle-switch>\n            <span class="pull-left toggle-label">Count by Size</span>\n          </li>\n          <li class="dropdown-menu-item">\n            <waffle-toggle-switch toggle-state-selection="closedPRs" class="pull-left"></waffle-toggle-switch>\n            <span class="pull-left toggle-label">Closed PRs</span>\n          </li>\n          <li class="dropdown-menu-item">\n            <waffle-toggle-switch toggle-state-selection="closedIssues" class="pull-left"></waffle-toggle-switch>\n            <span class="pull-left toggle-label">Closed Issues</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h4 class="panel-title">\n          <span class="panel-expanded">Labels to exclude</span>\n        </h4>\n      </div>\n      <div class="panel-body">\n        <waffle-label-filters project="project" start-open=true exclude=true></waffle-label-filters>\n      </div>\n    </div>\n    <div class="panel panel-default">\n        <div class="panel-heading">\n            <h4 class="panel-title">\n                <span class="panel-expanded">Milestones</span>\n            </h4>\n        </div>\n        <div class="panel-body">\n            <waffle-milestone-filters project="project" start-open=true></waffle-milestone-filters>\n        </div>\n    </div>\n    <div class="panel panel-default" ng-if="project.sources.length > 1">\n      <div class="panel-heading">\n        <h4 class="panel-title">\n          <span class="panel-expanded">Sources</span>\n        </h4>\n      </div>\n      <div class="panel-body">\n        <waffle-source-filters project="project" start-open="true"></waffle-source-filters>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("metrics/throughput-graph.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">Throughput ({{startDate}} to {{endDate}})</h4>\n  </div>\n  <div class="panel-body">\n    <div class="loading-graph" ng-hide="throughputGraphDataFetched || error">\n      <i class="fa fa-spinner waffle-spin"></i><span class="indicator-message">Crunching data</span>\n    </div>\n    <div class="throughput-graph"></div>\n  </div>\n</div>\n'),e.put("metrics/throughput.html",'<div class="waffle-metrics throughput">\n  <div>\n    <div class="row">\n      <div class="col-md-8 graph-container">\n        <waffle-throughput-graph></waffle-throughput-graph>\n        <div>\n          <p>\n          Throughput shows the amount of work completed in a certain time period. For teams, it\'s useful to determine a cadence, to help predict the amount of work the team is capable of doing.\n          </p>\n        </div>\n        <waffle-graph-snippets></waffle-graph-snippets>\n      </div>\n      <div class="col-md-2 graph-filters">\n        <waffle-throughput-graph-filter></waffle-throughput-graph-filter>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("milestone-select.html",'<div class="dropdown select select-with-icon">\n  <a class="dropdown-menu-toggle" data-toggle="dropdown">\n    <div class="dropdown-title">{{selectedMilestone}}</div>\n    <i class="fa fa-angle-down dropdown-toggle"></i>\n  </a>\n  <div class="dropdown-menu">\n    <div class="dropdown-input-ct">\n      <input type="text" ng-model="milestoneSearch.title" placeholder="Find Milestone" class="form-control dropdown-input"/>\n    </div>\n    <ul class="dropdown-menu-item-list">\n      <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n      <li class="dropdown-menu-item" ng-click="setMilestone()">\n        <i class="fa fa-times-circle-o clear-selection-icon"></i>\n        <span class="clear-selection-text">Clear milestone</span>\n      </li>\n      <li class="dropdown-menu-item"\n          ng-repeat="milestone in milestones | filter:milestoneSearch | orderBy:\'state\':\'title\'"\n          ng-class="{highlight: ($index === 0 && milestoneSearch), \'closed-milestone\': milestone.state == \'closed\'}"\n          ng-click="setMilestone(milestone)">\n        <span class="milestone-title">{{milestone.title}}</span>\n        <span class="milestone-state">{{milestone.state}}</span>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("oauth/authorize.html",'<div class="container oauth-grant-page">\n  <div class="row">\n    <div class="page-header col-md-8 col-md-offset-2">\n      <h1>Grant Access<br />\n        <small><strong>{{OAuthGrant.client.name}}</strong> wants to access your Waffle.io account</small>\n      </h1>\n    </div>\n  </div>\n\n  <div class="row">\n    <div class="col-md-4 col-md-offset-2">\n      <div class="permission panel panel-default row">\n        <div class="col-xs-2">\n          <i class="fa fa-book"></i>\n        </div>\n        <div class="col-xs-10">\n          <h5>Full Access</h5>\n          <p>This application will have full read and write access to your Waffle.io account.</p>\n        </div>\n      </div>\n    \n      <div class="row">\n        <div class="col-xs-12 form-row">\n          <form action="/login/oauth/decision" method="post" role="form">\n            <input class="form-control" name="transaction_id" type="hidden" value="{{OAuthGrant.transactionID}}" />\n            <input class="btn btn-success allow" type="submit" value="Allow" />\n            <input class="btn btn-default deny" type="submit" value="Deny" name="cancel" />\n          </form>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-3 col-md-offset-1 panel panel-default">\n      <h3>{{OAuthGrant.client.name}}</h3>\n      <p>{{OAuthGrant.client.description}}</p>\n      <p><a ng-href="{{OAuthGrant.client.homepage}}">{{OAuthGrant.client.homepage}}</a></p>\n    </div>\n  </div>\n  \n</div>\n'),e.put("settings/columns/column-editor.html",'<form novalidate name="form" class="column-editor">\n  <div class="editor-body">\n    <input type="text" class="display-name form-control column-form" ng-model="column.displayName" name="displayName" placeholder="Column name"/>\n\n    <textarea class="column-description form-control column-form" ng-model="column.columnDescriptionBody" name="columnDesc" placeholder="Column description"></textarea>\n\n    <span class="js-label-select column-label-select" ng-class="{show: hasGitHubLabel()}">\n      <waffle-column-label selection="column.label"></waffle-column-label>\n    </span>\n\n    <div class="edit-column-actions">\n      <div class="btn delete-column-button fa fa-trash-o" ng-click="deleteColumn()"></div>\n    </div>\n  </div>\n\n  <ul class="column-types" as-sortable="sortableOptions" ng-model="startTypes">\n    <li class="column-type" as-sortable-item as-sortable-item-handle ng-class="item.type" ng-repeat="item in startTypes">\n      <i class="drag-handle fa fa-ellipsis-v"/>\n      <i class="drag-handle fa fa-ellipsis-v right-handle"/>\n      <span class="type-name">{{item.name}}</span>\n      <i class="fa fa-question-circle help" tooltip="{{item.tooltip}}" tooltip-placement="top" tooltip-append-to-body="true"/>\n    </li>\n  </ul>\n</form>\n'),e.put("settings/columns/column-label.html",'<div class="dropdown select column-form">\n  <a class="dropdown-menu-toggle" data-toggle="dropdown">\n    <div class="dropdown-title">\n      <span class="label-color" ng-style="{\'background-color\': \'#\' + labelSelectDropdownColor}"></span>\n      {{labelSelectDropdownTitle}}\n    </div>\n    <i class="fa fa-angle-down dropdown-toggle"></i>\n  </a>\n  <div class="dropdown-menu">\n    <div ng-hide="newLabel" class="dropdown-input-ct">\n      <input type="text" ng-model="labelSearch.name" placeholder="Filter Labels" class="form-control dropdown-input filter-input"/>\n    </div>\n    <ul class="dropdown-menu-item-list">\n      <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n      <li class="dropdown-menu-item new-label-ct" ng-click="$event.stopPropagation()">\n        <a class="new-label-button" ng-click="newLabel=!newLabel" ng-hide="newLabel">Create GitHub Label</a>\n        <div ng-if="newLabel" class="new-label">\n          <input type="text" placeholder="New Label Name" ng-model="$parent.labelSearch.name" class="form-control dropdown-input new-label-input"/>\n          <waffle-color-picker color="colorPicker.hex" tooltip="{{colorInputError}}"></waffle-color-picker>\n          <button class="btn primary pull-right create-label-btn" ng-click="createLabel(labelSearch)" ng-disabled="!isValidLabel()" data-loading-text="Creating...">Create</button>\n        </div>\n      </li>\n      <li class="dropdown-menu-item"\n          ng-repeat="label in labels | filter:labelSearch"\n          ng-class="{highlight: ($index === 0 && labelSearch)}"\n          ng-click="selectLabel(label)"\n          ng-style="labelBackground(label, 0.2)">\n        <span class="label-color" style="background-color: #{{label.color}}"></span>\n        <span class="label-name">{{label.name}}</span>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("settings/columns/page.html",'<div class="column-settings">\n  <div class="page-header">\n    <h1>Customize your columns</h1>\n    <p>Rearrange and configure your columns to customize your workflow.</p>\n  </div>\n\n  <div class="columns-settings-ct" ng-show="loaded">\n    <div class="column-configuration-ct">\n      <div class="column-sections-ct">\n        <div class="column-section-ct">\n          <h4 class="column-section-header">Inbox</h4>\n          <p class="column-section-description">See open issues without a column label.</p>\n          <div class="column-section">\n            <ul as-sortable="sortableOptions" ng-model="columns.backlogColumns" class="column-ct" ng-init="columnSection=\'backlog\'">\n              <li as-sortable-item ng-repeat="column in columns.backlogColumns" class="column-editor-ct">\n                <i class="drag-icon fa fa-ellipsis-h" as-sortable-item-handle />\n                <waffle-column-editor column="column" columns="projectData.columns" selection="state.startTypes" />\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        <div class="vertical-divider">\n          <div class="column-section-ct progress-columns">\n            <h4 class="column-section-header">Progress</h4>\n            <p class="column-section-description">Organize and track your work through columns based on GitHub labels.</p>\n\n            <div class="btn add-column primary button" ng-click="newColumn()">\n              <i class="fa fa-plus-circle"></i>\n              <span>Add Column</span>\n            </div>\n\n            <div class="column-section">\n              <ul as-sortable="sortableOptions" ng-model="columns.progressColumns" class="column-ct" ng-init="columnSection=\'progress\'">\n                <li as-sortable-item ng-repeat="column in columns.progressColumns" class="column-editor-ct">\n                  <i class="drag-icon fa fa-ellipsis-h" as-sortable-item-handle />\n                  <waffle-column-editor column="column" columns="projectData.columns" selection="state.startTypes" />\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div class="column-section-ct">\n          <h4 class="column-section-header">Complete</h4>\n          <p class="column-section-description">Close and view completed issues.</p>\n          <div class="column-section">\n            <ul as-sortable="sortableOptions" ng-model="columns.completeColumns" class="column-ct" ng-init="columnSection=\'complete\'">\n              <li as-sortable-item ng-repeat="column in columns.completeColumns" class="column-editor-ct">\n                <i class="drag-icon fa fa-ellipsis-h" as-sortable-item-handle />\n                <waffle-column-editor column="column" columns="projectData.columns" selection="state.startTypes" />\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div class="well well-sm unused-types-ct">\n        <h4 class="unused-placeholder" ng-class="{\'text-center\': dropZone}" ng-hide="state.unclaimedStartTypes.length">\n          <span class="drop-zone-text" ng-show="dropZone">\n            Drop unused action here.\n          </span>\n          <span ng-hide="dropZone">\n            Drag &amp; drop the above actions on the column where you want those issues to go.\n          </span>\n        </h4>\n        <i class="fa fa-question-circle help-icon pull-right" tooltip="All actions are used by default, drop any undesired actions here. Hover over the question mark on each action for more information." tooltip-placement="left" tooltip-append-to-body="true"></i>\n        <ul as-sortable="typeSortableOptions" class="column-types unused-types" ng-class="{\'drop-zone\': dropZone}" ng-model="state.unclaimedStartTypes">\n          <li as-sortable-item as-sortable-item-handle class="column-type" ng-class="item.type" ng-repeat="item in state.unclaimedStartTypes">\n            <i class="drag-handle fa fa-ellipsis-v"/>\n            <i class="drag-handle fa fa-ellipsis-v right-handle"/>\n            <span class="type-name">{{item.name}}</span>\n            <i class="fa fa-question-circle help" tooltip="{{item.tooltip}}" tooltip-placement="top" tooltip-append-to-body="true"/>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class="buttons-ct">\n      <button class="btn save-columns-button primary button" ng-click="saveColumns()" ng-disabled="buttonDisabled()" ng-class="{disabled: buttonDisabled()}">\n        <div ng-show="!loading">Save</div>\n        <i ng-show="loading" class="fa fa-spinner fa-spin" />\n      </button>\n      <button class="btn cancel-columns-button button" ng-click="cancel()" ng-disabled="buttonDisabled()" ng-class="{disabled: buttonDisabled()}">\n        <div>Cancel</div>\n      </button>\n    </div>\n  </div>\n</div>\n'),e.put("settings/general/badge-snippets.html","<div class=\"readme-snippets tabbed-view\" ng-if=\"showSnippets\">\n  <h3>Badge Code Snippets (Public Repos Only)</h3>\n  <p>Below are several variations of the default 'Ready' column Waffle Badge that you can add to your README. This can be changed to represent any column that has a label.</p>\n  <tabset>\n    <tab heading=\"readme.md\">\n      <code>\n        [![Stories in Ready](https://badge.waffle.io/{{username}}/{{repo}}.svg?label=ready&title=Ready)](http://waffle.io/{{username}}/{{repo}})\n      </code>\n    </tab>\n    <tab heading=\"readme.rst\">\n      <code>\n        .. image:: https://badge.waffle.io/{{username}}/{{repo}}.svg?label=ready&title=Ready <br />&nbsp;:target: https://waffle.io/{{username}}/{{repo}} <br />&nbsp;:alt: 'Stories in Ready'\n      </code>\n    </tab>\n    <tab heading=\"readme.rdoc\">\n      <code>\n        {&lt;img alt='Stories in Ready' src='https://badge.waffle.io/{{username}}/{{repo}}.svg?label=ready&title=Ready' /&gt;}[https://waffle.io/{{username}}/{{repo}}]\n      </code>\n    </tab>\n    <tab heading=\"change label\">\n      <code>\n        If your label contains a space use '%20' instead, for example:<br /> 'label=In%20Progress&title=In%20Progress'\n      </code>\n    </tab>\n  </tabset>\n</div>\n"),e.put("settings/general/page.html",'<div class="page-header">\n  <h1>Configure your project</h1>\n</div>\n\n<div class="page-body">\n  <waffle-badge-snippets></waffle-badge-snippets>\n\n  <h3>Delete {{project.name}}</h3>\n  <p>Deleting a project will remove all of its data from waffle.io and unregister its webhooks to GitHub. Deleting a project will not affect any data in the GitHub repos that are connected to it.</p>\n\n  <waffle-delete-form delete-confirmation="{{project.name}}" delete="controller.deleteProject()"></waffle-delete-form>\n</div>\n'),e.put("settings/page.html",'<div class="page-sizer" ng-class="{\'maximized\': isMaximized, \'minimized\': !isMaximized}">\n  <div class="settings-page">\n      <div class="content" ui-view></div>\n  </div>\n</div>\n'),e.put("settings/sources/github/edit/edit-github-source-form.html",'<div>\n  <form role="form" name="form" bindonce="source">\n    <div class="row">\n      <div class="col-xs-4">\n        <div class="form-group">\n          <label for="sourceRepoPath">Repository path</label>\n          <input type="text" class="form-control" id="sourceRepoPath" bo-value="source.repoPath" disabled />\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-xs-4">\n        <div class="form-group">\n          <label for="sourceDisplayName">Display name</label>\n          <input type="text" class="form-control" id="sourceDisplayName" placeholder="Enter display name" ng-model="source.displayName" />\n        </div>\n      </div>\n    </div>\n\n    <button class="btn btn-default" ng-click="controller.cancel()">Cancel</button>\n    <button class="btn btn-primary" ng-click="controller.submit()">Update Source</button>\n  </form>\n</div>\n'),e.put("settings/sources/github/edit/page.html",'<div class="page-header">\n  <h1>Configure GitHub Source</h1>\n  <p>You can assign a display name to sources. If you have multiple repositories hooked to the same project, we will show you the source display name on each card so you know where it came from. If you don\'t give us a display name, we will show you the whole repo path on each card.</p>\n</div>\n\n<div class="page-body">\n  <waffle-edit-github-source-form source="source"></waffle-edit-github-source-form>\n</div>\n'),e.put("settings/sources/github/new/github-connect-form.html",'<form role="form" class="github-connect-form login-form">\n  <h4>Login to GitHub</h4>\n  <span class="auth-btns">\n    <a class="button public marketing-button" ng-click="login(\'public_repo\')"><i class="fa fa-heart"></i>Public Repos</a>\n    <i class="fa fa-github separator"></i>\n    <a class="button private marketing-button" ng-click="login(\'repo\')"><i class="fa fa-lock"></i>Private Repos</a>\n  </span>\n</form>\n'),e.put("settings/sources/github/new/github-enterprise-connect-form.html",'<form role="form">\n  <div class="form-group has-feedback" ng-class="{\'has-success\': ipIsValid, \'has-error\': ipIsInvalid}">\n    <label for="githubEnterpriseServerAddress">GitHub Enterprise Server Address</label>\n    <input type="text" class="form-control" id="githubEnterpriseServerAddress" placeholder="web address, like http://10.10.32.12" ng-model="provider.baseUrl">\n    <span ng-show="ipIsValid" class="glyphicon glyphicon-ok form-control-feedback"></span>\n  </div>\n\n  <div class="form-group has-feedback" ng-class="{\'has-error\': invalidClientIdAndSecret}">\n    <label for="githubEnterpriseClientId">Application Client Id</label>\n    <input type="text" class="form-control" id="githubEnterpriseClientId" placeholder="Enter Client Id" ng-model="provider.clientId" ng-disabled="!ipIsValid">\n    <span ng-show="invalidClientIdAndSecret" class="glyphicon glyphicon-remove form-control-feedback"></span>\n  </div>\n  <div class="form-group has-feedback" ng-class="{\'has-error\': invalidClientIdAndSecret}">\n    <label for="githubEnterpriseClientSecret">Application Client Secret</label>\n    <input type="text" class="form-control" id="githubEnterpriseClientSecret" placeholder="Enter Client Secret" ng-model="provider.clientSecret" ng-disabled="!ipIsValid">\n    <span ng-show="invalidClientIdAndSecret" class="glyphicon glyphicon-remove form-control-feedback"></span>\n  </div>\n\n  <button type="submit" class="btn btn-default" ng-click="submit()" ng-disabled="!(ipIsValid && provider.clientId && provider.clientSecret)">Authenticate</button>\n</form>'),e.put("settings/sources/github/new/github-repo-chooser.html",'<div class="github-repo-chooser">\n  <div class="filter-bar">\n    <input class="filter-input form-control" ng-model="filter" placeholder="Filter repos" />\n  </div>\n\n  <div class="sources-container">\n    <div ng-hide="repos != undefined" class="text-center picker-spinner"><i class="fa fa-spinner waffle-spin"></i></div>\n    <div  class="source"\n          ng-repeat="repo in filteredRepos = (repos | filter:doesntHaveSource | filter:filter | orderBy:\'full_name\')"\n          ng-click="selectRepo(repo)">\n      <div><i class="repo-icon" ng-class="{\'github-icon github-icon-repo public-icon\': !repo.private, \'fa fa-lock private-icon\': repo.private}"></i></div>\n      {{repo.full_name}}\n    </div>\n    <div class="placeholder" ng-show="filteredRepos.length === 0">No repos found.&nbsp;<a href="http://github.com/new" target="_blank">Add a repository in GitHub.</a></div>\n  </div>\n</div>\n'),e.put("settings/sources/github/new/page.html",'<div class="page-header">\n  <h1>Add GitHub Repo as Source</h1>\n  <p>See issues from your GitHub repositories on your board. Just tell us which repository you want to add.</p>\n</div>\n\n<div class="page-body">\n  <div class="tabbed-view github-provider">\n    <h3>Select a repository</h3>\n    <tabset>\n      <tab  heading="{{providerName}}"\n            ng-repeat="provider in providers | orderBy:\'default\'"\n            active="provider.active"\n            select="controller.setActiveProvider(provider)"\n            deselect="controller.setActiveProvider()">\n\n        <waffle-github-connect-form provider="provider"\n                                    ng-hide="hasGithubCredentials">\n        </waffle-github-connect-form>\n        <waffle-github-repo-chooser submit="controller.addSourceForRepo($selection, $provider)"\n                                    exclude-sources="project.sources"\n                                    provider="provider"\n                                    ng-if="hasGithubCredentials">\n        </waffle-github-repo-chooser>\n      </tab>\n\n      <tab heading="{{newProviderTabName}}" ng-if="providers">\n        <div class="tab-pane-content github-enterprise-settings">\n          <p class="warning">Before you connect a GitHub Enterprise repository to your board, please read our <a href="https://github.com/waffleio/waffle.io/wiki/GitHub-Enterprise-Support" target="_blank">how-to</a> on GitHub Enterprise support.</p>\n          <waffle-github-enterprise-connect-form provider="provider"></waffle-github-enterprise-connect-form>\n          </accordion>\n        </div>\n      </tab>\n    </tabset>\n  </div>\n</div>\n'),e.put("settings/sources/page.html",'<div class="page-header">\n  <h1>Configure your sources</h1>\n  <p>Add a source to interact with more than one repository on your board.</p>\n</div>\n\n<div class="page-body" ng-class="{\'has-banner\': settingsView}">\n  <h3>Add New Source\n    <i  class="fa fa-question-circle"\n        tooltip="Connect your board to new sources to see more content on your board."\n        tooltip-placement="right"></i>\n  </h3>\n\n  <div class="new-sources-container" bindonce>\n    <div  class="source-square not-connected"\n          ui-sref="app.board.settings.add-github-source">\n      <i class="action-icon fa fa-plus"></i>\n      <i class="source-logo fa fa-github"></i>\n      <div class="description">GitHub</div>\n    </div>\n\n    <div class="source-square" ng-click="controller.openIntercom()" bo-if="intercomIsEnabled">\n      <i class="source-logo request-more fa fa-heart-o"></i>\n      <div class="description">Tell us what you want</div>\n    </div>\n  </div>\n\n  <h3>Connected\n    <i  class="fa fa-question-circle"\n        tooltip="You will see content from each of these sources on your board. Click the edit button on a source to configure it. Click on the trash icon to disconnect a source from your board."\n        tooltip-placement="right"></i>\n  </h3>\n\n  <waffle-project-source ng-repeat="source in sources" project="project" source="source"></waffle-project-source>\n</div>\n<waffle-webhook-banner></waffle-webhook-banner>\n'),e.put("settings/sources/project-source.html",'<div class="well project-source" bindonce>\n  <i  class="fa fa-trash-o pull-right action"\n      ng-click="controller.removeSource(source)"\n      ng-if="source.repoPath !== project.name"></i>\n  <i  class="fa fa-ban pull-right action disabled-action"\n      ng-if="source.repoPath == project.name"\n      tooltip="Can not delete primary Waffle project repository"\n      tooltip-placement="left"></i>\n  <i  class="fa fa-pencil pull-right action"\n      ng-click="controller.editSource(source)"></i>\n  <span class="pull-left fa fa-github"></span>\n  <div class="description pull-left" bo-if="source.displayName" bo-bind="source.displayName"></div>\n  <div class="description" bo-class="{muted: source.displayName}" bo-bind="source.repoPath"></div>\n</div>\n'),e.put("sidebar/add-new/add-new.html",'<div class="add-new">\n  <div class="add-new-issue" ng-class="{\'open\': expanded}">\n    <span class="header-action-toggle">\n      <a class="button" ng-class="loggedIn ? \'primary\' : \'disabled\'"><i class="fa fa-plus-circle"></i>Add Issue</a>\n    </span>\n    <span ng-if="!loggedIn" class="logged-out-buttons">\n      <a class="button primary login" ng-click="login()"><i class="fa fa-github"></i>Login to add/edit issues</a>\n      <span class="separator">or</span>\n      <a class="board-signup" ng-click="signup()">Sign up - It\'s Free</a>\n    </span>\n    <form ng-show="expanded" class="popover input-group-sm" ng-submit="createCard()">\n      <input class="form-control text-input" type="text" placeholder="Title" name="title" ng-model="title" tabindex="1">\n      <i class="fa fa-times clear-input" ng-click="clearInput()"></i>\n      <span ng-show="project.sources.length > 1" class="js-source-select">\n        <i class="github-icon github-icon-repo select-icon"></i>\n        <waffle-source-select tabindex="2"></waffle-source-select>\n      </span>\n      <div id="collapse-details" class="panel-collapse collapse" ng-class="{\'in\': detailsOpen}">\n        <div class="card-description">\n          <textarea class="form-control"\n                    rows="5"\n                    placeholder="Enter card description"\n                    name="description"\n                    ng-model="description"\n                    tabindex="3">\n          </textarea>\n        </div>\n        <span ng-show="isTeamMember" class="js-owner-select">\n          <i class="fa fa fa-user select-icon"></i>\n\n          <!--START assignee only-->\n          <waffle-owner-select ng-if="multipleAssigneesOff" source="selectedSource" select="selectAssignee($selection)" tabindex="4"></waffle-owner-select>\n          <!--END assignee only-->\n\n          <waffle-assignees-select ng-if="!multipleAssigneesOff" source="selectedSource" selection="state.selectedAssignees" tabindex="4"></waffle-assignees-select>\n        </span>\n        <span ng-show="isTeamMember" class="js-label-select">\n          <i class="github-icon github-icon-tag select-icon"></i>\n          <waffle-label-select project="project" selection="state.selectedLabels" tabindex="5"></waffle-label-select>\n        </span>\n        <span ng-show="isTeamMember" class="js-milestone-select">\n          <i class="github-icon github-icon-milestone select-icon"></i>\n          <waffle-milestone-select source="selectedSource" select="selectMilestone($selection)" tabindex="6"></waffle-milestone-select>\n        </span>\n      </div>\n      <div class="form-footer">\n        <a class="expand-form-toggle" data-toggle="collapse" data-target="#collapse-details">\n          <span ng-hide="formExpanded">more details<i class="fa fa-angle-down dropdown-toggle"></i></span>\n          <span ng-show="formExpanded"><i class="fa fa-angle-up"></i>fewer details</span>\n        </a>\n        <button class="primary go-button js-add-new-button" data-loading-text="Creating..." ng-disabled="!title" type="submit" tabindex="7">Add</button>\n    </form>\n  </div>\n</div>\n'),e.put("sidebar/add-new/assignees-select.html",'<div class="dropdown select select-with-icon">\n  <a class="dropdown-menu-toggle" data-toggle="dropdown">\n    <div class="dropdown-title">{{selectedAssignee}}</div>\n    <i class="fa fa-angle-down dropdown-toggle"></i>\n  </a>\n  <div class="dropdown-menu">\n    <div class="dropdown-input-ct">\n      <input type="text" ng-model="assigneeSearch.login" placeholder="Filter people" class="form-control dropdown-input">\n    </div>\n    <ul class="dropdown-menu-item-list" ng-click="$event.stopPropagation()">\n      <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n      <li class="dropdown-menu-item" ng-click="clearAssignee()">\n        <i class="fa fa-times-circle-o clear-selection-icon"></i>\n        <span class="clear-selection-text">Clear assignees</span>\n      </li>\n      <li class="dropdown-menu-item"\n          ng-repeat="assignee in possibleAssignees | filter:assigneeSearch track by $index"\n          ng-class="{highlight: ($index === 0 && assigneeSearch)}"\n          ng-click="toggleAssignee(assignee)">\n        <i ng-class="{\'is-picked\': isActiveAssignee(assignee)}" class="fa fa-check checkmark"></i>\n        <img ng-src="{{assignee.avatar_url}}" class="img-circle">\n        <span class="user-login">{{assignee.login}}</span>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("sidebar/add-new/label-select.html",'<div class="dropdown select select-with-icon">\n  <a class="dropdown-menu-toggle" data-toggle="dropdown">\n    <div class="dropdown-title">{{labelSelectDropdownTitle}}</div>\n    <i class="fa fa-angle-down dropdown-toggle"></i>\n  </a>\n  <div class="dropdown-menu">\n    <div class="dropdown-input-ct">\n      <input type="text" ng-model="labelSearch.name" placeholder="Filter Labels" class="form-control dropdown-input"/>\n    </div>\n    <ul class="dropdown-menu-item-list" ng-click="$event.stopPropagation()">\n      <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n      <li class="dropdown-menu-item" ng-click="clearLabels()">\n        <i class="fa fa-times-circle-o clear-selection-icon"></i>\n        <span class="clear-selection-text">Clear labels</span>\n      </li>\n      <li class="dropdown-menu-item"\n          ng-repeat="label in labels | filter:labelSearch"\n          ng-class="{highlight: ($index === 0 && labelSearch)}"\n          ng-click="toggleLabel(label)"\n          ng-style="labelBackground(label, 0.2)">\n        <i ng-class="{\'is-picked\': isActiveLabel(label)}" class="fa fa-check checkmark"></i>\n        <span class="label-color" style="background-color: #{{label.color}}"></span>\n        <span class="label-name">{{label.name}}</span>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("sidebar/add-new/owner-select.html",'<div class="dropdown select select-with-icon">\n  <a class="dropdown-menu-toggle" data-toggle="dropdown">\n    <div class="dropdown-title">{{selectedAssignee}}</div>\n    <i class="fa fa-angle-down dropdown-toggle"></i>\n  </a>\n  <div class="dropdown-menu">\n    <div class="dropdown-input-ct">\n      <input type="text" ng-model="assigneeSearch.login" placeholder="Filter people" class="form-control dropdown-input">\n    </div>\n    <ul class="dropdown-menu-item-list">\n      <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n      <li class="dropdown-menu-item" ng-click="setAssignee()">\n        <i class="fa fa-times-circle-o clear-selection-icon"></i>\n        <span class="clear-selection-text">Clear assignee</span>\n      </li>\n      <li class="dropdown-menu-item"\n          ng-repeat="assignee in assignees | filter:assigneeSearch track by $index"\n          ng-class="{highlight: ($index === 0 && assigneeSearch)}"\n          ng-click="setAssignee(assignee)">\n        <img ng-src="{{assignee.avatar_url}}" class="img-circle">\n        <span class="user-login">{{assignee.login}}</span>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("sidebar/add-new/source-select.html",'<div class="dropdown select select-with-icon">\n  <a class="dropdown-menu-toggle" data-toggle="dropdown">\n    <div class="dropdown-title">{{selectedSource}}</div>\n    <i class="fa fa-angle-down dropdown-toggle"></i>\n  </a>\n  <div class="dropdown-menu">\n    <div class="dropdown-input-ct">\n      <input type="text" ng-model="sourceSearch" placeholder="Find source" class="form-control dropdown-input"/>\n    </div>\n    <ul class="dropdown-menu-item-list">\n      <li class="dropdown-menu-item"\n          ng-repeat="source in project.sources | filter:sourceSearch | orderBy:\'repoPath\'"\n          ng-class="{highlight: ($index === 0 && sourceSearch)}"\n          ng-click="selectSource(source)">\n        <span class="source-title">{{source.displayName || source.repoPath}}</span>\n        <span ng-if="!source.private" class="small pull-right"><em>public</em></span>\n        <span ng-if="source.private"class="small pull-right"><em>private</em></span>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("sidebar/filter.html",'<div class="filter-board">\n  <div class="search">\n    <input type="text" class="form-control search-query" placeholder="Filter Board" ng-model="search" />\n    <i class="fa fa-times clear-input" ng-show="search" ng-click="clearSearch()"></i>\n    <span class="header-action-toggle" ng-class="{\'open\': expanded}">\n      <i class="fa fa-filter filter-icon"></i>\n      <i class="fa fa-caret-down filter-more"></i>\n    </span>\n    <div ng-show="expanded" class="input-group input-group-sm filter-input-group popover">\n      <form class="inline-form expand-prs">\n        <label>\n          <input type="checkbox" ng-model="expandPRs" ng-change="toggleExpandAllPRs()">\n          <span>Expand connected PRs</span>\n        </label>\n      </form>\n      <a class="clear-all" ng-click="clearAllFilters()">clear all</a>\n      <div class="panel-group" id="accordion">\n        <div class="panel panel-default">\n          <div class="panel-heading">\n            <h4 class="panel-title">\n              <a data-toggle="collapse" data-parent="#accordion" data-target="#collapse-owners">\n                Assigned\n              </a>\n            </h4>\n          </div>\n          <div id="collapse-owners" class="panel-collapse collapse">\n            <div class="panel-body">\n              <waffle-owner-filters project="project">\n              </waffle-owner-filters>\n            </div>\n          </div>\n        </div>\n        <div class="panel panel-default">\n          <div class="panel-heading">\n            <h4 class="panel-title">\n              <a data-toggle="collapse" data-parent="#accordion" data-target="#collapse-labels">\n                Labels\n              </a>\n            </h4>\n          </div>\n          <div id="collapse-labels" class="panel-collapse collapse">\n            <div class="panel-body">\n              <waffle-label-filters project="project">\n            </waffle-label-filters>\n            </div>\n          </div>\n        </div>\n        <div class="panel panel-default">\n          <div class="panel-heading">\n            <h4 class="panel-title">\n              <a data-toggle="collapse" data-parent="#accordion" data-target="#collapse-milestones">\n                Milestones\n              </a>\n            </h4>\n          </div>\n          <div id="collapse-milestones" class="panel-collapse collapse">\n            <div class="panel-body">\n              <waffle-milestone-filters project="project">\n              </waffle-milestone-filters>\n            </div>\n          </div>\n        </div>\n        <div class="panel panel-default" ng-if="project.sources.length > 1">\n          <div class="panel-heading">\n            <h4 class="panel-title">\n              <a data-toggle="collapse" data-parent="#accordion" data-target="#collapse-sources">\n                Sources\n              </a>\n            </h4>\n          </div>\n          <div id="collapse-sources" class="panel-collapse collapse">\n            <div class="panel-body">\n              <waffle-source-filters project="project">\n              </waffle-source-filters>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="board-displays">\n        <waffle-pr-filters project="project">\n        </waffle-pr-filters>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("sidebar/label-filters.html",'<div class="label-filters">\n  <div class="collapse-input-section">\n    <input type="text" ng-model="labelSearch.name" placeholder="Filter labels" class="form-control label-search" />\n  </div>\n  <ul class="text-left">\n    <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n    <li class="waffle-filter-list-item dropdown-menu-item" ng-click="clearSelection()">\n      <i class="fa fa-times-circle-o clear-selection-icon"></i>\n      <span>Clear label filter</span>\n    </li>\n    <li class="waffle-filter-list-item dropdown-menu-item"\n        ng-click="toggleLabel(undefined)">\n      <i ng-class="{\'is-picked\': isActiveLabel(undefined)}" class="fa fa-check checkmark"></i>\n      <span>Unlabeled</span>\n    </li>\n    <li class="waffle-filter-list-item dropdown-menu-item"\n        ng-repeat="label in labels | filter:labelSearch | orderBy:\'name\'"\n        ng-class="{highlight: ($index === 0 && labelSearch)}"\n        ng-click="toggleLabel(label)"\n        ng-style="labelBackground(label, 0.2)">\n      <i ng-class="{\'is-picked\': isActiveLabel(label)}" class="fa fa-check checkmark"></i>\n      <span class="label-color" style="background-color: #{{label.color}}"></span>\n      <span class="label-name">{{label.name}}</span>\n    </li>\n  </ul>\n</div>\n'),e.put("sidebar/milestone-filters.html",'<div class="milestone-filters">\n  <div class="collapse-input-section">\n    <input type="text" ng-model="milestoneSearch.title" placeholder="Filter milestones" class="form-control milestone-search" />\n  </div>\n  <ul class="text-left">\n    <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n    <li class="waffle-filter-list-item dropdown-menu-item" ng-click="clearSelection()">\n      <i class="fa fa-times-circle-o clear-selection-icon"></i>\n      <span>Clear milestone filter</span>\n    </li>\n    <li class="waffle-filter-list-item dropdown-menu-item" ng-click="toggleMilestone(undefined)">\n      <i ng-class="{\'is-picked\': isActiveMilestone(undefined)}" class="fa fa-check checkmark"></i>\n      <span>Issues with no milestone</span>\n    </li>\n    <li class="waffle-filter-list-item dropdown-menu-item"\n        ng-repeat="milestone in milestones | filter:milestoneSearch | orderBy:\'title\'"\n        ng-class="{highlight: ($index === 0 && milestoneSearch)}"\n        ng-click="toggleMilestone(milestone)">\n      <i ng-class="{\'is-picked\': isActiveMilestone(milestone)}" class="fa fa-check checkmark"></i>\n      <span class="milestone-title" title="{{milestone.title}}">{{milestone.title}}</span>\n    </li>\n  </ul>\n</div>\n'),e.put("sidebar/owner-filters.html",'<div class="owner-filters">\n  <div class="collapse-input-section">\n    <input type="text" ng-model="assigneeSearch.login" placeholder="Filter people" class="form-control" />\n  </div>\n  <ul class="text-left">\n    <li ng-hide="loaded" class="text-center"><i class="fa fa-spinner fa-spin" /></li>\n    <li class="waffle-filter-list-item dropdown-menu-item" ng-click="clearSelection()">\n      <i class="fa fa-times-circle-o clear-selection-icon"></i>\n      <span>Clear assigned filter</span>\n    </li>\n    <li class="waffle-filter-list-item dropdown-menu-item" ng-click="toggleOwner(undefined)">\n      <i ng-class="{\'is-picked\': isActiveOwner(undefined)}" class="fa fa-check checkmark"></i>\n      <span>Unassigned</span>\n    </li>\n    <li class="waffle-filter-list-item dropdown-menu-item"\n        ng-repeat="assignee in assignees | filter:assigneeSearch"\n        ng-class="{highlight: ($index === 0 && assigneeSearch)}"\n        ng-click="toggleOwner(assignee)">\n      <i ng-class="{\'is-picked\': isActiveOwner(assignee)}" class="fa fa-check checkmark"></i>\n      <img ng-src="{{assignee.avatar_url}}" class="img-circle">\n      <span>{{assignee.login}}</span>\n    </li>\n  </ul>\n</div>\n'),e.put("sidebar/pr-filters.html",'<div class="btn-group radio-button-ct pr-filters">\n  <label class="btn radio-button" ng-class="{\'active\': isActiveView(view)}" ng-repeat="view in views">\n    <input\n      name="currentPrView"\n      type="radio"\n      value="{{view}}"\n      ng-change="setPrView(view)"\n      ng-model="$parent.currentPrView">\n      {{view}}\n  </label>\n  <span class="radio-button-switch"></span>\n</div>\n'),e.put("sidebar/project-dropdown.html",'<ul class="dropdown-ct">\n  <li class="dropdown project-dropdown">\n    <a class="dropdown-menu-toggle" data-toggle="dropdown">\n      <div class="dropdown-title">{{project.sources[0].displayName || project.name}}</div>\n      <i class="fa fa-angle-down dropdown-toggle"></i>\n    </a>\n\n    <ul class="dropdown-menu project-dropdown-menu" role="menu">\n      <li ng-if="publicPermissions && loggedIn" class="login-project-item">\n        <a class="add-private-access" ng-click="upgrade(\'project dropdown link\')">Add private repo access</a>\n      </li>\n      <li ng-repeat="project in projects | orderBy:[sortByPin, sortByName]" class="project-item">\n        <a ui-sref="app.board.home({username: project.name.split(\'/\')[0], repo: project.name.split(\'/\')[1]})">\n          <i class="repo-icon" ng-class="project.sources[0].private ? \'fa fa-lock private-icon\' : \'github-icon github-icon-repo public-icon\'"></i>\n          <span class="project-name">{{project.sources[0].displayName || project.name}}</span>\n        </a>\n        <div class="project-icon-btn btn-pin" ng-class="{\'pinned\':isPinnedProject(project)}" ng-show="pin" ng-click="toggleProjectPin(project);$event.stopPropagation();"><i class="fa fa-thumb-tack"></i></div>\n      </li>\n      <li class="disabled create-project-item" bo-if="ft(\'new_project\')"><a href="/projects/new">Create new project</a></li>\n\n      <li class="login-project-item" bo-if="!loggedIn">\n        <a ng-click="login()">Login to see your projects</a>\n      </li>\n    </ul>\n  </li>\n</ul>\n'),e.put("sidebar/share-form.html",'<div class="popover share-form" ng-class="{\'public-share-form\': showSocial}">\n  <h3 class="share-form-header">Pass the Syrup...</h3>\n  <p ng-hide="showSocial" class="js-private-text">Invite others by sending them a link to your board. Make sure they are a\n  <a href="https://help.github.com/articles/adding-collaborators-to-a-personal-repository/" target="_blank">collaborator</a> on your GitHub repo first! </p>\n  <p ng-show="showSocial" class="js-public-text">Invite others by sending them a link to your board or share it with the world!</p>\n  <div class="well copy-well">\n    <i class="fa fa-link url-link-icon"></i>\n    <input id="js-clipboard-text" class="copy-text" ng-class="{\'full-width\':hideCopyButton}" value="{{url}}" readonly>\n    <button class="js-copy-button btn btn-success copy-button" ng-hide="hideCopyButton" data-copied-text="Copied!" ng-disabled="copyError" data-clipboard-target="js-clipboard-text">Copy</button>\n  </div>\n  <span class="small copy-link-subtext" ng-show="hideCopyButton">(copy the link above to send to collaborators)</span>\n  <span class="small copy-link-error-text" ng-show="copyError"><i class="fa fa-frown-o error-icon"></i>Uh oh, the copy button didn\'t work. Please manually copy the link above to send to collaborators.</span>\n  <div class="share-form-buttons-ct" ng-show="showSocial">\n    <a class="btn twitter-button"><i class="fa fa-twitter share-icons"></i>Share on Twitter</a>\n  </div>\n</div>\n'),e.put("sidebar/sidebar.html",'<nav ng-class="{\'maximized\': isMaximized, \'minimized\': !isMaximized, \'no-header\': !project}"\n     class="sidebar navbar navbar-inverse"\n     role="navigation"\n     bindonce>\n  <div waffle-sidebar-toggle class="sidebar-toggle">\n    <span ng-click="toggleMaximized()" class="sidebar-toggle-icon">\n      <i class="fa fa-angle-right"></i>\n    </span>\n  </div>\n  <div class="navbar-header">\n    <ul class="nav navbar-nav">\n      <li class="nav-list-item brand-list-item"\n          ng-if="!project">\n        <a class="navbar-brand nav-link" ui-sref="app.home">\n          <i class="ico-logo nav-list-icon"></i>\n          <span class="sidebar-action-text">waffle<span class="nav-logo-text-io">.io</span></span>\n        </a>\n      </li>\n      <li class="nav-list-item js-share"\n          ng-class="{\'open\': share}"\n          ng-show="showInvite"\n          tooltip="Invite/Share Board"\n          tooltip-popup-delay=\'1200\'\n          tooltip-enable="!isMaximized"\n          tooltip-append-to-body="true"\n          tooltip-placement="right">\n        <a class="nav-link share-btn">\n          <i class="fa fa-users nav-list-icon"></i>\n          <span class="sidebar-action-text">Invite/Share</span>\n        </a>\n        <waffle-share-form ng-if="share"></waffle-share-form>\n      </li>\n      <li class="nav-list-item"\n          ng-if="project"\n          tooltip="Board View"\n          tooltip-popup-delay=\'1200\'\n          tooltip-enable="!isMaximized"\n          tooltip-append-to-body="true"\n          tooltip-placement="right">\n        <a class="nav-link" ui-sref="app.board.home({username: username, repo: repo})" ui-sref-active="active">\n          <i class="fa fa-table nav-list-icon"></i>\n          <span class="sidebar-action-text">Board View</span>\n        </a>\n      </li>\n      <li class="metrics nav-list-item"\n          ng-if="project"\n          tooltip="Metrics"\n          tooltip-popup-delay=\'1200\'\n          tooltip-enable="!isMaximized"\n          tooltip-append-to-body="true"\n          tooltip-placement="right">\n        <a class="nav-link" ui-sref="app.board.metrics" ui-sref-active="active">\n          <i class="fa fa-bar-chart-o nav-list-icon"></i>\n          <span class="sidebar-action-text">Metrics</span>\n        </a>\n      </li>\n      <li class="nav-list-item"\n          bo-if="isTeamMember"\n          project="project"\n          tooltip="Project Settings"\n          tooltip-popup-delay=\'1200\'\n          tooltip-enable="!isMaximized && !showSettingsNav"\n          tooltip-append-to-body="true"\n          tooltip-placement="right">\n        <a href="/{{username}}/{{repo}}/settings" class="nav-link" ng-class="{active:showSettingsNav}">\n          <i class="fa fa-gear nav-list-icon"></i>\n          <span class="sidebar-action-text">Project Settings</span>\n        </a>\n        <ul class="settings-nav" ng-show="showSettingsNav">\n          <li tooltip="Add/Edit Board Sources(Repos)"\n              tooltip-popup-delay=\'1000\'\n              tooltip-enable="!isMaximized"\n              tooltip-append-to-body="true"\n              tooltip-placement="right">\n            <a class="nav-link" ui-sref="app.board.settings.sources" ui-sref-active="active">\n              <i class="fa fa-folder-open nav-list-icon"></i>\n              <span class="sidebar-action-text">Sources</span>\n            </a>\n          </li>\n          <li tooltip="Customize Board Columns"\n              tooltip-popup-delay=\'1000\'\n              tooltip-enable="!isMaximized"\n              tooltip-append-to-body="true"\n              tooltip-placement="right">\n            <a class="nav-link" ui-sref="app.board.settings.columns" ui-sref-active="active">\n              <i class="fa fa-columns nav-list-icon"></i>\n              <span class="sidebar-action-text">Columns</span>\n            </a>\n          </li>\n          <li tooltip="General Project Settings"\n              tooltip-popup-delay=\'1000\'\n              tooltip-enable="!isMaximized"\n              tooltip-append-to-body="true"\n              tooltip-placement="right">\n            <a class="nav-link" ui-sref="app.board.settings.general" ui-sref-active="active">\n              <i class="fa fa-cogs nav-list-icon"></i>\n              <span class="sidebar-action-text">General</span>\n            </a>\n          </li>\n        </ul>\n      </li>\n      <li class="nav-list-item"\n          tooltip="View on GitHub"\n          tooltip-popup-delay=\'1200\'\n          tooltip-enable="!isMaximized"\n          tooltip-append-to-body="true"\n          tooltip-placement="right">\n        <a ng-show="project" class="nav-link js-github-url" href="{{githubBaseUrl}}/{{username}}/{{repo}}" target="_blank">\n          <i class="fa fa-github nav-list-icon"></i>\n          <span class="sidebar-action-text">View on GitHub</span>\n        </a>\n        <a ng-hide="project" class="nav-link js-github-account-url" href="{{githubBaseUrl}}/{{githubUsername}}" target="_blank">\n          <i class="fa fa-github nav-list-icon"></i>\n          <span class="sidebar-action-text">View on GitHub</span>\n        </a>\n      </li>\n      <li class="nav-list-item"\n          bo-if="loggedIn"\n          tooltip="Home/Dashboard"\n          tooltip-popup-delay=\'1200\'\n          tooltip-enable="!isMaximized"\n          tooltip-append-to-body="true"\n          tooltip-placement="right">\n        <a class="nav-link" ui-sref="app.home">\n          <i class="fa fa-home nav-list-icon"></i>\n          <span class="sidebar-action-text">Home</span>\n        </a>\n      </li>\n      <span class="sidebar-bottom-nav">\n        <li class="nav-list-item" bo-if="loggedIn && intercomIsEnabled">\n          <a class="open-intercom nav-link" ng-click="showIntercom()">\n            <i class="fa fa-question-circle nav-list-icon"\n               tooltip="Ask a Question"\n               tooltip-popup-delay=\'1200\'\n               tooltip-enable="!isMaximized"\n               tooltip-append-to-body="true"\n               tooltip-placement="right">\n            </i>\n            <span class="sidebar-action-text">Ask a Question</span>\n          </a>\n        </li>\n        <li class="nav-list-item" bo-if="loggedIn">\n          <a class="sidebar-action nav-link" ng-click="logout()">\n            <i class="fa fa-sign-out nav-list-icon log-out-icon"\n               tooltip="Logout"\n               tooltip-popup-delay=\'1200\'\n               tooltip-enable="!isMaximized"\n               tooltip-append-to-body="true"\n               tooltip-placement="right">\n            </i>\n            <span  class="sidebar-action-text nav-link">Logout</span>\n          </a>\n        </li>\n        <li class="nav-list-item" bo-if="loggedIn">\n          <a class="nav-link" ui-sref="app.account.home">\n            <img class="github-user-avatar img-circle"\n                 bo-src="avatarUrl"\n                 tooltip="My Account"\n                 tooltip-popup-delay=\'1200\'\n                 tooltip-enable="!isMaximized"\n                 tooltip-append-to-body="true"\n                 tooltip-placement="right"/>\n            <span class="sidebar-action-text">My Account</span>\n          </a>\n        </li>\n        <li class="login-action nav-list-item" bo-if="!loggedIn">\n          <a class="nav-link" ng-click="login()">\n            <i class="fa fa-user nav-list-icon"\n               tooltip="Login"\n               tooltip-popup-delay=\'1200\'\n               tooltip-enable="!isMaximized"\n               tooltip-append-to-body="true"\n               tooltip-placement="right">\n            </i>\n            <span class="sidebar-action-text">Login</span>\n          </a>\n        </li>\n      </span>\n    </ul>\n  </div>\n  <div class="header-nav" ng-if="project">\n    <ul class="header-nav-actions">\n      <li class="navbar-brand-ct nav-list-item">\n        <a class="navbar-brand nav-link" ui-sref="app.home">\n          <i class="ico-logo"></i>\n        </a>\n        <waffle-project-dropdown></waffle-project-dropdown>\n      </li>\n      <span class="board-actions" ng-show="showBoardActions">\n        <li class="add-issue nav-list-item">\n          <waffle-add-new multipleAssigneesOff="multipleAssigneesOff"></waffle-add-new>\n        </li>\n        <li class="filter nav-list-item">\n          <waffle-filter></waffle-filter>\n        </li>\n      </span>\n    </ul>\n  </div>\n</nav>\n'),e.put("sidebar/source-filters.html",'<div class="source-filters">\n  <div class="collapse-input-section">\n    <input type="text" ng-model="sourceSearch" placeholder="Filter sources" class="form-control"/>\n  </div>\n  <ul class="text-left">\n    <li class="waffle-filter-list-item dropdown-menu-item" ng-click="clearSelection()">\n      <i class="fa fa-times-circle-o clear-selection-icon"></i>\n      <span>Clear source filter</span>\n    </li>\n    <li class="waffle-filter-list-item dropdown-menu-item"\n        ng-repeat="source in project.sources | filter:sourceSearch | orderBy:\'repoPath\'"\n        ng-class="{highlight: ($index === 0 && sourceSearch)}"\n        ng-click="toggleSource(source)">\n      <i ng-class="{\'is-picked\': isActiveSource(source)}" class="fa fa-check checkmark"></i>\n      <span class="source-title">{{source.displayName || source.repoPath}}</span>\n    </li>\n  </ul>\n</div>\n'),e.put("toggle-switch.html",'<div class="onoffswitch">\n  <input type="checkbox" ng-model="toggleStateSelection" class="onoffswitch-checkbox" checked>\n  <label class="onoffswitch-label" ng-click="toggleStateSelection = !toggleStateSelection">\n    <span class="onoffswitch-inner"></span>\n    <span class="onoffswitch-switch"></span>\n  </label>\n</div>\n')}]),define("templates",function(){}),function(){angular.module("waffle").factory("WaffleApiHttpInterceptor",["Application","$injector","$q","$window",function(e,t,n,r){var i;return i=null,{request:function(t){var n,i,s,o;i=e.waffleApi.provider;if(t.url.indexOf(i.baseApiUrl)!==0)return t;e.session.user&&(n=_.find(e.session.user.credentials,{provider:i._id}),t.headers.Authorization="Bearer "+n.accessToken);if((s=r.Pusher.instances[0])!=null?(o=s.connection)!=null?o.socket_id:void 0:void 0)t.headers["x-waffle-socket-id"]=r.Pusher.instances[0].connection.socket_id;return t},responseError:function(r){var s,o;return r.config?r.config._refreshed?(delete r.config._refreshed,n.reject(r)):e.session.user?(o=e.waffleApi.provider,r.config.url.indexOf(o.baseApiUrl)!==0?n.reject(r):r.status!==401?n.reject(r):(s=t.get("$http"),i==null&&(i=s.post("/refresh-token",null,{headers:{"csrf-token":e.session.csrfToken}}).then(function(t){var n;return n=_.find(e.session.user.credentials,{provider:o._id}),n.accessToken=t.data.access_token,r.config._refreshed=!0})["catch"](function(){return n.reject(r)})["finally"](function(){return i=null})),i.then(function(){return s(r.config)}))):n.reject(r):n.reject(r)}}}])}.call(this),define("waffle-api-http-interceptor",function(){});